parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"awqi":[function(require,module,exports) {
"use strict";var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),i=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),l=Symbol.iterator;function p(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=l&&e[l]||e["@@iterator"])?e:null}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d=Object.assign,_={};function h(e,t,r){this.props=e,this.context=t,this.refs=_,this.updater=r||y}function x(){}function m(e,t,r){this.props=e,this.context=t,this.refs=_,this.updater=r||y}h.prototype.isReactComponent={},h.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},h.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=h.prototype;var v=m.prototype=new x;v.constructor=m,d(v,h.prototype),v.isPureReactComponent=!0;var b=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function w(t,r,n){var o,u={},s=null,a=null;if(null!=r)for(o in void 0!==r.ref&&(a=r.ref),void 0!==r.key&&(s=""+r.key),r)S.call(r,o)&&!$.hasOwnProperty(o)&&(u[o]=r[o]);var c=arguments.length-2;if(1===c)u.children=n;else if(1<c){for(var i=Array(c),f=0;f<c;f++)i[f]=arguments[f+2];u.children=i}if(t&&t.defaultProps)for(o in c=t.defaultProps)void 0===u[o]&&(u[o]=c[o]);return{$$typeof:e,type:t,key:s,ref:a,props:u,_owner:E.current}}function R(t,r){return{$$typeof:e,type:t.type,key:r,ref:t.ref,props:t.props,_owner:t._owner}}function k(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}function C(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}var g=/\/+/g;function j(e,t){return"object"==typeof e&&null!==e&&null!=e.key?C(""+e.key):t.toString(36)}function O(r,n,o,u,s){var a=typeof r;"undefined"!==a&&"boolean"!==a||(r=null);var c=!1;if(null===r)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(r.$$typeof){case e:case t:c=!0}}if(c)return s=s(c=r),r=""===u?"."+j(c,0):u,b(s)?(o="",null!=r&&(o=r.replace(g,"$&/")+"/"),O(s,n,o,"",function(e){return e})):null!=s&&(k(s)&&(s=R(s,o+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(g,"$&/")+"/")+r)),n.push(s)),1;if(c=0,u=""===u?".":u+":",b(r))for(var i=0;i<r.length;i++){var f=u+j(a=r[i],i);c+=O(a,n,o,f,s)}else if("function"==typeof(f=p(r)))for(r=f.call(r),i=0;!(a=r.next()).done;)c+=O(a=a.value,n,o,f=u+j(a,i++),s);else if("object"===a)throw n=String(r),Error("Objects are not valid as a React child (found: "+("[object Object]"===n?"object with keys {"+Object.keys(r).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return c}function P(e,t,r){if(null==e)return e;var n=[],o=0;return O(e,n,"","",function(e){return t.call(r,e,o++)}),n}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T={current:null},V={transition:null},A={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:V,ReactCurrentOwner:E};exports.Children={map:P,forEach:function(e,t,r){P(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},exports.Component=h,exports.Fragment=r,exports.Profiler=o,exports.PureComponent=m,exports.StrictMode=n,exports.Suspense=c,exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,exports.cloneElement=function(t,r,n){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var o=d({},t.props),u=t.key,s=t.ref,a=t._owner;if(null!=r){if(void 0!==r.ref&&(s=r.ref,a=E.current),void 0!==r.key&&(u=""+r.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(i in r)S.call(r,i)&&!$.hasOwnProperty(i)&&(o[i]=void 0===r[i]&&void 0!==c?c[i]:r[i])}var i=arguments.length-2;if(1===i)o.children=n;else if(1<i){c=Array(i);for(var f=0;f<i;f++)c[f]=arguments[f+2];o.children=c}return{$$typeof:e,type:t.type,key:u,ref:s,props:o,_owner:a}},exports.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},exports.createElement=w,exports.createFactory=function(e){var t=w.bind(null,e);return t.type=e,t},exports.createRef=function(){return{current:null}},exports.forwardRef=function(e){return{$$typeof:a,render:e}},exports.isValidElement=k,exports.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:I}},exports.memo=function(e,t){return{$$typeof:i,type:e,compare:void 0===t?null:t}},exports.startTransition=function(e){var t=V.transition;V.transition={};try{e()}finally{V.transition=t}},exports.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},exports.useCallback=function(e,t){return T.current.useCallback(e,t)},exports.useContext=function(e){return T.current.useContext(e)},exports.useDebugValue=function(){},exports.useDeferredValue=function(e){return T.current.useDeferredValue(e)},exports.useEffect=function(e,t){return T.current.useEffect(e,t)},exports.useId=function(){return T.current.useId()},exports.useImperativeHandle=function(e,t,r){return T.current.useImperativeHandle(e,t,r)},exports.useInsertionEffect=function(e,t){return T.current.useInsertionEffect(e,t)},exports.useLayoutEffect=function(e,t){return T.current.useLayoutEffect(e,t)},exports.useMemo=function(e,t){return T.current.useMemo(e,t)},exports.useReducer=function(e,t,r){return T.current.useReducer(e,t,r)},exports.useRef=function(e){return T.current.useRef(e)},exports.useState=function(e){return T.current.useState(e)},exports.useSyncExternalStore=function(e,t,r){return T.current.useSyncExternalStore(e,t,r)},exports.useTransition=function(){return T.current.useTransition()},exports.version="18.2.0";
},{}],"n8MK":[function(require,module,exports) {
"use strict";module.exports=require("./cjs/react.production.min.js");
},{"./cjs/react.production.min.js":"awqi"}],"IvPb":[function(require,module,exports) {
"use strict";function e(e,n){var t=e.length;e.push(n);e:for(;0<t;){var a=t-1>>>1,o=e[a];if(!(0<r(o,n)))break e;e[a]=n,e[t]=o,t=a}}function n(e){return 0===e.length?null:e[0]}function t(e){if(0===e.length)return null;var n=e[0],t=e.pop();if(t!==n){e[0]=t;e:for(var a=0,o=e.length,l=o>>>1;a<l;){var i=2*(a+1)-1,u=e[i],s=i+1,c=e[s];if(0>r(u,t))s<o&&0>r(c,u)?(e[a]=c,e[s]=t,a=s):(e[a]=u,e[i]=t,a=i);else{if(!(s<o&&0>r(c,t)))break e;e[a]=c,e[s]=t,a=s}}}return n}function r(e,n){var t=e.sortIndex-n.sortIndex;return 0!==t?t:e.id-n.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;exports.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();exports.unstable_now=function(){return o.now()-l}}var i=[],u=[],s=1,c=null,f=3,p=!1,b=!1,d=!1,v="function"==typeof setTimeout?setTimeout:null,x="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function m(r){for(var a=n(u);null!==a;){if(null===a.callback)t(u);else{if(!(a.startTime<=r))break;t(u),a.sortIndex=a.expirationTime,e(i,a)}a=n(u)}}function g(e){if(d=!1,m(e),!b)if(null!==n(i))b=!0,j(_);else{var t=n(u);null!==t&&E(g,t.startTime-e)}}function _(e,r){b=!1,d&&(d=!1,x(I),I=-1),p=!0;var a=f;try{for(m(r),c=n(i);null!==c&&(!(c.expirationTime>r)||e&&!C());){var o=c.callback;if("function"==typeof o){c.callback=null,f=c.priorityLevel;var l=o(c.expirationTime<=r);r=exports.unstable_now(),"function"==typeof l?c.callback=l:c===n(i)&&t(i),m(r)}else t(i);c=n(i)}if(null!==c)var s=!0;else{var v=n(u);null!==v&&E(g,v.startTime-r),s=!1}return s}finally{c=null,f=a,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var h,k=!1,w=null,I=-1,T=5,P=-1;function C(){return!(exports.unstable_now()-P<T)}function L(){if(null!==w){var e=exports.unstable_now();P=e;var n=!0;try{n=w(!0,e)}finally{n?h():(k=!1,w=null)}}else k=!1}if("function"==typeof y)h=function(){y(L)};else if("undefined"!=typeof MessageChannel){var M=new MessageChannel,F=M.port2;M.port1.onmessage=L,h=function(){F.postMessage(null)}}else h=function(){v(L,0)};function j(e){w=e,k||(k=!0,h())}function E(e,n){I=v(function(){e(exports.unstable_now())},n)}exports.unstable_IdlePriority=5,exports.unstable_ImmediatePriority=1,exports.unstable_LowPriority=4,exports.unstable_NormalPriority=3,exports.unstable_Profiling=null,exports.unstable_UserBlockingPriority=2,exports.unstable_cancelCallback=function(e){e.callback=null},exports.unstable_continueExecution=function(){b||p||(b=!0,j(_))},exports.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},exports.unstable_getCurrentPriorityLevel=function(){return f},exports.unstable_getFirstCallbackNode=function(){return n(i)},exports.unstable_next=function(e){switch(f){case 1:case 2:case 3:var n=3;break;default:n=f}var t=f;f=n;try{return e()}finally{f=t}},exports.unstable_pauseExecution=function(){},exports.unstable_requestPaint=function(){},exports.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var t=f;f=e;try{return n()}finally{f=t}},exports.unstable_scheduleCallback=function(t,r,a){var o=exports.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?o+a:o:a=o,t){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return t={id:s++,callback:r,priorityLevel:t,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>o?(t.sortIndex=a,e(u,t),null===n(i)&&t===n(u)&&(d?(x(I),I=-1):d=!0,E(g,a-o))):(t.sortIndex=l,e(i,t),b||p||(b=!0,j(_))),t},exports.unstable_shouldYield=C,exports.unstable_wrapCallback=function(e){var n=f;return function(){var t=f;f=n;try{return e.apply(this,arguments)}finally{f=t}}};
},{}],"MDSO":[function(require,module,exports) {
"use strict";module.exports=require("./cjs/scheduler.production.min.js");
},{"./cjs/scheduler.production.min.js":"IvPb"}],"i17t":[function(require,module,exports) {
"use strict";var e=require("react"),n=require("scheduler");function t(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,l={};function a(e,n){u(e,n),u(e+"Capture",n)}function u(e,n){for(l[e]=n,e=0;e<n.length;e++)r.add(n[e])}var o=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),i=Object.prototype.hasOwnProperty,s=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},f={};function d(e){return!!i.call(f,e)||!i.call(c,e)&&(s.test(e)?f[e]=!0:(c[e]=!0,!1))}function p(e,n,t,r){if(null!==t&&0===t.type)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==t?!t.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}function m(e,n,t,r){if(null==n||p(e,n,t,r))return!0;if(r)return!1;if(null!==t)switch(t.type){case 3:return!n;case 4:return!1===n;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function h(e,n,t,r,l,a,u){this.acceptsBooleans=2===n||3===n||4===n,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=t,this.propertyName=e,this.type=n,this.sanitizeURL=a,this.removeEmptyString=u}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new h(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];g[n]=new h(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new h(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new h(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new h(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new h(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,n,t,r){var l=g.hasOwnProperty(n)?g[n]:null;(null!==l?0!==l.type:r||!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&(m(n,t,l,r)&&(t=null),r||null===l?d(n)&&(null===t?e.removeAttribute(n):e.setAttribute(n,""+t)):l.mustUseProperty?e[l.propertyName]=null===t?3!==l.type&&"":t:(n=l.attributeName,r=l.attributeNamespace,null===t?e.removeAttribute(n):(t=3===(l=l.type)||4===l&&!0===t?"":""+t,r?e.setAttributeNS(r,n,t):e.setAttribute(n,t))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(v,y);g[n]=new h(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(v,y);g[n]=new h(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(v,y);g[n]=new h(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)});var k=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),N=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var F=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function D(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=R&&e[R]||e["@@iterator"])?e:null}var O,I=Object.assign;function U(e){if(void 0===O)try{throw Error()}catch(t){var n=t.stack.trim().match(/\n( *(at )?)/);O=n&&n[1]||""}return"\n"+O+e}var V=!1;function A(e,n){if(!e||V)return"";V=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(s){var r=s}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"==typeof s.stack){for(var l=s.stack.split("\n"),a=r.stack.split("\n"),u=l.length-1,o=a.length-1;1<=u&&0<=o&&l[u]!==a[o];)o--;for(;1<=u&&0<=o;u--,o--)if(l[u]!==a[o]){if(1!==u||1!==o)do{if(u--,0>--o||l[u]!==a[o]){var i="\n"+l[u].replace(" at new "," at ");return e.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",e.displayName)),i}}while(1<=u&&0<=o);break}}}finally{V=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=A(e.type,!1);case 11:return e=A(e.type.render,!1);case 1:return e=A(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case x:return"Fragment";case S:return"Portal";case C:return"Profiler";case E:return"StrictMode";case _:return"Suspense";case L:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case z:return(e._context.displayName||"Context")+".Provider";case P:var n=e.render;return(e=e.displayName)||(e=""!==(e=n.displayName||n.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(n=e.displayName||null)?n:H(e.type)||"Memo";case M:n=e._payload,e=e._init;try{return H(e(n))}catch(t){}}return null}function Q(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=n.render).displayName||e.name||"",n.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(n);case 8:return n===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof n)return n.displayName||n.name||null;if("string"==typeof n)return n}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function j(e){var n=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===n||"radio"===n)}function $(e){var n=j(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),r=""+e[n];if(!e.hasOwnProperty(n)&&void 0!==t&&"function"==typeof t.get&&"function"==typeof t.set){var l=t.get,a=t.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return l.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,n,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function q(e){e._valueTracker||(e._valueTracker=$(e))}function K(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var t=n.getValue(),r="";return e&&(r=j(e)?e.checked?"true":"false":e.value),(e=r)!==t&&(n.setValue(e),!0)}function Y(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(n){return e.body}}function X(e,n){var t=n.checked;return I({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=t?t:e._wrapperState.initialChecked})}function G(e,n){var t=null==n.defaultValue?"":n.defaultValue,r=null!=n.checked?n.checked:n.defaultChecked;t=W(null!=n.value?n.value:t),e._wrapperState={initialChecked:r,initialValue:t,controlled:"checkbox"===n.type||"radio"===n.type?null!=n.checked:null!=n.value}}function Z(e,n){null!=(n=n.checked)&&b(e,"checked",n,!1)}function J(e,n){Z(e,n);var t=W(n.value),r=n.type;if(null!=t)"number"===r?(0===t&&""===e.value||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");n.hasOwnProperty("value")?ne(e,n.type,t):n.hasOwnProperty("defaultValue")&&ne(e,n.type,W(n.defaultValue)),null==n.checked&&null!=n.defaultChecked&&(e.defaultChecked=!!n.defaultChecked)}function ee(e,n,t){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var r=n.type;if(!("submit"!==r&&"reset"!==r||void 0!==n.value&&null!==n.value))return;n=""+e._wrapperState.initialValue,t||n===e.value||(e.value=n),e.defaultValue=n}""!==(t=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==t&&(e.name=t)}function ne(e,n,t){"number"===n&&Y(e.ownerDocument)===e||(null==t?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var te=Array.isArray;function re(e,n,t,r){if(e=e.options,n){n={};for(var l=0;l<t.length;l++)n["$"+t[l]]=!0;for(t=0;t<e.length;t++)l=n.hasOwnProperty("$"+e[t].value),e[t].selected!==l&&(e[t].selected=l),l&&r&&(e[t].defaultSelected=!0)}else{for(t=""+W(t),n=null,l=0;l<e.length;l++){if(e[l].value===t)return e[l].selected=!0,void(r&&(e[l].defaultSelected=!0));null!==n||e[l].disabled||(n=e[l])}null!==n&&(n.selected=!0)}}function le(e,n){if(null!=n.dangerouslySetInnerHTML)throw Error(t(91));return I({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,n){var r=n.value;if(null==r){if(r=n.children,n=n.defaultValue,null!=r){if(null!=n)throw Error(t(92));if(te(r)){if(1<r.length)throw Error(t(93));r=r[0]}n=r}null==n&&(n=""),r=n}e._wrapperState={initialValue:W(r)}}function ue(e,n){var t=W(n.value),r=W(n.defaultValue);null!=t&&((t=""+t)!==e.value&&(e.value=t),null==n.defaultValue&&e.defaultValue!==t&&(e.defaultValue=t)),null!=r&&(e.defaultValue=""+r)}function oe(e){var n=e.textContent;n===e._wrapperState.initialValue&&""!==n&&null!==n&&(e.value=n)}function ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,n){return null==e||"http://www.w3.org/1999/xhtml"===e?ie(n):"http://www.w3.org/2000/svg"===e&&"foreignObject"===n?"http://www.w3.org/1999/xhtml":e}var ce,fe=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(n,t,r,l){MSApp.execUnsafeLocalFunction(function(){return e(n,t)})}:e}(function(e,n){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=n;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function de(e,n){if(n){var t=e.firstChild;if(t&&t===e.lastChild&&3===t.nodeType)return void(t.nodeValue=n)}e.textContent=n}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function he(e,n,t){return null==n||"boolean"==typeof n||""===n?"":t||"number"!=typeof n||0===n||pe.hasOwnProperty(e)&&pe[e]?(""+n).trim():n+"px"}function ge(e,n){for(var t in e=e.style,n)if(n.hasOwnProperty(t)){var r=0===t.indexOf("--"),l=he(t,n[t],r);"float"===t&&(t="cssFloat"),r?e.setProperty(t,l):e[t]=l}}Object.keys(pe).forEach(function(e){me.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),pe[n]=pe[e]})});var ve=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,n){if(n){if(ve[e]&&(null!=n.children||null!=n.dangerouslySetInnerHTML))throw Error(t(137,e));if(null!=n.dangerouslySetInnerHTML){if(null!=n.children)throw Error(t(60));if("object"!=typeof n.dangerouslySetInnerHTML||!("__html"in n.dangerouslySetInnerHTML))throw Error(t(61))}if(null!=n.style&&"object"!=typeof n.style)throw Error(t(62))}}function be(e,n){if(-1===e.indexOf("-"))return"string"==typeof n.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,xe=null,Ee=null;function Ce(e){if(e=Ul(e)){if("function"!=typeof Se)throw Error(t(280));var n=e.stateNode;n&&(n=Al(n),Se(e.stateNode,e.type,n))}}function ze(e){xe?Ee?Ee.push(e):Ee=[e]:xe=e}function Ne(){if(xe){var e=xe,n=Ee;if(Ee=xe=null,Ce(e),n)for(e=0;e<n.length;e++)Ce(n[e])}}function Pe(e,n){return e(n)}function _e(){}var Le=!1;function Te(e,n,t){if(Le)return e(n,t);Le=!0;try{return Pe(e,n,t)}finally{Le=!1,(null!==xe||null!==Ee)&&(_e(),Ne())}}function Me(e,n){var r=e.stateNode;if(null===r)return null;var l=Al(r);if(null===l)return null;r=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(l=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!l;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(t(231,n,typeof r));return r}var Fe=!1;if(o)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Fe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(Rc){Fe=!1}function De(e,n,t,r,l,a,u,o,i){var s=Array.prototype.slice.call(arguments,3);try{n.apply(t,s)}catch(c){this.onError(c)}}var Oe=!1,Ie=null,Ue=!1,Ve=null,Ae={onError:function(e){Oe=!0,Ie=e}};function Be(e,n,t,r,l,a,u,o,i){Oe=!1,Ie=null,De.apply(Ae,arguments)}function He(e,n,r,l,a,u,o,i,s){if(Be.apply(this,arguments),Oe){if(!Oe)throw Error(t(198));var c=Ie;Oe=!1,Ie=null,Ue||(Ue=!0,Ve=c)}}function Qe(e){var n=e,t=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do{0!=(4098&(n=e).flags)&&(t=n.return),e=n.return}while(e)}return 3===n.tag?t:null}function We(e){if(13===e.tag){var n=e.memoizedState;if(null===n&&(null!==(e=e.alternate)&&(n=e.memoizedState)),null!==n)return n.dehydrated}return null}function je(e){if(Qe(e)!==e)throw Error(t(188))}function $e(e){var n=e.alternate;if(!n){if(null===(n=Qe(e)))throw Error(t(188));return n!==e?null:e}for(var r=e,l=n;;){var a=r.return;if(null===a)break;var u=a.alternate;if(null===u){if(null!==(l=a.return)){r=l;continue}break}if(a.child===u.child){for(u=a.child;u;){if(u===r)return je(a),e;if(u===l)return je(a),n;u=u.sibling}throw Error(t(188))}if(r.return!==l.return)r=a,l=u;else{for(var o=!1,i=a.child;i;){if(i===r){o=!0,r=a,l=u;break}if(i===l){o=!0,l=a,r=u;break}i=i.sibling}if(!o){for(i=u.child;i;){if(i===r){o=!0,r=u,l=a;break}if(i===l){o=!0,l=u,r=a;break}i=i.sibling}if(!o)throw Error(t(189))}}if(r.alternate!==l)throw Error(t(190))}if(3!==r.tag)throw Error(t(188));return r.stateNode.current===r?e:n}function qe(e){return null!==(e=$e(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var n=Ke(e);if(null!==n)return n;e=e.sibling}return null}var Ye=n.unstable_scheduleCallback,Xe=n.unstable_cancelCallback,Ge=n.unstable_shouldYield,Ze=n.unstable_requestPaint,Je=n.unstable_now,en=n.unstable_getCurrentPriorityLevel,nn=n.unstable_ImmediatePriority,tn=n.unstable_UserBlockingPriority,rn=n.unstable_NormalPriority,ln=n.unstable_LowPriority,an=n.unstable_IdlePriority,un=null,on=null;function sn(e){if(on&&"function"==typeof on.onCommitFiberRoot)try{on.onCommitFiberRoot(un,e,void 0,128==(128&e.current.flags))}catch(n){}}var cn=Math.clz32?Math.clz32:pn,fn=Math.log,dn=Math.LN2;function pn(e){return 0===(e>>>=0)?32:31-(fn(e)/dn|0)|0}var mn=64,hn=4194304;function gn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vn(e,n){var t=e.pendingLanes;if(0===t)return 0;var r=0,l=e.suspendedLanes,a=e.pingedLanes,u=268435455&t;if(0!==u){var o=u&~l;0!==o?r=gn(o):0!==(a&=u)&&(r=gn(a))}else 0!==(u=t&~l)?r=gn(u):0!==a&&(r=gn(a));if(0===r)return 0;if(0!==n&&n!==r&&0==(n&l)&&((l=r&-r)>=(a=n&-n)||16===l&&0!=(4194240&a)))return n;if(0!=(4&r)&&(r|=16&t),0!==(n=e.entangledLanes))for(e=e.entanglements,n&=r;0<n;)l=1<<(t=31-cn(n)),r|=e[t],n&=~l;return r}function yn(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:default:return-1}}function bn(e,n){for(var t=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,a=e.pendingLanes;0<a;){var u=31-cn(a),o=1<<u,i=l[u];-1===i?0!=(o&t)&&0==(o&r)||(l[u]=yn(o,n)):i<=n&&(e.expiredLanes|=o),a&=~o}}function kn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function wn(){var e=mn;return 0==(4194240&(mn<<=1))&&(mn=64),e}function Sn(e){for(var n=[],t=0;31>t;t++)n.push(e);return n}function xn(e,n,t){e.pendingLanes|=n,536870912!==n&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[n=31-cn(n)]=t}function En(e,n){var t=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<t;){var l=31-cn(t),a=1<<l;n[l]=0,r[l]=-1,e[l]=-1,t&=~a}}function Cn(e,n){var t=e.entangledLanes|=n;for(e=e.entanglements;t;){var r=31-cn(t),l=1<<r;l&n|e[r]&n&&(e[r]|=n),t&=~l}}var zn=0;function Nn(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var Pn,_n,Ln,Tn,Mn,Fn=!1,Rn=[],Dn=null,On=null,In=null,Un=new Map,Vn=new Map,An=[],Bn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hn(e,n){switch(e){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":In=null;break;case"pointerover":case"pointerout":Un.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vn.delete(n.pointerId)}}function Qn(e,n,t,r,l,a){return null===e||e.nativeEvent!==a?(e={blockedOn:n,domEventName:t,eventSystemFlags:r,nativeEvent:a,targetContainers:[l]},null!==n&&(null!==(n=Ul(n))&&_n(n)),e):(e.eventSystemFlags|=r,n=e.targetContainers,null!==l&&-1===n.indexOf(l)&&n.push(l),e)}function Wn(e,n,t,r,l){switch(n){case"focusin":return Dn=Qn(Dn,e,n,t,r,l),!0;case"dragenter":return On=Qn(On,e,n,t,r,l),!0;case"mouseover":return In=Qn(In,e,n,t,r,l),!0;case"pointerover":var a=l.pointerId;return Un.set(a,Qn(Un.get(a)||null,e,n,t,r,l)),!0;case"gotpointercapture":return a=l.pointerId,Vn.set(a,Qn(Vn.get(a)||null,e,n,t,r,l)),!0}return!1}function jn(e){var n=Il(e.target);if(null!==n){var t=Qe(n);if(null!==t)if(13===(n=t.tag)){if(null!==(n=We(t)))return e.blockedOn=n,void Mn(e.priority,function(){Ln(t)})}else if(3===n&&t.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===t.tag?t.stateNode.containerInfo:null)}e.blockedOn=null}function $n(e){if(null!==e.blockedOn)return!1;for(var n=e.targetContainers;0<n.length;){var t=rt(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(null!==t)return null!==(n=Ul(t))&&_n(n),e.blockedOn=t,!1;var r=new(t=e.nativeEvent).constructor(t.type,t);ke=r,t.target.dispatchEvent(r),ke=null,n.shift()}return!0}function qn(e,n,t){$n(e)&&t.delete(n)}function Kn(){Fn=!1,null!==Dn&&$n(Dn)&&(Dn=null),null!==On&&$n(On)&&(On=null),null!==In&&$n(In)&&(In=null),Un.forEach(qn),Vn.forEach(qn)}function Yn(e,t){e.blockedOn===t&&(e.blockedOn=null,Fn||(Fn=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Kn)))}function Xn(e){function n(n){return Yn(n,e)}if(0<Rn.length){Yn(Rn[0],e);for(var t=1;t<Rn.length;t++){var r=Rn[t];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Dn&&Yn(Dn,e),null!==On&&Yn(On,e),null!==In&&Yn(In,e),Un.forEach(n),Vn.forEach(n),t=0;t<An.length;t++)(r=An[t]).blockedOn===e&&(r.blockedOn=null);for(;0<An.length&&null===(t=An[0]).blockedOn;)jn(t),null===t.blockedOn&&An.shift()}var Gn=k.ReactCurrentBatchConfig,Zn=!0;function Jn(e,n,t,r){var l=zn,a=Gn.transition;Gn.transition=null;try{zn=1,nt(e,n,t,r)}finally{zn=l,Gn.transition=a}}function et(e,n,t,r){var l=zn,a=Gn.transition;Gn.transition=null;try{zn=4,nt(e,n,t,r)}finally{zn=l,Gn.transition=a}}function nt(e,n,t,r){if(Zn){var l=rt(e,n,t,r);if(null===l)sl(e,n,r,tt,t),Hn(e,r);else if(Wn(l,e,n,t,r))r.stopPropagation();else if(Hn(e,r),4&n&&-1<Bn.indexOf(e)){for(;null!==l;){var a=Ul(l);if(null!==a&&Pn(a),null===(a=rt(e,n,t,r))&&sl(e,n,r,tt,t),a===l)break;l=a}null!==l&&r.stopPropagation()}else sl(e,n,r,null,t)}}var tt=null;function rt(e,n,t,r){if(tt=null,null!==(e=Il(e=we(r))))if(null===(n=Qe(e)))e=null;else if(13===(t=n.tag)){if(null!==(e=We(n)))return e;e=null}else if(3===t){if(n.stateNode.current.memoizedState.isDehydrated)return 3===n.tag?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return tt=e,null}function lt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(en()){case nn:return 1;case tn:return 4;case rn:case ln:return 16;case an:return 536870912;default:return 16}default:return 16}}var at=null,ut=null,ot=null;function it(){if(ot)return ot;var e,n,t=ut,r=t.length,l="value"in at?at.value:at.textContent,a=l.length;for(e=0;e<r&&t[e]===l[e];e++);var u=r-e;for(n=1;n<=u&&t[r-n]===l[a-n];n++);return ot=l.slice(e,1<n?1-n:void 0)}function st(e){var n=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===n&&(e=13):e=n,10===e&&(e=13),32<=e||13===e?e:0}function ct(){return!0}function ft(){return!1}function dt(e){function n(n,t,r,l,a){for(var u in this._reactName=n,this._targetInst=r,this.type=t,this.nativeEvent=l,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(l):l[u]);return this.isDefaultPrevented=(null!=l.defaultPrevented?l.defaultPrevented:!1===l.returnValue)?ct:ft,this.isPropagationStopped=ft,this}return I(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ct)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ct)},persist:function(){},isPersistent:ct}),n}var pt,mt,ht,gt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vt=dt(gt),yt=I({},gt,{view:0,detail:0}),bt=dt(yt),kt=I({},yt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ot,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ht&&(ht&&"mousemove"===e.type?(pt=e.screenX-ht.screenX,mt=e.screenY-ht.screenY):mt=pt=0,ht=e),pt)},movementY:function(e){return"movementY"in e?e.movementY:mt}}),wt=dt(kt),St=I({},kt,{dataTransfer:0}),xt=dt(St),Et=I({},yt,{relatedTarget:0}),Ct=dt(Et),zt=I({},gt,{animationName:0,elapsedTime:0,pseudoElement:0}),Nt=dt(zt),Pt=I({},gt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_t=dt(Pt),Lt=I({},gt,{data:0}),Tt=dt(Lt),Mt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ft={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dt(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):!!(e=Rt[e])&&!!n[e]}function Ot(){return Dt}var It=I({},yt,{key:function(e){if(e.key){var n=Mt[e.key]||e.key;if("Unidentified"!==n)return n}return"keypress"===e.type?13===(e=st(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Ft[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ot,charCode:function(e){return"keypress"===e.type?st(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?st(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ut=dt(It),Vt=I({},kt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),At=dt(Vt),Bt=I({},yt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ot}),Ht=dt(Bt),Qt=I({},gt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wt=dt(Qt),jt=I({},kt,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$t=dt(jt),qt=[9,13,27,32],Kt=o&&"CompositionEvent"in window,Yt=null;o&&"documentMode"in document&&(Yt=document.documentMode);var Xt=o&&"TextEvent"in window&&!Yt,Gt=o&&(!Kt||Yt&&8<Yt&&11>=Yt),Zt=String.fromCharCode(32),Jt=!1;function er(e,n){switch(e){case"keyup":return-1!==qt.indexOf(n.keyCode);case"keydown":return 229!==n.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var tr=!1;function rr(e,n){switch(e){case"compositionend":return nr(n);case"keypress":return 32!==n.which?null:(Jt=!0,Zt);case"textInput":return(e=n.data)===Zt&&Jt?null:e;default:return null}}function lr(e,n){if(tr)return"compositionend"===e||!Kt&&er(e,n)?(e=it(),ot=ut=at=null,tr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Gt&&"ko"!==n.locale?null:n.data;default:return null}}var ar={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ur(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===n?!!ar[e.type]:"textarea"===n}function or(e,n,t,r){ze(r),0<(n=fl(n,"onChange")).length&&(t=new vt("onChange","change",null,t,r),e.push({event:t,listeners:n}))}var ir=null,sr=null;function cr(e){rl(e,0)}function fr(e){if(K(Vl(e)))return e}function dr(e,n){if("change"===e)return n}var pr=!1;if(o){var mr;if(o){var hr="oninput"in document;if(!hr){var gr=document.createElement("div");gr.setAttribute("oninput","return;"),hr="function"==typeof gr.oninput}mr=hr}else mr=!1;pr=mr&&(!document.documentMode||9<document.documentMode)}function vr(){ir&&(ir.detachEvent("onpropertychange",yr),sr=ir=null)}function yr(e){if("value"===e.propertyName&&fr(sr)){var n=[];or(n,sr,e,we(e)),Te(cr,n)}}function br(e,n,t){"focusin"===e?(vr(),sr=t,(ir=n).attachEvent("onpropertychange",yr)):"focusout"===e&&vr()}function kr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return fr(sr)}function wr(e,n){if("click"===e)return fr(n)}function Sr(e,n){if("input"===e||"change"===e)return fr(n)}function xr(e,n){return e===n&&(0!==e||1/e==1/n)||e!=e&&n!=n}var Er="function"==typeof Object.is?Object.is:xr;function Cr(e,n){if(Er(e,n))return!0;if("object"!=typeof e||null===e||"object"!=typeof n||null===n)return!1;var t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var l=t[r];if(!i.call(n,l)||!Er(e[l],n[l]))return!1}return!0}function zr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Nr(e,n){var t,r=zr(e);for(e=0;r;){if(3===r.nodeType){if(t=e+r.textContent.length,e<=n&&t>=n)return{node:r,offset:n-e};e=t}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zr(r)}}function Pr(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?Pr(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}function _r(){for(var e=window,n=Y();n instanceof e.HTMLIFrameElement;){try{var t="string"==typeof n.contentWindow.location.href}catch(r){t=!1}if(!t)break;n=Y((e=n.contentWindow).document)}return n}function Lr(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&("input"===n&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===n||"true"===e.contentEditable)}function Tr(e){var n=_r(),t=e.focusedElem,r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&Pr(t.ownerDocument.documentElement,t)){if(null!==r&&Lr(t))if(n=r.start,void 0===(e=r.end)&&(e=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(e,t.value.length);else if((e=(n=t.ownerDocument||document)&&n.defaultView||window).getSelection){e=e.getSelection();var l=t.textContent.length,a=Math.min(r.start,l);r=void 0===r.end?a:Math.min(r.end,l),!e.extend&&a>r&&(l=r,r=a,a=l),l=Nr(t,a);var u=Nr(t,r);l&&u&&(1!==e.rangeCount||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&((n=n.createRange()).setStart(l.node,l.offset),e.removeAllRanges(),a>r?(e.addRange(n),e.extend(u.node,u.offset)):(n.setEnd(u.node,u.offset),e.addRange(n)))}for(n=[],e=t;e=e.parentNode;)1===e.nodeType&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof t.focus&&t.focus(),t=0;t<n.length;t++)(e=n[t]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Mr=o&&"documentMode"in document&&11>=document.documentMode,Fr=null,Rr=null,Dr=null,Or=!1;function Ir(e,n,t){var r=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;Or||null==Fr||Fr!==Y(r)||("selectionStart"in(r=Fr)&&Lr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Dr&&Cr(Dr,r)||(Dr=r,0<(r=fl(Rr,"onSelect")).length&&(n=new vt("onSelect","select",null,n,t),e.push({event:n,listeners:r}),n.target=Fr)))}function Ur(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit"+e]="webkit"+n,t["Moz"+e]="moz"+n,t}var Vr={animationend:Ur("Animation","AnimationEnd"),animationiteration:Ur("Animation","AnimationIteration"),animationstart:Ur("Animation","AnimationStart"),transitionend:Ur("Transition","TransitionEnd")},Ar={},Br={};function Hr(e){if(Ar[e])return Ar[e];if(!Vr[e])return e;var n,t=Vr[e];for(n in t)if(t.hasOwnProperty(n)&&n in Br)return Ar[e]=t[n];return e}o&&(Br=document.createElement("div").style,"AnimationEvent"in window||(delete Vr.animationend.animation,delete Vr.animationiteration.animation,delete Vr.animationstart.animation),"TransitionEvent"in window||delete Vr.transitionend.transition);var Qr=Hr("animationend"),Wr=Hr("animationiteration"),jr=Hr("animationstart"),$r=Hr("transitionend"),qr=new Map,Kr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yr(e,n){qr.set(e,n),a(n,[e])}for(var Xr=0;Xr<Kr.length;Xr++){var Gr=Kr[Xr],Zr=Gr.toLowerCase(),Jr=Gr[0].toUpperCase()+Gr.slice(1);Yr(Zr,"on"+Jr)}Yr(Qr,"onAnimationEnd"),Yr(Wr,"onAnimationIteration"),Yr(jr,"onAnimationStart"),Yr("dblclick","onDoubleClick"),Yr("focusin","onFocus"),Yr("focusout","onBlur"),Yr($r,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var el="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nl=new Set("cancel close invalid load scroll toggle".split(" ").concat(el));function tl(e,n,t){var r=e.type||"unknown-event";e.currentTarget=t,He(r,n,void 0,e),e.currentTarget=null}function rl(e,n){n=0!=(4&n);for(var t=0;t<e.length;t++){var r=e[t],l=r.event;r=r.listeners;e:{var a=void 0;if(n)for(var u=r.length-1;0<=u;u--){var o=r[u],i=o.instance,s=o.currentTarget;if(o=o.listener,i!==a&&l.isPropagationStopped())break e;tl(l,o,s),a=i}else for(u=0;u<r.length;u++){if(i=(o=r[u]).instance,s=o.currentTarget,o=o.listener,i!==a&&l.isPropagationStopped())break e;tl(l,o,s),a=i}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function ll(e,n){var t=n[Rl];void 0===t&&(t=n[Rl]=new Set);var r=e+"__bubble";t.has(r)||(il(n,e,2,!1),t.add(r))}function al(e,n,t){var r=0;n&&(r|=4),il(t,e,r,n)}var ul="_reactListening"+Math.random().toString(36).slice(2);function ol(e){if(!e[ul]){e[ul]=!0,r.forEach(function(n){"selectionchange"!==n&&(nl.has(n)||al(n,!1,e),al(n,!0,e))});var n=9===e.nodeType?e:e.ownerDocument;null===n||n[ul]||(n[ul]=!0,al("selectionchange",!1,n))}}function il(e,n,t,r){switch(lt(n)){case 1:var l=Jn;break;case 4:l=et;break;default:l=nt}t=l.bind(null,n,t,e),l=void 0,!Fe||"touchstart"!==n&&"touchmove"!==n&&"wheel"!==n||(l=!0),r?void 0!==l?e.addEventListener(n,t,{capture:!0,passive:l}):e.addEventListener(n,t,!0):void 0!==l?e.addEventListener(n,t,{passive:l}):e.addEventListener(n,t,!1)}function sl(e,n,t,r,l){var a=r;if(0==(1&n)&&0==(2&n)&&null!==r)e:for(;;){if(null===r)return;var u=r.tag;if(3===u||4===u){var o=r.stateNode.containerInfo;if(o===l||8===o.nodeType&&o.parentNode===l)break;if(4===u)for(u=r.return;null!==u;){var i=u.tag;if((3===i||4===i)&&((i=u.stateNode.containerInfo)===l||8===i.nodeType&&i.parentNode===l))return;u=u.return}for(;null!==o;){if(null===(u=Il(o)))return;if(5===(i=u.tag)||6===i){r=a=u;continue e}o=o.parentNode}}r=r.return}Te(function(){var r=a,l=we(t),u=[];e:{var o=qr.get(e);if(void 0!==o){var i=vt,s=e;switch(e){case"keypress":if(0===st(t))break e;case"keydown":case"keyup":i=Ut;break;case"focusin":s="focus",i=Ct;break;case"focusout":s="blur",i=Ct;break;case"beforeblur":case"afterblur":i=Ct;break;case"click":if(2===t.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":i=wt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":i=xt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":i=Ht;break;case Qr:case Wr:case jr:i=Nt;break;case $r:i=Wt;break;case"scroll":i=bt;break;case"wheel":i=$t;break;case"copy":case"cut":case"paste":i=_t;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":i=At}var c=0!=(4&n),f=!c&&"scroll"===e,d=c?null!==o?o+"Capture":null:o;c=[];for(var p,m=r;null!==m;){var h=(p=m).stateNode;if(5===p.tag&&null!==h&&(p=h,null!==d&&(null!=(h=Me(m,d))&&c.push(cl(m,h,p)))),f)break;m=m.return}0<c.length&&(o=new i(o,s,null,t,l),u.push({event:o,listeners:c}))}}if(0==(7&n)){if(i="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||t===ke||!(s=t.relatedTarget||t.fromElement)||!Il(s)&&!s[Fl])&&(i||o)&&(o=l.window===l?l:(o=l.ownerDocument)?o.defaultView||o.parentWindow:window,i?(i=r,null!==(s=(s=t.relatedTarget||t.toElement)?Il(s):null)&&(s!==(f=Qe(s))||5!==s.tag&&6!==s.tag)&&(s=null)):(i=null,s=r),i!==s)){if(c=wt,h="onMouseLeave",d="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(c=At,h="onPointerLeave",d="onPointerEnter",m="pointer"),f=null==i?o:Vl(i),p=null==s?o:Vl(s),(o=new c(h,m+"leave",i,t,l)).target=f,o.relatedTarget=p,h=null,Il(l)===r&&((c=new c(d,m+"enter",s,t,l)).target=p,c.relatedTarget=f,h=c),f=h,i&&s)e:{for(d=s,m=0,p=c=i;p;p=dl(p))m++;for(p=0,h=d;h;h=dl(h))p++;for(;0<m-p;)c=dl(c),m--;for(;0<p-m;)d=dl(d),p--;for(;m--;){if(c===d||null!==d&&c===d.alternate)break e;c=dl(c),d=dl(d)}c=null}else c=null;null!==i&&pl(u,o,i,c,!1),null!==s&&null!==f&&pl(u,f,s,c,!0)}if("select"===(i=(o=r?Vl(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===i&&"file"===o.type)var g=dr;else if(ur(o))if(pr)g=Sr;else{g=kr;var v=br}else(i=o.nodeName)&&"input"===i.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=wr);switch(g&&(g=g(e,r))?or(u,g,t,l):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ne(o,"number",o.value)),v=r?Vl(r):window,e){case"focusin":(ur(v)||"true"===v.contentEditable)&&(Fr=v,Rr=r,Dr=null);break;case"focusout":Dr=Rr=Fr=null;break;case"mousedown":Or=!0;break;case"contextmenu":case"mouseup":case"dragend":Or=!1,Ir(u,t,l);break;case"selectionchange":if(Mr)break;case"keydown":case"keyup":Ir(u,t,l)}var y;if(Kt)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else tr?er(e,t)&&(b="onCompositionEnd"):"keydown"===e&&229===t.keyCode&&(b="onCompositionStart");b&&(Gt&&"ko"!==t.locale&&(tr||"onCompositionStart"!==b?"onCompositionEnd"===b&&tr&&(y=it()):(ut="value"in(at=l)?at.value:at.textContent,tr=!0)),0<(v=fl(r,b)).length&&(b=new Tt(b,e,null,t,l),u.push({event:b,listeners:v}),y?b.data=y:null!==(y=nr(t))&&(b.data=y))),(y=Xt?rr(e,t):lr(e,t))&&(0<(r=fl(r,"onBeforeInput")).length&&(l=new Tt("onBeforeInput","beforeinput",null,t,l),u.push({event:l,listeners:r}),l.data=y))}rl(u,n)})}function cl(e,n,t){return{instance:e,listener:n,currentTarget:t}}function fl(e,n){for(var t=n+"Capture",r=[];null!==e;){var l=e,a=l.stateNode;5===l.tag&&null!==a&&(l=a,null!=(a=Me(e,t))&&r.unshift(cl(e,a,l)),null!=(a=Me(e,n))&&r.push(cl(e,a,l))),e=e.return}return r}function dl(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function pl(e,n,t,r,l){for(var a=n._reactName,u=[];null!==t&&t!==r;){var o=t,i=o.alternate,s=o.stateNode;if(null!==i&&i===r)break;5===o.tag&&null!==s&&(o=s,l?null!=(i=Me(t,a))&&u.unshift(cl(t,i,o)):l||null!=(i=Me(t,a))&&u.push(cl(t,i,o))),t=t.return}0!==u.length&&e.push({event:n,listeners:u})}var ml=/\r\n?/g,hl=/\u0000|\uFFFD/g;function gl(e){return("string"==typeof e?e:""+e).replace(ml,"\n").replace(hl,"")}function vl(e,n,r){if(n=gl(n),gl(e)!==n&&r)throw Error(t(425))}function yl(){}var bl=null,kl=null;function wl(e,n){return"textarea"===e||"noscript"===e||"string"==typeof n.children||"number"==typeof n.children||"object"==typeof n.dangerouslySetInnerHTML&&null!==n.dangerouslySetInnerHTML&&null!=n.dangerouslySetInnerHTML.__html}var Sl="function"==typeof setTimeout?setTimeout:void 0,xl="function"==typeof clearTimeout?clearTimeout:void 0,El="function"==typeof Promise?Promise:void 0,Cl="function"==typeof queueMicrotask?queueMicrotask:void 0!==El?function(e){return El.resolve(null).then(e).catch(zl)}:Sl;function zl(e){setTimeout(function(){throw e})}function Nl(e,n){var t=n,r=0;do{var l=t.nextSibling;if(e.removeChild(t),l&&8===l.nodeType)if("/$"===(t=l.data)){if(0===r)return e.removeChild(l),void Xn(n);r--}else"$"!==t&&"$?"!==t&&"$!"!==t||r++;t=l}while(t);Xn(n)}function Pl(e){for(;null!=e;e=e.nextSibling){var n=e.nodeType;if(1===n||3===n)break;if(8===n){if("$"===(n=e.data)||"$!"===n||"$?"===n)break;if("/$"===n)return null}}return e}function _l(e){e=e.previousSibling;for(var n=0;e;){if(8===e.nodeType){var t=e.data;if("$"===t||"$!"===t||"$?"===t){if(0===n)return e;n--}else"/$"===t&&n++}e=e.previousSibling}return null}var Ll=Math.random().toString(36).slice(2),Tl="__reactFiber$"+Ll,Ml="__reactProps$"+Ll,Fl="__reactContainer$"+Ll,Rl="__reactEvents$"+Ll,Dl="__reactListeners$"+Ll,Ol="__reactHandles$"+Ll;function Il(e){var n=e[Tl];if(n)return n;for(var t=e.parentNode;t;){if(n=t[Fl]||t[Tl]){if(t=n.alternate,null!==n.child||null!==t&&null!==t.child)for(e=_l(e);null!==e;){if(t=e[Tl])return t;e=_l(e)}return n}t=(e=t).parentNode}return null}function Ul(e){return!(e=e[Tl]||e[Fl])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Vl(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(t(33))}function Al(e){return e[Ml]||null}var Bl=[],Hl=-1;function Ql(e){return{current:e}}function Wl(e){0>Hl||(e.current=Bl[Hl],Bl[Hl]=null,Hl--)}function jl(e,n){Bl[++Hl]=e.current,e.current=n}var $l={},ql=Ql($l),Kl=Ql(!1),Yl=$l;function Xl(e,n){var t=e.type.contextTypes;if(!t)return $l;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===n)return r.__reactInternalMemoizedMaskedChildContext;var l,a={};for(l in t)a[l]=n[l];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),a}function Gl(e){return null!=(e=e.childContextTypes)}function Zl(){Wl(Kl),Wl(ql)}function Jl(e,n,r){if(ql.current!==$l)throw Error(t(168));jl(ql,n),jl(Kl,r)}function ea(e,n,r){var l=e.stateNode;if(n=n.childContextTypes,"function"!=typeof l.getChildContext)return r;for(var a in l=l.getChildContext())if(!(a in n))throw Error(t(108,Q(e)||"Unknown",a));return I({},r,l)}function na(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$l,Yl=ql.current,jl(ql,e),jl(Kl,Kl.current),!0}function ta(e,n,r){var l=e.stateNode;if(!l)throw Error(t(169));r?(e=ea(e,n,Yl),l.__reactInternalMemoizedMergedChildContext=e,Wl(Kl),Wl(ql),jl(ql,e)):Wl(Kl),jl(Kl,r)}var ra=null,la=!1,aa=!1;function ua(e){null===ra?ra=[e]:ra.push(e)}function oa(e){la=!0,ua(e)}function ia(){if(!aa&&null!==ra){aa=!0;var e=0,n=zn;try{var t=ra;for(zn=1;e<t.length;e++){var r=t[e];do{r=r(!0)}while(null!==r)}ra=null,la=!1}catch(l){throw null!==ra&&(ra=ra.slice(e+1)),Ye(nn,ia),l}finally{zn=n,aa=!1}}return null}var sa=[],ca=0,fa=null,da=0,pa=[],ma=0,ha=null,ga=1,va="";function ya(e,n){sa[ca++]=da,sa[ca++]=fa,fa=e,da=n}function ba(e,n,t){pa[ma++]=ga,pa[ma++]=va,pa[ma++]=ha,ha=e;var r=ga;e=va;var l=32-cn(r)-1;r&=~(1<<l),t+=1;var a=32-cn(n)+l;if(30<a){var u=l-l%5;a=(r&(1<<u)-1).toString(32),r>>=u,l-=u,ga=1<<32-cn(n)+l|t<<l|r,va=a+e}else ga=1<<a|t<<l|r,va=e}function ka(e){null!==e.return&&(ya(e,1),ba(e,1,0))}function wa(e){for(;e===fa;)fa=sa[--ca],sa[ca]=null,da=sa[--ca],sa[ca]=null;for(;e===ha;)ha=pa[--ma],pa[ma]=null,va=pa[--ma],pa[ma]=null,ga=pa[--ma],pa[ma]=null}var Sa=null,xa=null,Ea=!1,Ca=null;function za(e,n){var t=rc(5,null,null,0);t.elementType="DELETED",t.stateNode=n,t.return=e,null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)}function Na(e,n){switch(e.tag){case 5:var t=e.type;return null!==(n=1!==n.nodeType||t.toLowerCase()!==n.nodeName.toLowerCase()?null:n)&&(e.stateNode=n,Sa=e,xa=Pl(n.firstChild),!0);case 6:return null!==(n=""===e.pendingProps||3!==n.nodeType?null:n)&&(e.stateNode=n,Sa=e,xa=null,!0);case 13:return null!==(n=8!==n.nodeType?null:n)&&(t=null!==ha?{id:ga,overflow:va}:null,e.memoizedState={dehydrated:n,treeContext:t,retryLane:1073741824},(t=rc(18,null,null,0)).stateNode=n,t.return=e,e.child=t,Sa=e,xa=null,!0);default:return!1}}function Pa(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function _a(e){if(Ea){var n=xa;if(n){var r=n;if(!Na(e,n)){if(Pa(e))throw Error(t(418));n=Pl(r.nextSibling);var l=Sa;n&&Na(e,n)?za(l,r):(e.flags=-4097&e.flags|2,Ea=!1,Sa=e)}}else{if(Pa(e))throw Error(t(418));e.flags=-4097&e.flags|2,Ea=!1,Sa=e}}}function La(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Sa=e}function Ta(e){if(e!==Sa)return!1;if(!Ea)return La(e),Ea=!0,!1;var n;if((n=3!==e.tag)&&!(n=5!==e.tag)&&(n="head"!==(n=e.type)&&"body"!==n&&!wl(e.type,e.memoizedProps)),n&&(n=xa)){if(Pa(e))throw Ma(),Error(t(418));for(;n;)za(e,n),n=Pl(n.nextSibling)}if(La(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(t(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===n){xa=Pl(e.nextSibling);break e}n--}else"$"!==r&&"$!"!==r&&"$?"!==r||n++}e=e.nextSibling}xa=null}}else xa=Sa?Pl(e.stateNode.nextSibling):null;return!0}function Ma(){for(var e=xa;e;)e=Pl(e.nextSibling)}function Fa(){xa=Sa=null,Ea=!1}function Ra(e){null===Ca?Ca=[e]:Ca.push(e)}var Da=k.ReactCurrentBatchConfig;function Oa(e,n){if(e&&e.defaultProps){for(var t in n=I({},n),e=e.defaultProps)void 0===n[t]&&(n[t]=e[t]);return n}return n}var Ia=Ql(null),Ua=null,Va=null,Aa=null;function Ba(){Aa=Va=Ua=null}function Ha(e){var n=Ia.current;Wl(Ia),e._currentValue=n}function Qa(e,n,t){for(;null!==e;){var r=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,null!==r&&(r.childLanes|=n)):null!==r&&(r.childLanes&n)!==n&&(r.childLanes|=n),e===t)break;e=e.return}}function Wa(e,n){Ua=e,Aa=Va=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&n)&&(Ao=!0),e.firstContext=null)}function ja(e){var n=e._currentValue;if(Aa!==e)if(e={context:e,memoizedValue:n,next:null},null===Va){if(null===Ua)throw Error(t(308));Va=e,Ua.dependencies={lanes:0,firstContext:e}}else Va=Va.next=e;return n}var $a=null;function qa(e){null===$a?$a=[e]:$a.push(e)}function Ka(e,n,t,r){var l=n.interleaved;return null===l?(t.next=t,qa(n)):(t.next=l.next,l.next=t),n.interleaved=t,Ya(e,r)}function Ya(e,n){e.lanes|=n;var t=e.alternate;for(null!==t&&(t.lanes|=n),t=e,e=e.return;null!==e;)e.childLanes|=n,null!==(t=e.alternate)&&(t.childLanes|=n),t=e,e=e.return;return 3===t.tag?t.stateNode:null}var Xa=!1;function Ga(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Za(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ja(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function eu(e,n,t){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&Zi)){var l=r.pending;return null===l?n.next=n:(n.next=l.next,l.next=n),r.pending=n,Ya(e,t)}return null===(l=r.interleaved)?(n.next=n,qa(r)):(n.next=l.next,l.next=n),r.interleaved=n,Ya(e,t)}function nu(e,n,t){if(null!==(n=n.updateQueue)&&(n=n.shared,0!=(4194240&t))){var r=n.lanes;t|=r&=e.pendingLanes,n.lanes=t,Cn(e,t)}}function tu(e,n){var t=e.updateQueue,r=e.alternate;if(null!==r&&t===(r=r.updateQueue)){var l=null,a=null;if(null!==(t=t.firstBaseUpdate)){do{var u={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};null===a?l=a=u:a=a.next=u,t=t.next}while(null!==t);null===a?l=a=n:a=a.next=n}else l=a=n;return t={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=t)}null===(e=t.lastBaseUpdate)?t.firstBaseUpdate=n:e.next=n,t.lastBaseUpdate=n}function ru(e,n,t,r){var l=e.updateQueue;Xa=!1;var a=l.firstBaseUpdate,u=l.lastBaseUpdate,o=l.shared.pending;if(null!==o){l.shared.pending=null;var i=o,s=i.next;i.next=null,null===u?a=s:u.next=s,u=i;var c=e.alternate;null!==c&&((o=(c=c.updateQueue).lastBaseUpdate)!==u&&(null===o?c.firstBaseUpdate=s:o.next=s,c.lastBaseUpdate=i))}if(null!==a){var f=l.baseState;for(u=0,c=s=i=null,o=a;;){var d=o.lane,p=o.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,h=o;switch(d=n,p=t,h.tag){case 1:if("function"==typeof(m=h.payload)){f=m.call(p,f,d);break e}f=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(d="function"==typeof(m=h.payload)?m.call(p,f,d):m))break e;f=I({},f,d);break e;case 2:Xa=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=l.effects)?l.effects=[o]:d.push(o))}else p={eventTime:p,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(s=c=p,i=f):c=c.next=p,u|=d;if(null===(o=o.next)){if(null===(o=l.shared.pending))break;o=(d=o).next,d.next=null,l.lastBaseUpdate=d,l.shared.pending=null}}if(null===c&&(i=f),l.baseState=i,l.firstBaseUpdate=s,l.lastBaseUpdate=c,null!==(n=l.shared.interleaved)){l=n;do{u|=l.lane,l=l.next}while(l!==n)}else null===a&&(l.shared.lanes=0);us|=u,e.lanes=u,e.memoizedState=f}}function lu(e,n,r){if(e=n.effects,n.effects=null,null!==e)for(n=0;n<e.length;n++){var l=e[n],a=l.callback;if(null!==a){if(l.callback=null,l=r,"function"!=typeof a)throw Error(t(191,a));a.call(l)}}}var au=(new e.Component).refs;function uu(e,n,t,r){t=null==(t=t(r,n=e.memoizedState))?n:I({},n,t),e.memoizedState=t,0===e.lanes&&(e.updateQueue.baseState=t)}var ou={isMounted:function(e){return!!(e=e._reactInternals)&&Qe(e)===e},enqueueSetState:function(e,n,t){e=e._reactInternals;var r=Es(),l=Cs(e),a=Ja(r,l);a.payload=n,null!=t&&(a.callback=t),null!==(n=eu(e,a,l))&&(zs(n,e,l,r),nu(n,e,l))},enqueueReplaceState:function(e,n,t){e=e._reactInternals;var r=Es(),l=Cs(e),a=Ja(r,l);a.tag=1,a.payload=n,null!=t&&(a.callback=t),null!==(n=eu(e,a,l))&&(zs(n,e,l,r),nu(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var t=Es(),r=Cs(e),l=Ja(t,r);l.tag=2,null!=n&&(l.callback=n),null!==(n=eu(e,l,r))&&(zs(n,e,r,t),nu(n,e,r))}};function iu(e,n,t,r,l,a,u){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,u):!n.prototype||!n.prototype.isPureReactComponent||(!Cr(t,r)||!Cr(l,a))}function su(e,n,t){var r=!1,l=$l,a=n.contextType;return"object"==typeof a&&null!==a?a=ja(a):(l=Gl(n)?Yl:ql.current,a=(r=null!=(r=n.contextTypes))?Xl(e,l):$l),n=new n(t,a),e.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,n.updater=ou,e.stateNode=n,n._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=a),n}function cu(e,n,t,r){e=n.state,"function"==typeof n.componentWillReceiveProps&&n.componentWillReceiveProps(t,r),"function"==typeof n.UNSAFE_componentWillReceiveProps&&n.UNSAFE_componentWillReceiveProps(t,r),n.state!==e&&ou.enqueueReplaceState(n,n.state,null)}function fu(e,n,t,r){var l=e.stateNode;l.props=t,l.state=e.memoizedState,l.refs=au,Ga(e);var a=n.contextType;"object"==typeof a&&null!==a?l.context=ja(a):(a=Gl(n)?Yl:ql.current,l.context=Xl(e,a)),l.state=e.memoizedState,"function"==typeof(a=n.getDerivedStateFromProps)&&(uu(e,n,a,t),l.state=e.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof l.getSnapshotBeforeUpdate||"function"!=typeof l.UNSAFE_componentWillMount&&"function"!=typeof l.componentWillMount||(n=l.state,"function"==typeof l.componentWillMount&&l.componentWillMount(),"function"==typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount(),n!==l.state&&ou.enqueueReplaceState(l,l.state,null),ru(e,t,l,r),l.state=e.memoizedState),"function"==typeof l.componentDidMount&&(e.flags|=4194308)}function du(e,n,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(t(309));var l=r.stateNode}if(!l)throw Error(t(147,e));var a=l,u=""+e;return null!==n&&null!==n.ref&&"function"==typeof n.ref&&n.ref._stringRef===u?n.ref:((n=function(e){var n=a.refs;n===au&&(n=a.refs={}),null===e?delete n[u]:n[u]=e})._stringRef=u,n)}if("string"!=typeof e)throw Error(t(284));if(!r._owner)throw Error(t(290,e))}return e}function pu(e,n){throw e=Object.prototype.toString.call(n),Error(t(31,"[object Object]"===e?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function mu(e){return(0,e._init)(e._payload)}function hu(e){function n(n,t){if(e){var r=n.deletions;null===r?(n.deletions=[t],n.flags|=16):r.push(t)}}function r(t,r){if(!e)return null;for(;null!==r;)n(t,r),r=r.sibling;return null}function l(e,n){for(e=new Map;null!==n;)null!==n.key?e.set(n.key,n):e.set(n.index,n),n=n.sibling;return e}function a(e,n){return(e=uc(e,n)).index=0,e.sibling=null,e}function u(n,t,r){return n.index=r,e?null!==(r=n.alternate)?(r=r.index)<t?(n.flags|=2,t):r:(n.flags|=2,t):(n.flags|=1048576,t)}function o(n){return e&&null===n.alternate&&(n.flags|=2),n}function i(e,n,t,r){return null===n||6!==n.tag?((n=cc(t,e.mode,r)).return=e,n):((n=a(n,t)).return=e,n)}function s(e,n,t,r){var l=t.type;return l===x?f(e,n,t.props.children,r,t.key):null!==n&&(n.elementType===l||"object"==typeof l&&null!==l&&l.$$typeof===M&&mu(l)===n.type)?((r=a(n,t.props)).ref=du(e,n,t),r.return=e,r):((r=oc(t.type,t.key,t.props,null,e.mode,r)).ref=du(e,n,t),r.return=e,r)}function c(e,n,t,r){return null===n||4!==n.tag||n.stateNode.containerInfo!==t.containerInfo||n.stateNode.implementation!==t.implementation?((n=fc(t,e.mode,r)).return=e,n):((n=a(n,t.children||[])).return=e,n)}function f(e,n,t,r,l){return null===n||7!==n.tag?((n=ic(t,e.mode,r,l)).return=e,n):((n=a(n,t)).return=e,n)}function d(e,n,t){if("string"==typeof n&&""!==n||"number"==typeof n)return(n=cc(""+n,e.mode,t)).return=e,n;if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return(t=oc(n.type,n.key,n.props,null,e.mode,t)).ref=du(e,null,n),t.return=e,t;case S:return(n=fc(n,e.mode,t)).return=e,n;case M:return d(e,(0,n._init)(n._payload),t)}if(te(n)||D(n))return(n=ic(n,e.mode,t,null)).return=e,n;pu(e,n)}return null}function p(e,n,t,r){var l=null!==n?n.key:null;if("string"==typeof t&&""!==t||"number"==typeof t)return null!==l?null:i(e,n,""+t,r);if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return t.key===l?s(e,n,t,r):null;case S:return t.key===l?c(e,n,t,r):null;case M:return p(e,n,(l=t._init)(t._payload),r)}if(te(t)||D(t))return null!==l?null:f(e,n,t,r,null);pu(e,t)}return null}function m(e,n,t,r,l){if("string"==typeof r&&""!==r||"number"==typeof r)return i(n,e=e.get(t)||null,""+r,l);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return s(n,e=e.get(null===r.key?t:r.key)||null,r,l);case S:return c(n,e=e.get(null===r.key?t:r.key)||null,r,l);case M:return m(e,n,t,(0,r._init)(r._payload),l)}if(te(r)||D(r))return f(n,e=e.get(t)||null,r,l,null);pu(n,r)}return null}function h(t,a,o,i){for(var s=null,c=null,f=a,h=a=0,g=null;null!==f&&h<o.length;h++){f.index>h?(g=f,f=null):g=f.sibling;var v=p(t,f,o[h],i);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&n(t,f),a=u(v,a,h),null===c?s=v:c.sibling=v,c=v,f=g}if(h===o.length)return r(t,f),Ea&&ya(t,h),s;if(null===f){for(;h<o.length;h++)null!==(f=d(t,o[h],i))&&(a=u(f,a,h),null===c?s=f:c.sibling=f,c=f);return Ea&&ya(t,h),s}for(f=l(t,f);h<o.length;h++)null!==(g=m(f,t,h,o[h],i))&&(e&&null!==g.alternate&&f.delete(null===g.key?h:g.key),a=u(g,a,h),null===c?s=g:c.sibling=g,c=g);return e&&f.forEach(function(e){return n(t,e)}),Ea&&ya(t,h),s}function g(a,o,i,s){var c=D(i);if("function"!=typeof c)throw Error(t(150));if(null==(i=c.call(i)))throw Error(t(151));for(var f=c=null,h=o,g=o=0,v=null,y=i.next();null!==h&&!y.done;g++,y=i.next()){h.index>g?(v=h,h=null):v=h.sibling;var b=p(a,h,y.value,s);if(null===b){null===h&&(h=v);break}e&&h&&null===b.alternate&&n(a,h),o=u(b,o,g),null===f?c=b:f.sibling=b,f=b,h=v}if(y.done)return r(a,h),Ea&&ya(a,g),c;if(null===h){for(;!y.done;g++,y=i.next())null!==(y=d(a,y.value,s))&&(o=u(y,o,g),null===f?c=y:f.sibling=y,f=y);return Ea&&ya(a,g),c}for(h=l(a,h);!y.done;g++,y=i.next())null!==(y=m(h,a,g,y.value,s))&&(e&&null!==y.alternate&&h.delete(null===y.key?g:y.key),o=u(y,o,g),null===f?c=y:f.sibling=y,f=y);return e&&h.forEach(function(e){return n(a,e)}),Ea&&ya(a,g),c}return function e(t,l,u,i){if("object"==typeof u&&null!==u&&u.type===x&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case w:e:{for(var s=u.key,c=l;null!==c;){if(c.key===s){if((s=u.type)===x){if(7===c.tag){r(t,c.sibling),(l=a(c,u.props.children)).return=t,t=l;break e}}else if(c.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===M&&mu(s)===c.type){r(t,c.sibling),(l=a(c,u.props)).ref=du(t,c,u),l.return=t,t=l;break e}r(t,c);break}n(t,c),c=c.sibling}u.type===x?((l=ic(u.props.children,t.mode,i,u.key)).return=t,t=l):((i=oc(u.type,u.key,u.props,null,t.mode,i)).ref=du(t,l,u),i.return=t,t=i)}return o(t);case S:e:{for(c=u.key;null!==l;){if(l.key===c){if(4===l.tag&&l.stateNode.containerInfo===u.containerInfo&&l.stateNode.implementation===u.implementation){r(t,l.sibling),(l=a(l,u.children||[])).return=t,t=l;break e}r(t,l);break}n(t,l),l=l.sibling}(l=fc(u,t.mode,i)).return=t,t=l}return o(t);case M:return e(t,l,(c=u._init)(u._payload),i)}if(te(u))return h(t,l,u,i);if(D(u))return g(t,l,u,i);pu(t,u)}return"string"==typeof u&&""!==u||"number"==typeof u?(u=""+u,null!==l&&6===l.tag?(r(t,l.sibling),(l=a(l,u)).return=t,t=l):(r(t,l),(l=cc(u,t.mode,i)).return=t,t=l),o(t)):r(t,l)}}var gu=hu(!0),vu=hu(!1),yu={},bu=Ql(yu),ku=Ql(yu),wu=Ql(yu);function Su(e){if(e===yu)throw Error(t(174));return e}function xu(e,n){switch(jl(wu,n),jl(ku,e),jl(bu,yu),e=n.nodeType){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:se(null,"");break;default:n=se(n=(e=8===e?n.parentNode:n).namespaceURI||null,e=e.tagName)}Wl(bu),jl(bu,n)}function Eu(){Wl(bu),Wl(ku),Wl(wu)}function Cu(e){Su(wu.current);var n=Su(bu.current),t=se(n,e.type);n!==t&&(jl(ku,e),jl(bu,t))}function zu(e){ku.current===e&&(Wl(bu),Wl(ku))}var Nu=Ql(0);function Pu(e){for(var n=e;null!==n;){if(13===n.tag){var t=n.memoizedState;if(null!==t&&(null===(t=t.dehydrated)||"$?"===t.data||"$!"===t.data))return n}else if(19===n.tag&&void 0!==n.memoizedProps.revealOrder){if(0!=(128&n.flags))return n}else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var _u=[];function Lu(){for(var e=0;e<_u.length;e++)_u[e]._workInProgressVersionPrimary=null;_u.length=0}var Tu=k.ReactCurrentDispatcher,Mu=k.ReactCurrentBatchConfig,Fu=0,Ru=null,Du=null,Ou=null,Iu=!1,Uu=!1,Vu=0,Au=0;function Bu(){throw Error(t(321))}function Hu(e,n){if(null===n)return!1;for(var t=0;t<n.length&&t<e.length;t++)if(!Er(e[t],n[t]))return!1;return!0}function Qu(e,n,r,l,a,u){if(Fu=u,Ru=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Tu.current=null===e||null===e.memoizedState?No:Po,e=r(l,a),Uu){u=0;do{if(Uu=!1,Vu=0,25<=u)throw Error(t(301));u+=1,Ou=Du=null,n.updateQueue=null,Tu.current=_o,e=r(l,a)}while(Uu)}if(Tu.current=zo,n=null!==Du&&null!==Du.next,Fu=0,Ou=Du=Ru=null,Iu=!1,n)throw Error(t(300));return e}function Wu(){var e=0!==Vu;return Vu=0,e}function ju(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ou?Ru.memoizedState=Ou=e:Ou=Ou.next=e,Ou}function $u(){if(null===Du){var e=Ru.alternate;e=null!==e?e.memoizedState:null}else e=Du.next;var n=null===Ou?Ru.memoizedState:Ou.next;if(null!==n)Ou=n,Du=e;else{if(null===e)throw Error(t(310));e={memoizedState:(Du=e).memoizedState,baseState:Du.baseState,baseQueue:Du.baseQueue,queue:Du.queue,next:null},null===Ou?Ru.memoizedState=Ou=e:Ou=Ou.next=e}return Ou}function qu(e,n){return"function"==typeof n?n(e):n}function Ku(e){var n=$u(),r=n.queue;if(null===r)throw Error(t(311));r.lastRenderedReducer=e;var l=Du,a=l.baseQueue,u=r.pending;if(null!==u){if(null!==a){var o=a.next;a.next=u.next,u.next=o}l.baseQueue=a=u,r.pending=null}if(null!==a){u=a.next,l=l.baseState;var i=o=null,s=null,c=u;do{var f=c.lane;if((Fu&f)===f)null!==s&&(s=s.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),l=c.hasEagerState?c.eagerState:e(l,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===s?(i=s=d,o=l):s=s.next=d,Ru.lanes|=f,us|=f}c=c.next}while(null!==c&&c!==u);null===s?o=l:s.next=i,Er(l,n.memoizedState)||(Ao=!0),n.memoizedState=l,n.baseState=o,n.baseQueue=s,r.lastRenderedState=l}if(null!==(e=r.interleaved)){a=e;do{u=a.lane,Ru.lanes|=u,us|=u,a=a.next}while(a!==e)}else null===a&&(r.lanes=0);return[n.memoizedState,r.dispatch]}function Yu(e){var n=$u(),r=n.queue;if(null===r)throw Error(t(311));r.lastRenderedReducer=e;var l=r.dispatch,a=r.pending,u=n.memoizedState;if(null!==a){r.pending=null;var o=a=a.next;do{u=e(u,o.action),o=o.next}while(o!==a);Er(u,n.memoizedState)||(Ao=!0),n.memoizedState=u,null===n.baseQueue&&(n.baseState=u),r.lastRenderedState=u}return[u,l]}function Xu(){}function Gu(e,n){var r=Ru,l=$u(),a=n(),u=!Er(l.memoizedState,a);if(u&&(l.memoizedState=a,Ao=!0),l=l.queue,so(eo.bind(null,r,l,e),[e]),l.getSnapshot!==n||u||null!==Ou&&1&Ou.memoizedState.tag){if(r.flags|=2048,lo(9,Ju.bind(null,r,l,a,n),void 0,null),null===Ji)throw Error(t(349));0!=(30&Fu)||Zu(r,n,a)}return a}function Zu(e,n,t){e.flags|=16384,e={getSnapshot:n,value:t},null===(n=Ru.updateQueue)?(n={lastEffect:null,stores:null},Ru.updateQueue=n,n.stores=[e]):null===(t=n.stores)?n.stores=[e]:t.push(e)}function Ju(e,n,t,r){n.value=t,n.getSnapshot=r,no(n)&&to(e)}function eo(e,n,t){return t(function(){no(n)&&to(e)})}function no(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!Er(e,t)}catch(r){return!0}}function to(e){var n=Ya(e,1);null!==n&&zs(n,e,1,-1)}function ro(e){var n=ju();return"function"==typeof e&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qu,lastRenderedState:e},n.queue=e,e=e.dispatch=So.bind(null,Ru,e),[n.memoizedState,e]}function lo(e,n,t,r){return e={tag:e,create:n,destroy:t,deps:r,next:null},null===(n=Ru.updateQueue)?(n={lastEffect:null,stores:null},Ru.updateQueue=n,n.lastEffect=e.next=e):null===(t=n.lastEffect)?n.lastEffect=e.next=e:(r=t.next,t.next=e,e.next=r,n.lastEffect=e),e}function ao(){return $u().memoizedState}function uo(e,n,t,r){var l=ju();Ru.flags|=e,l.memoizedState=lo(1|n,t,void 0,void 0===r?null:r)}function oo(e,n,t,r){var l=$u();r=void 0===r?null:r;var a=void 0;if(null!==Du){var u=Du.memoizedState;if(a=u.destroy,null!==r&&Hu(r,u.deps))return void(l.memoizedState=lo(n,t,a,r))}Ru.flags|=e,l.memoizedState=lo(1|n,t,a,r)}function io(e,n){return uo(8390656,8,e,n)}function so(e,n){return oo(2048,8,e,n)}function co(e,n){return oo(4,2,e,n)}function fo(e,n){return oo(4,4,e,n)}function po(e,n){return"function"==typeof n?(e=e(),n(e),function(){n(null)}):null!=n?(e=e(),n.current=e,function(){n.current=null}):void 0}function mo(e,n,t){return t=null!=t?t.concat([e]):null,oo(4,4,po.bind(null,n,e),t)}function ho(){}function go(e,n){var t=$u();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&Hu(n,r[1])?r[0]:(t.memoizedState=[e,n],e)}function vo(e,n){var t=$u();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&Hu(n,r[1])?r[0]:(e=e(),t.memoizedState=[e,n],e)}function yo(e,n,t){return 0==(21&Fu)?(e.baseState&&(e.baseState=!1,Ao=!0),e.memoizedState=t):(Er(t,n)||(t=wn(),Ru.lanes|=t,us|=t,e.baseState=!0),n)}function bo(e,n){var t=zn;zn=0!==t&&4>t?t:4,e(!0);var r=Mu.transition;Mu.transition={};try{e(!1),n()}finally{zn=t,Mu.transition=r}}function ko(){return $u().memoizedState}function wo(e,n,t){var r=Cs(e);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},xo(e))Eo(n,t);else if(null!==(t=Ka(e,n,t,r))){zs(t,e,r,Es()),Co(t,n,r)}}function So(e,n,t){var r=Cs(e),l={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(xo(e))Eo(n,l);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=n.lastRenderedReducer))try{var u=n.lastRenderedState,o=a(u,t);if(l.hasEagerState=!0,l.eagerState=o,Er(o,u)){var i=n.interleaved;return null===i?(l.next=l,qa(n)):(l.next=i.next,i.next=l),void(n.interleaved=l)}}catch(s){}null!==(t=Ka(e,n,l,r))&&(zs(t,e,r,l=Es()),Co(t,n,r))}}function xo(e){var n=e.alternate;return e===Ru||null!==n&&n===Ru}function Eo(e,n){Uu=Iu=!0;var t=e.pending;null===t?n.next=n:(n.next=t.next,t.next=n),e.pending=n}function Co(e,n,t){if(0!=(4194240&t)){var r=n.lanes;t|=r&=e.pendingLanes,n.lanes=t,Cn(e,t)}}var zo={readContext:ja,useCallback:Bu,useContext:Bu,useEffect:Bu,useImperativeHandle:Bu,useInsertionEffect:Bu,useLayoutEffect:Bu,useMemo:Bu,useReducer:Bu,useRef:Bu,useState:Bu,useDebugValue:Bu,useDeferredValue:Bu,useTransition:Bu,useMutableSource:Bu,useSyncExternalStore:Bu,useId:Bu,unstable_isNewReconciler:!1},No={readContext:ja,useCallback:function(e,n){return ju().memoizedState=[e,void 0===n?null:n],e},useContext:ja,useEffect:io,useImperativeHandle:function(e,n,t){return t=null!=t?t.concat([e]):null,uo(4194308,4,po.bind(null,n,e),t)},useLayoutEffect:function(e,n){return uo(4194308,4,e,n)},useInsertionEffect:function(e,n){return uo(4,2,e,n)},useMemo:function(e,n){var t=ju();return n=void 0===n?null:n,e=e(),t.memoizedState=[e,n],e},useReducer:function(e,n,t){var r=ju();return n=void 0!==t?t(n):n,r.memoizedState=r.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},r.queue=e,e=e.dispatch=wo.bind(null,Ru,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ju().memoizedState=e},useState:ro,useDebugValue:ho,useDeferredValue:function(e){return ju().memoizedState=e},useTransition:function(){var e=ro(!1),n=e[0];return e=bo.bind(null,e[1]),ju().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,r){var l=Ru,a=ju();if(Ea){if(void 0===r)throw Error(t(407));r=r()}else{if(r=n(),null===Ji)throw Error(t(349));0!=(30&Fu)||Zu(l,n,r)}a.memoizedState=r;var u={value:r,getSnapshot:n};return a.queue=u,io(eo.bind(null,l,u,e),[e]),l.flags|=2048,lo(9,Ju.bind(null,l,u,r,n),void 0,null),r},useId:function(){var e=ju(),n=Ji.identifierPrefix;if(Ea){var t=va;n=":"+n+"R"+(t=(ga&~(1<<32-cn(ga)-1)).toString(32)+t),0<(t=Vu++)&&(n+="H"+t.toString(32)),n+=":"}else n=":"+n+"r"+(t=Au++).toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},Po={readContext:ja,useCallback:go,useContext:ja,useEffect:so,useImperativeHandle:mo,useInsertionEffect:co,useLayoutEffect:fo,useMemo:vo,useReducer:Ku,useRef:ao,useState:function(){return Ku(qu)},useDebugValue:ho,useDeferredValue:function(e){return yo($u(),Du.memoizedState,e)},useTransition:function(){return[Ku(qu)[0],$u().memoizedState]},useMutableSource:Xu,useSyncExternalStore:Gu,useId:ko,unstable_isNewReconciler:!1},_o={readContext:ja,useCallback:go,useContext:ja,useEffect:so,useImperativeHandle:mo,useInsertionEffect:co,useLayoutEffect:fo,useMemo:vo,useReducer:Yu,useRef:ao,useState:function(){return Yu(qu)},useDebugValue:ho,useDeferredValue:function(e){var n=$u();return null===Du?n.memoizedState=e:yo(n,Du.memoizedState,e)},useTransition:function(){return[Yu(qu)[0],$u().memoizedState]},useMutableSource:Xu,useSyncExternalStore:Gu,useId:ko,unstable_isNewReconciler:!1};function Lo(e,n){try{var t="",r=n;do{t+=B(r),r=r.return}while(r);var l=t}catch(a){l="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:n,stack:l,digest:null}}function To(e,n,t){return{value:e,source:null,stack:null!=t?t:null,digest:null!=n?n:null}}function Mo(e,n){try{console.error(n.value)}catch(t){setTimeout(function(){throw t})}}var Fo="function"==typeof WeakMap?WeakMap:Map;function Ro(e,n,t){(t=Ja(-1,t)).tag=3,t.payload={element:null};var r=n.value;return t.callback=function(){ms||(ms=!0,hs=r),Mo(e,n)},t}function Do(e,n,t){(t=Ja(-1,t)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var l=n.value;t.payload=function(){return r(l)},t.callback=function(){Mo(e,n)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(t.callback=function(){Mo(e,n),"function"!=typeof r&&(null===gs?gs=new Set([this]):gs.add(this));var t=n.stack;this.componentDidCatch(n.value,{componentStack:null!==t?t:""})}),t}function Oo(e,n,t){var r=e.pingCache;if(null===r){r=e.pingCache=new Fo;var l=new Set;r.set(n,l)}else void 0===(l=r.get(n))&&(l=new Set,r.set(n,l));l.has(t)||(l.add(t),e=Gs.bind(null,e,n,t),n.then(e,e))}function Io(e){do{var n;if((n=13===e.tag)&&(n=null===(n=e.memoizedState)||null!==n.dehydrated),n)return e;e=e.return}while(null!==e);return null}function Uo(e,n,t,r,l){return 0==(1&e.mode)?(e===n?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,1===t.tag&&(null===t.alternate?t.tag=17:((n=Ja(-1,1)).tag=2,eu(t,n,1))),t.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var Vo=k.ReactCurrentOwner,Ao=!1;function Bo(e,n,t,r){n.child=null===e?vu(n,null,t,r):gu(n,e.child,t,r)}function Ho(e,n,t,r,l){t=t.render;var a=n.ref;return Wa(n,l),r=Qu(e,n,t,r,a,l),t=Wu(),null===e||Ao?(Ea&&t&&ka(n),n.flags|=1,Bo(e,n,r,l),n.child):(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~l,di(e,n,l))}function Qo(e,n,t,r,l){if(null===e){var a=t.type;return"function"!=typeof a||lc(a)||void 0!==a.defaultProps||null!==t.compare||void 0!==t.defaultProps?((e=oc(t.type,null,r,n,n.mode,l)).ref=n.ref,e.return=n,n.child=e):(n.tag=15,n.type=a,Wo(e,n,a,r,l))}if(a=e.child,0==(e.lanes&l)){var u=a.memoizedProps;if((t=null!==(t=t.compare)?t:Cr)(u,r)&&e.ref===n.ref)return di(e,n,l)}return n.flags|=1,(e=uc(a,r)).ref=n.ref,e.return=n,n.child=e}function Wo(e,n,t,r,l){if(null!==e){var a=e.memoizedProps;if(Cr(a,r)&&e.ref===n.ref){if(Ao=!1,n.pendingProps=r=a,0==(e.lanes&l))return n.lanes=e.lanes,di(e,n,l);0!=(131072&e.flags)&&(Ao=!0)}}return qo(e,n,t,r,l)}function jo(e,n,t){var r=n.pendingProps,l=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&n.mode))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},jl(rs,ts),ts|=t;else{if(0==(1073741824&t))return e=null!==a?a.baseLanes|t:t,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,jl(rs,ts),ts|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:t,jl(rs,ts),ts|=r}else null!==a?(r=a.baseLanes|t,n.memoizedState=null):r=t,jl(rs,ts),ts|=r;return Bo(e,n,l,t),n.child}function $o(e,n){var t=n.ref;(null===e&&null!==t||null!==e&&e.ref!==t)&&(n.flags|=512,n.flags|=2097152)}function qo(e,n,t,r,l){var a=Gl(t)?Yl:ql.current;return a=Xl(n,a),Wa(n,l),t=Qu(e,n,t,r,a,l),r=Wu(),null===e||Ao?(Ea&&r&&ka(n),n.flags|=1,Bo(e,n,t,l),n.child):(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~l,di(e,n,l))}function Ko(e,n,t,r,l){if(Gl(t)){var a=!0;na(n)}else a=!1;if(Wa(n,l),null===n.stateNode)fi(e,n),su(n,t,r),fu(n,t,r,l),r=!0;else if(null===e){var u=n.stateNode,o=n.memoizedProps;u.props=o;var i=u.context,s=t.contextType;"object"==typeof s&&null!==s?s=ja(s):s=Xl(n,s=Gl(t)?Yl:ql.current);var c=t.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof u.getSnapshotBeforeUpdate;f||"function"!=typeof u.UNSAFE_componentWillReceiveProps&&"function"!=typeof u.componentWillReceiveProps||(o!==r||i!==s)&&cu(n,u,r,s),Xa=!1;var d=n.memoizedState;u.state=d,ru(n,r,u,l),i=n.memoizedState,o!==r||d!==i||Kl.current||Xa?("function"==typeof c&&(uu(n,t,c,r),i=n.memoizedState),(o=Xa||iu(n,t,o,r,d,i,s))?(f||"function"!=typeof u.UNSAFE_componentWillMount&&"function"!=typeof u.componentWillMount||("function"==typeof u.componentWillMount&&u.componentWillMount(),"function"==typeof u.UNSAFE_componentWillMount&&u.UNSAFE_componentWillMount()),"function"==typeof u.componentDidMount&&(n.flags|=4194308)):("function"==typeof u.componentDidMount&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=i),u.props=r,u.state=i,u.context=s,r=o):("function"==typeof u.componentDidMount&&(n.flags|=4194308),r=!1)}else{u=n.stateNode,Za(e,n),o=n.memoizedProps,s=n.type===n.elementType?o:Oa(n.type,o),u.props=s,f=n.pendingProps,d=u.context,"object"==typeof(i=t.contextType)&&null!==i?i=ja(i):i=Xl(n,i=Gl(t)?Yl:ql.current);var p=t.getDerivedStateFromProps;(c="function"==typeof p||"function"==typeof u.getSnapshotBeforeUpdate)||"function"!=typeof u.UNSAFE_componentWillReceiveProps&&"function"!=typeof u.componentWillReceiveProps||(o!==f||d!==i)&&cu(n,u,r,i),Xa=!1,d=n.memoizedState,u.state=d,ru(n,r,u,l);var m=n.memoizedState;o!==f||d!==m||Kl.current||Xa?("function"==typeof p&&(uu(n,t,p,r),m=n.memoizedState),(s=Xa||iu(n,t,s,r,d,m,i)||!1)?(c||"function"!=typeof u.UNSAFE_componentWillUpdate&&"function"!=typeof u.componentWillUpdate||("function"==typeof u.componentWillUpdate&&u.componentWillUpdate(r,m,i),"function"==typeof u.UNSAFE_componentWillUpdate&&u.UNSAFE_componentWillUpdate(r,m,i)),"function"==typeof u.componentDidUpdate&&(n.flags|=4),"function"==typeof u.getSnapshotBeforeUpdate&&(n.flags|=1024)):("function"!=typeof u.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(n.flags|=4),"function"!=typeof u.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=m),u.props=r,u.state=m,u.context=i,r=s):("function"!=typeof u.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(n.flags|=4),"function"!=typeof u.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(n.flags|=1024),r=!1)}return Yo(e,n,t,r,a,l)}function Yo(e,n,t,r,l,a){$o(e,n);var u=0!=(128&n.flags);if(!r&&!u)return l&&ta(n,t,!1),di(e,n,a);r=n.stateNode,Vo.current=n;var o=u&&"function"!=typeof t.getDerivedStateFromError?null:r.render();return n.flags|=1,null!==e&&u?(n.child=gu(n,e.child,null,a),n.child=gu(n,null,o,a)):Bo(e,n,o,a),n.memoizedState=r.state,l&&ta(n,t,!0),n.child}function Xo(e){var n=e.stateNode;n.pendingContext?Jl(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Jl(e,n.context,!1),xu(e,n.containerInfo)}function Go(e,n,t,r,l){return Fa(),Ra(l),n.flags|=256,Bo(e,n,t,r),n.child}var Zo,Jo,ei,ni,ti={dehydrated:null,treeContext:null,retryLane:0};function ri(e){return{baseLanes:e,cachePool:null,transitions:null}}function li(e,n,t){var r,l=n.pendingProps,a=Nu.current,u=!1,o=0!=(128&n.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!=(2&a)),r?(u=!0,n.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),jl(Nu,1&a),null===e)return _a(n),null!==(e=n.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&n.mode)?n.lanes=1:"$!"===e.data?n.lanes=8:n.lanes=1073741824,null):(o=l.children,e=l.fallback,u?(l=n.mode,u=n.child,o={mode:"hidden",children:o},0==(1&l)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=sc(o,l,0,null),e=ic(e,l,t,null),u.return=n,e.return=n,u.sibling=e,n.child=u,n.child.memoizedState=ri(t),n.memoizedState=ti,e):ai(n,o));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return oi(e,n,o,l,r,a,t);if(u){u=l.fallback,o=n.mode,r=(a=e.child).sibling;var i={mode:"hidden",children:l.children};return 0==(1&o)&&n.child!==a?((l=n.child).childLanes=0,l.pendingProps=i,n.deletions=null):(l=uc(a,i)).subtreeFlags=14680064&a.subtreeFlags,null!==r?u=uc(r,u):(u=ic(u,o,t,null)).flags|=2,u.return=n,l.return=n,l.sibling=u,n.child=l,l=u,u=n.child,o=null===(o=e.child.memoizedState)?ri(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},u.memoizedState=o,u.childLanes=e.childLanes&~t,n.memoizedState=ti,l}return e=(u=e.child).sibling,l=uc(u,{mode:"visible",children:l.children}),0==(1&n.mode)&&(l.lanes=t),l.return=n,l.sibling=null,null!==e&&(null===(t=n.deletions)?(n.deletions=[e],n.flags|=16):t.push(e)),n.child=l,n.memoizedState=null,l}function ai(e,n){return(n=sc({mode:"visible",children:n},e.mode,0,null)).return=e,e.child=n}function ui(e,n,t,r){return null!==r&&Ra(r),gu(n,e.child,null,t),(e=ai(n,n.pendingProps.children)).flags|=2,n.memoizedState=null,e}function oi(e,n,r,l,a,u,o){if(r)return 256&n.flags?(n.flags&=-257,ui(e,n,o,l=To(Error(t(422))))):null!==n.memoizedState?(n.child=e.child,n.flags|=128,null):(u=l.fallback,a=n.mode,l=sc({mode:"visible",children:l.children},a,0,null),(u=ic(u,a,o,null)).flags|=2,l.return=n,u.return=n,l.sibling=u,n.child=l,0!=(1&n.mode)&&gu(n,e.child,null,o),n.child.memoizedState=ri(o),n.memoizedState=ti,u);if(0==(1&n.mode))return ui(e,n,o,null);if("$!"===a.data){if(l=a.nextSibling&&a.nextSibling.dataset)var i=l.dgst;return l=i,ui(e,n,o,l=To(u=Error(t(419)),l,void 0))}if(i=0!=(o&e.childLanes),Ao||i){if(null!==(l=Ji)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!=(a&(l.suspendedLanes|o))?0:a)&&a!==u.retryLane&&(u.retryLane=a,Ya(e,a),zs(l,e,a,-1))}return As(),ui(e,n,o,l=To(Error(t(421))))}return"$?"===a.data?(n.flags|=128,n.child=e.child,n=Js.bind(null,e),a._reactRetry=n,null):(e=u.treeContext,xa=Pl(a.nextSibling),Sa=n,Ea=!0,Ca=null,null!==e&&(pa[ma++]=ga,pa[ma++]=va,pa[ma++]=ha,ga=e.id,va=e.overflow,ha=n),(n=ai(n,l.children)).flags|=4096,n)}function ii(e,n,t){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n),Qa(e.return,n,t)}function si(e,n,t,r,l){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:l}:(a.isBackwards=n,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=t,a.tailMode=l)}function ci(e,n,t){var r=n.pendingProps,l=r.revealOrder,a=r.tail;if(Bo(e,n,r.children,t),0!=(2&(r=Nu.current)))r=1&r|2,n.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=n.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ii(e,t,n);else if(19===e.tag)ii(e,t,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(jl(Nu,r),0==(1&n.mode))n.memoizedState=null;else switch(l){case"forwards":for(t=n.child,l=null;null!==t;)null!==(e=t.alternate)&&null===Pu(e)&&(l=t),t=t.sibling;null===(t=l)?(l=n.child,n.child=null):(l=t.sibling,t.sibling=null),si(n,!1,l,t,a);break;case"backwards":for(t=null,l=n.child,n.child=null;null!==l;){if(null!==(e=l.alternate)&&null===Pu(e)){n.child=l;break}e=l.sibling,l.sibling=t,t=l,l=e}si(n,!0,t,null,a);break;case"together":si(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function fi(e,n){0==(1&n.mode)&&null!==e&&(e.alternate=null,n.alternate=null,n.flags|=2)}function di(e,n,r){if(null!==e&&(n.dependencies=e.dependencies),us|=n.lanes,0==(r&n.childLanes))return null;if(null!==e&&n.child!==e.child)throw Error(t(153));if(null!==n.child){for(r=uc(e=n.child,e.pendingProps),n.child=r,r.return=n;null!==e.sibling;)e=e.sibling,(r=r.sibling=uc(e,e.pendingProps)).return=n;r.sibling=null}return n.child}function pi(e,n,t){switch(n.tag){case 3:Xo(n),Fa();break;case 5:Cu(n);break;case 1:Gl(n.type)&&na(n);break;case 4:xu(n,n.stateNode.containerInfo);break;case 10:var r=n.type._context,l=n.memoizedProps.value;jl(Ia,r._currentValue),r._currentValue=l;break;case 13:if(null!==(r=n.memoizedState))return null!==r.dehydrated?(jl(Nu,1&Nu.current),n.flags|=128,null):0!=(t&n.child.childLanes)?li(e,n,t):(jl(Nu,1&Nu.current),null!==(e=di(e,n,t))?e.sibling:null);jl(Nu,1&Nu.current);break;case 19:if(r=0!=(t&n.childLanes),0!=(128&e.flags)){if(r)return ci(e,n,t);n.flags|=128}if(null!==(l=n.memoizedState)&&(l.rendering=null,l.tail=null,l.lastEffect=null),jl(Nu,Nu.current),r)break;return null;case 22:case 23:return n.lanes=0,jo(e,n,t)}return di(e,n,t)}function mi(e,n){if(!Ea)switch(e.tailMode){case"hidden":n=e.tail;for(var t=null;null!==n;)null!==n.alternate&&(t=n),n=n.sibling;null===t?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?n||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function hi(e){var n=null!==e.alternate&&e.alternate.child===e.child,t=0,r=0;if(n)for(var l=e.child;null!==l;)t|=l.lanes|l.childLanes,r|=14680064&l.subtreeFlags,r|=14680064&l.flags,l.return=e,l=l.sibling;else for(l=e.child;null!==l;)t|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=t,n}function gi(e,n,r){var a=n.pendingProps;switch(wa(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hi(n),null;case 1:return Gl(n.type)&&Zl(),hi(n),null;case 3:return a=n.stateNode,Eu(),Wl(Kl),Wl(ql),Lu(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(Ta(n)?n.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&n.flags)||(n.flags|=1024,null!==Ca&&(Ls(Ca),Ca=null))),Jo(e,n),hi(n),null;case 5:zu(n);var u=Su(wu.current);if(r=n.type,null!==e&&null!=n.stateNode)ei(e,n,r,a,u),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!a){if(null===n.stateNode)throw Error(t(166));return hi(n),null}if(e=Su(bu.current),Ta(n)){a=n.stateNode,r=n.type;var o=n.memoizedProps;switch(a[Tl]=n,a[Ml]=o,e=0!=(1&n.mode),r){case"dialog":ll("cancel",a),ll("close",a);break;case"iframe":case"object":case"embed":ll("load",a);break;case"video":case"audio":for(u=0;u<el.length;u++)ll(el[u],a);break;case"source":ll("error",a);break;case"img":case"image":case"link":ll("error",a),ll("load",a);break;case"details":ll("toggle",a);break;case"input":G(a,o),ll("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!o.multiple},ll("invalid",a);break;case"textarea":ae(a,o),ll("invalid",a)}for(var i in ye(r,o),u=null,o)if(o.hasOwnProperty(i)){var s=o[i];"children"===i?"string"==typeof s?a.textContent!==s&&(!0!==o.suppressHydrationWarning&&vl(a.textContent,s,e),u=["children",s]):"number"==typeof s&&a.textContent!==""+s&&(!0!==o.suppressHydrationWarning&&vl(a.textContent,s,e),u=["children",""+s]):l.hasOwnProperty(i)&&null!=s&&"onScroll"===i&&ll("scroll",a)}switch(r){case"input":q(a),ee(a,o,!0);break;case"textarea":q(a),oe(a);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(a.onclick=yl)}a=u,n.updateQueue=a,null!==a&&(n.flags|=4)}else{i=9===u.nodeType?u:u.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ie(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof a.is?e=i.createElement(r,{is:a.is}):(e=i.createElement(r),"select"===r&&(i=e,a.multiple?i.multiple=!0:a.size&&(i.size=a.size))):e=i.createElementNS(e,r),e[Tl]=n,e[Ml]=a,Zo(e,n,!1,!1),n.stateNode=e;e:{switch(i=be(r,a),r){case"dialog":ll("cancel",e),ll("close",e),u=a;break;case"iframe":case"object":case"embed":ll("load",e),u=a;break;case"video":case"audio":for(u=0;u<el.length;u++)ll(el[u],e);u=a;break;case"source":ll("error",e),u=a;break;case"img":case"image":case"link":ll("error",e),ll("load",e),u=a;break;case"details":ll("toggle",e),u=a;break;case"input":G(e,a),u=X(e,a),ll("invalid",e);break;case"option":u=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},u=I({},a,{value:void 0}),ll("invalid",e);break;case"textarea":ae(e,a),u=le(e,a),ll("invalid",e);break;default:u=a}for(o in ye(r,u),s=u)if(s.hasOwnProperty(o)){var c=s[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&fe(e,c):"children"===o?"string"==typeof c?("textarea"!==r||""!==c)&&de(e,c):"number"==typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(l.hasOwnProperty(o)?null!=c&&"onScroll"===o&&ll("scroll",e):null!=c&&b(e,o,c,i))}switch(r){case"input":q(e),ee(e,a,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=a.value&&e.setAttribute("value",""+W(a.value));break;case"select":e.multiple=!!a.multiple,null!=(o=a.value)?re(e,!!a.multiple,o,!1):null!=a.defaultValue&&re(e,!!a.multiple,a.defaultValue,!0);break;default:"function"==typeof u.onClick&&(e.onclick=yl)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(n.flags|=4)}null!==n.ref&&(n.flags|=512,n.flags|=2097152)}return hi(n),null;case 6:if(e&&null!=n.stateNode)ni(e,n,e.memoizedProps,a);else{if("string"!=typeof a&&null===n.stateNode)throw Error(t(166));if(r=Su(wu.current),Su(bu.current),Ta(n)){if(a=n.stateNode,r=n.memoizedProps,a[Tl]=n,(o=a.nodeValue!==r)&&null!==(e=Sa))switch(e.tag){case 3:vl(a.nodeValue,r,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&vl(a.nodeValue,r,0!=(1&e.mode))}o&&(n.flags|=4)}else(a=(9===r.nodeType?r:r.ownerDocument).createTextNode(a))[Tl]=n,n.stateNode=a}return hi(n),null;case 13:if(Wl(Nu),a=n.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(Ea&&null!==xa&&0!=(1&n.mode)&&0==(128&n.flags))Ma(),Fa(),n.flags|=98560,o=!1;else if(o=Ta(n),null!==a&&null!==a.dehydrated){if(null===e){if(!o)throw Error(t(318));if(!(o=null!==(o=n.memoizedState)?o.dehydrated:null))throw Error(t(317));o[Tl]=n}else Fa(),0==(128&n.flags)&&(n.memoizedState=null),n.flags|=4;hi(n),o=!1}else null!==Ca&&(Ls(Ca),Ca=null),o=!0;if(!o)return 65536&n.flags?n:null}return 0!=(128&n.flags)?(n.lanes=r,n):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(n.child.flags|=8192,0!=(1&n.mode)&&(null===e||0!=(1&Nu.current)?0===ls&&(ls=3):As())),null!==n.updateQueue&&(n.flags|=4),hi(n),null);case 4:return Eu(),Jo(e,n),null===e&&ol(n.stateNode.containerInfo),hi(n),null;case 10:return Ha(n.type._context),hi(n),null;case 17:return Gl(n.type)&&Zl(),hi(n),null;case 19:if(Wl(Nu),null===(o=n.memoizedState))return hi(n),null;if(a=0!=(128&n.flags),null===(i=o.rendering))if(a)mi(o,!1);else{if(0!==ls||null!==e&&0!=(128&e.flags))for(e=n.child;null!==e;){if(null!==(i=Pu(e))){for(n.flags|=128,mi(o,!1),null!==(a=i.updateQueue)&&(n.updateQueue=a,n.flags|=4),n.subtreeFlags=0,a=r,r=n.child;null!==r;)e=a,(o=r).flags&=14680066,null===(i=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return jl(Nu,1&Nu.current|2),n.child}e=e.sibling}null!==o.tail&&Je()>ds&&(n.flags|=128,a=!0,mi(o,!1),n.lanes=4194304)}else{if(!a)if(null!==(e=Pu(i))){if(n.flags|=128,a=!0,null!==(r=e.updateQueue)&&(n.updateQueue=r,n.flags|=4),mi(o,!0),null===o.tail&&"hidden"===o.tailMode&&!i.alternate&&!Ea)return hi(n),null}else 2*Je()-o.renderingStartTime>ds&&1073741824!==r&&(n.flags|=128,a=!0,mi(o,!1),n.lanes=4194304);o.isBackwards?(i.sibling=n.child,n.child=i):(null!==(r=o.last)?r.sibling=i:n.child=i,o.last=i)}return null!==o.tail?(n=o.tail,o.rendering=n,o.tail=n.sibling,o.renderingStartTime=Je(),n.sibling=null,r=Nu.current,jl(Nu,a?1&r|2:1&r),n):(hi(n),null);case 22:case 23:return Os(),a=null!==n.memoizedState,null!==e&&null!==e.memoizedState!==a&&(n.flags|=8192),a&&0!=(1&n.mode)?0!=(1073741824&ts)&&(hi(n),6&n.subtreeFlags&&(n.flags|=8192)):hi(n),null;case 24:case 25:return null}throw Error(t(156,n.tag))}function vi(e,n){switch(wa(n),n.tag){case 1:return Gl(n.type)&&Zl(),65536&(e=n.flags)?(n.flags=-65537&e|128,n):null;case 3:return Eu(),Wl(Kl),Wl(ql),Lu(),0!=(65536&(e=n.flags))&&0==(128&e)?(n.flags=-65537&e|128,n):null;case 5:return zu(n),null;case 13:if(Wl(Nu),null!==(e=n.memoizedState)&&null!==e.dehydrated){if(null===n.alternate)throw Error(t(340));Fa()}return 65536&(e=n.flags)?(n.flags=-65537&e|128,n):null;case 19:return Wl(Nu),null;case 4:return Eu(),null;case 10:return Ha(n.type._context),null;case 22:case 23:return Os(),null;case 24:default:return null}}Zo=function(e,n){for(var t=n.child;null!==t;){if(5===t.tag||6===t.tag)e.appendChild(t.stateNode);else if(4!==t.tag&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}},Jo=function(){},ei=function(e,n,t,r){var a=e.memoizedProps;if(a!==r){e=n.stateNode,Su(bu.current);var u,o=null;switch(t){case"input":a=X(e,a),r=X(e,r),o=[];break;case"select":a=I({},a,{value:void 0}),r=I({},r,{value:void 0}),o=[];break;case"textarea":a=le(e,a),r=le(e,r),o=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(e.onclick=yl)}for(c in ye(t,r),t=null,a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&null!=a[c])if("style"===c){var i=a[c];for(u in i)i.hasOwnProperty(u)&&(t||(t={}),t[u]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(l.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var s=r[c];if(i=null!=a?a[c]:void 0,r.hasOwnProperty(c)&&s!==i&&(null!=s||null!=i))if("style"===c)if(i){for(u in i)!i.hasOwnProperty(u)||s&&s.hasOwnProperty(u)||(t||(t={}),t[u]="");for(u in s)s.hasOwnProperty(u)&&i[u]!==s[u]&&(t||(t={}),t[u]=s[u])}else t||(o||(o=[]),o.push(c,t)),t=s;else"dangerouslySetInnerHTML"===c?(s=s?s.__html:void 0,i=i?i.__html:void 0,null!=s&&i!==s&&(o=o||[]).push(c,s)):"children"===c?"string"!=typeof s&&"number"!=typeof s||(o=o||[]).push(c,""+s):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(l.hasOwnProperty(c)?(null!=s&&"onScroll"===c&&ll("scroll",e),o||i===s||(o=[])):(o=o||[]).push(c,s))}t&&(o=o||[]).push("style",t);var c=o;(n.updateQueue=c)&&(n.flags|=4)}},ni=function(e,n,t,r){t!==r&&(n.flags|=4)};var yi=!1,bi=!1,ki="function"==typeof WeakSet?WeakSet:Set,wi=null;function Si(e,n){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(r){Xs(e,n,r)}else t.current=null}function xi(e,n,t){try{t()}catch(r){Xs(e,n,r)}}var Ei=!1;function Ci(e,n){if(bl=Zn,Lr(e=_r())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var l=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(l&&0!==l.rangeCount){r=l.anchorNode;var a=l.anchorOffset,u=l.focusNode;l=l.focusOffset;try{r.nodeType,u.nodeType}catch(w){r=null;break e}var o=0,i=-1,s=-1,c=0,f=0,d=e,p=null;n:for(;;){for(var m;d!==r||0!==a&&3!==d.nodeType||(i=o+a),d!==u||0!==l&&3!==d.nodeType||(s=o+l),3===d.nodeType&&(o+=d.nodeValue.length),null!==(m=d.firstChild);)p=d,d=m;for(;;){if(d===e)break n;if(p===r&&++c===a&&(i=o),p===u&&++f===l&&(s=o),null!==(m=d.nextSibling))break;p=(d=p).parentNode}d=m}r=-1===i||-1===s?null:{start:i,end:s}}else r=null}r=r||{start:0,end:0}}else r=null;for(kl={focusedElem:e,selectionRange:r},Zn=!1,wi=n;null!==wi;)if(e=(n=wi).child,0!=(1028&n.subtreeFlags)&&null!==e)e.return=n,wi=e;else for(;null!==wi;){n=wi;try{var h=n.alternate;if(0!=(1024&n.flags))switch(n.tag){case 0:case 11:case 15:break;case 1:if(null!==h){var g=h.memoizedProps,v=h.memoizedState,y=n.stateNode,b=y.getSnapshotBeforeUpdate(n.elementType===n.type?g:Oa(n.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var k=n.stateNode.containerInfo;1===k.nodeType?k.textContent="":9===k.nodeType&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(w){Xs(n,n.return,w)}if(null!==(e=n.sibling)){e.return=n.return,wi=e;break}wi=n.return}return h=Ei,Ei=!1,h}function zi(e,n,t){var r=n.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var l=r=r.next;do{if((l.tag&e)===e){var a=l.destroy;l.destroy=void 0,void 0!==a&&xi(n,t,a)}l=l.next}while(l!==r)}}function Ni(e,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var t=n=n.next;do{if((t.tag&e)===e){var r=t.create;t.destroy=r()}t=t.next}while(t!==n)}}function Pi(e){var n=e.ref;if(null!==n){var t=e.stateNode;switch(e.tag){case 5:e=t;break;default:e=t}"function"==typeof n?n(e):n.current=e}}function _i(e){var n=e.alternate;null!==n&&(e.alternate=null,_i(n)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(n=e.stateNode)&&(delete n[Tl],delete n[Ml],delete n[Rl],delete n[Dl],delete n[Ol])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Li(e){return 5===e.tag||3===e.tag||4===e.tag}function Ti(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Li(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Mi(e,n,t){var r=e.tag;if(5===r||6===r)e=e.stateNode,n?8===t.nodeType?t.parentNode.insertBefore(e,n):t.insertBefore(e,n):(8===t.nodeType?(n=t.parentNode).insertBefore(e,t):(n=t).appendChild(e),null!=(t=t._reactRootContainer)||null!==n.onclick||(n.onclick=yl));else if(4!==r&&null!==(e=e.child))for(Mi(e,n,t),e=e.sibling;null!==e;)Mi(e,n,t),e=e.sibling}function Fi(e,n,t){var r=e.tag;if(5===r||6===r)e=e.stateNode,n?t.insertBefore(e,n):t.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Fi(e,n,t),e=e.sibling;null!==e;)Fi(e,n,t),e=e.sibling}var Ri=null,Di=!1;function Oi(e,n,t){for(t=t.child;null!==t;)Ii(e,n,t),t=t.sibling}function Ii(e,n,t){if(on&&"function"==typeof on.onCommitFiberUnmount)try{on.onCommitFiberUnmount(un,t)}catch(o){}switch(t.tag){case 5:bi||Si(t,n);case 6:var r=Ri,l=Di;Ri=null,Oi(e,n,t),Di=l,null!==(Ri=r)&&(Di?(e=Ri,t=t.stateNode,8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)):Ri.removeChild(t.stateNode));break;case 18:null!==Ri&&(Di?(e=Ri,t=t.stateNode,8===e.nodeType?Nl(e.parentNode,t):1===e.nodeType&&Nl(e,t),Xn(e)):Nl(Ri,t.stateNode));break;case 4:r=Ri,l=Di,Ri=t.stateNode.containerInfo,Di=!0,Oi(e,n,t),Ri=r,Di=l;break;case 0:case 11:case 14:case 15:if(!bi&&(null!==(r=t.updateQueue)&&null!==(r=r.lastEffect))){l=r=r.next;do{var a=l,u=a.destroy;a=a.tag,void 0!==u&&(0!=(2&a)?xi(t,n,u):0!=(4&a)&&xi(t,n,u)),l=l.next}while(l!==r)}Oi(e,n,t);break;case 1:if(!bi&&(Si(t,n),"function"==typeof(r=t.stateNode).componentWillUnmount))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(o){Xs(t,n,o)}Oi(e,n,t);break;case 21:Oi(e,n,t);break;case 22:1&t.mode?(bi=(r=bi)||null!==t.memoizedState,Oi(e,n,t),bi=r):Oi(e,n,t);break;default:Oi(e,n,t)}}function Ui(e){var n=e.updateQueue;if(null!==n){e.updateQueue=null;var t=e.stateNode;null===t&&(t=e.stateNode=new ki),n.forEach(function(n){var r=ec.bind(null,e,n);t.has(n)||(t.add(n),n.then(r,r))})}}function Vi(e,n){var r=n.deletions;if(null!==r)for(var l=0;l<r.length;l++){var a=r[l];try{var u=e,o=n,i=o;e:for(;null!==i;){switch(i.tag){case 5:Ri=i.stateNode,Di=!1;break e;case 3:case 4:Ri=i.stateNode.containerInfo,Di=!0;break e}i=i.return}if(null===Ri)throw Error(t(160));Ii(u,o,a),Ri=null,Di=!1;var s=a.alternate;null!==s&&(s.return=null),a.return=null}catch(c){Xs(a,n,c)}}if(12854&n.subtreeFlags)for(n=n.child;null!==n;)Ai(n,e),n=n.sibling}function Ai(e,n){var r=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vi(n,e),Bi(e),4&l){try{zi(3,e,e.return),Ni(3,e)}catch(g){Xs(e,e.return,g)}try{zi(5,e,e.return)}catch(g){Xs(e,e.return,g)}}break;case 1:Vi(n,e),Bi(e),512&l&&null!==r&&Si(r,r.return);break;case 5:if(Vi(n,e),Bi(e),512&l&&null!==r&&Si(r,r.return),32&e.flags){var a=e.stateNode;try{de(a,"")}catch(g){Xs(e,e.return,g)}}if(4&l&&null!=(a=e.stateNode)){var u=e.memoizedProps,o=null!==r?r.memoizedProps:u,i=e.type,s=e.updateQueue;if(e.updateQueue=null,null!==s)try{"input"===i&&"radio"===u.type&&null!=u.name&&Z(a,u),be(i,o);var c=be(i,u);for(o=0;o<s.length;o+=2){var f=s[o],d=s[o+1];"style"===f?ge(a,d):"dangerouslySetInnerHTML"===f?fe(a,d):"children"===f?de(a,d):b(a,f,d,c)}switch(i){case"input":J(a,u);break;case"textarea":ue(a,u);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!u.multiple;var m=u.value;null!=m?re(a,!!u.multiple,m,!1):p!==!!u.multiple&&(null!=u.defaultValue?re(a,!!u.multiple,u.defaultValue,!0):re(a,!!u.multiple,u.multiple?[]:"",!1))}a[Ml]=u}catch(g){Xs(e,e.return,g)}}break;case 6:if(Vi(n,e),Bi(e),4&l){if(null===e.stateNode)throw Error(t(162));a=e.stateNode,u=e.memoizedProps;try{a.nodeValue=u}catch(g){Xs(e,e.return,g)}}break;case 3:if(Vi(n,e),Bi(e),4&l&&null!==r&&r.memoizedState.isDehydrated)try{Xn(n.containerInfo)}catch(g){Xs(e,e.return,g)}break;case 4:Vi(n,e),Bi(e);break;case 13:Vi(n,e),Bi(e),8192&(a=e.child).flags&&(u=null!==a.memoizedState,a.stateNode.isHidden=u,!u||null!==a.alternate&&null!==a.alternate.memoizedState||(fs=Je())),4&l&&Ui(e);break;case 22:if(f=null!==r&&null!==r.memoizedState,1&e.mode?(bi=(c=bi)||f,Vi(n,e),bi=c):Vi(n,e),Bi(e),8192&l){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!f&&0!=(1&e.mode))for(wi=e,f=e.child;null!==f;){for(d=wi=f;null!==wi;){switch(m=(p=wi).child,p.tag){case 0:case 11:case 14:case 15:zi(4,p,p.return);break;case 1:Si(p,p.return);var h=p.stateNode;if("function"==typeof h.componentWillUnmount){l=p,r=p.return;try{n=l,h.props=n.memoizedProps,h.state=n.memoizedState,h.componentWillUnmount()}catch(g){Xs(l,r,g)}}break;case 5:Si(p,p.return);break;case 22:if(null!==p.memoizedState){ji(d);continue}}null!==m?(m.return=p,wi=m):ji(d)}f=f.sibling}e:for(f=null,d=e;;){if(5===d.tag){if(null===f){f=d;try{a=d.stateNode,c?"function"==typeof(u=a.style).setProperty?u.setProperty("display","none","important"):u.display="none":(i=d.stateNode,o=null!=(s=d.memoizedProps.style)&&s.hasOwnProperty("display")?s.display:null,i.style.display=he("display",o))}catch(g){Xs(e,e.return,g)}}}else if(6===d.tag){if(null===f)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Xs(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Vi(n,e),Bi(e),4&l&&Ui(e);break;case 21:break;default:Vi(n,e),Bi(e)}}function Bi(e){var n=e.flags;if(2&n){try{e:{for(var r=e.return;null!==r;){if(Li(r)){var l=r;break e}r=r.return}throw Error(t(160))}switch(l.tag){case 5:var a=l.stateNode;32&l.flags&&(de(a,""),l.flags&=-33),Fi(e,Ti(e),a);break;case 3:case 4:var u=l.stateNode.containerInfo;Mi(e,Ti(e),u);break;default:throw Error(t(161))}}catch(o){Xs(e,e.return,o)}e.flags&=-3}4096&n&&(e.flags&=-4097)}function Hi(e,n,t){wi=e,Qi(e,n,t)}function Qi(e,n,t){for(var r=0!=(1&e.mode);null!==wi;){var l=wi,a=l.child;if(22===l.tag&&r){var u=null!==l.memoizedState||yi;if(!u){var o=l.alternate,i=null!==o&&null!==o.memoizedState||bi;o=yi;var s=bi;if(yi=u,(bi=i)&&!s)for(wi=l;null!==wi;)i=(u=wi).child,22===u.tag&&null!==u.memoizedState?$i(l):null!==i?(i.return=u,wi=i):$i(l);for(;null!==a;)wi=a,Qi(a,n,t),a=a.sibling;wi=l,yi=o,bi=s}Wi(e,n,t)}else 0!=(8772&l.subtreeFlags)&&null!==a?(a.return=l,wi=a):Wi(e,n,t)}}function Wi(e){for(;null!==wi;){var n=wi;if(0!=(8772&n.flags)){var r=n.alternate;try{if(0!=(8772&n.flags))switch(n.tag){case 0:case 11:case 15:bi||Ni(5,n);break;case 1:var l=n.stateNode;if(4&n.flags&&!bi)if(null===r)l.componentDidMount();else{var a=n.elementType===n.type?r.memoizedProps:Oa(n.type,r.memoizedProps);l.componentDidUpdate(a,r.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var u=n.updateQueue;null!==u&&lu(n,u,l);break;case 3:var o=n.updateQueue;if(null!==o){if(r=null,null!==n.child)switch(n.child.tag){case 5:r=n.child.stateNode;break;case 1:r=n.child.stateNode}lu(n,o,r)}break;case 5:var i=n.stateNode;if(null===r&&4&n.flags){r=i;var s=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&r.focus();break;case"img":s.src&&(r.src=s.src)}}break;case 6:case 4:case 12:break;case 13:if(null===n.memoizedState){var c=n.alternate;if(null!==c){var f=c.memoizedState;if(null!==f){var d=f.dehydrated;null!==d&&Xn(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}bi||512&n.flags&&Pi(n)}catch(p){Xs(n,n.return,p)}}if(n===e){wi=null;break}if(null!==(r=n.sibling)){r.return=n.return,wi=r;break}wi=n.return}}function ji(e){for(;null!==wi;){var n=wi;if(n===e){wi=null;break}var t=n.sibling;if(null!==t){t.return=n.return,wi=t;break}wi=n.return}}function $i(e){for(;null!==wi;){var n=wi;try{switch(n.tag){case 0:case 11:case 15:var t=n.return;try{Ni(4,n)}catch(i){Xs(n,t,i)}break;case 1:var r=n.stateNode;if("function"==typeof r.componentDidMount){var l=n.return;try{r.componentDidMount()}catch(i){Xs(n,l,i)}}var a=n.return;try{Pi(n)}catch(i){Xs(n,a,i)}break;case 5:var u=n.return;try{Pi(n)}catch(i){Xs(n,u,i)}}}catch(i){Xs(n,n.return,i)}if(n===e){wi=null;break}var o=n.sibling;if(null!==o){o.return=n.return,wi=o;break}wi=n.return}}var qi,Ki=Math.ceil,Yi=k.ReactCurrentDispatcher,Xi=k.ReactCurrentOwner,Gi=k.ReactCurrentBatchConfig,Zi=0,Ji=null,es=null,ns=0,ts=0,rs=Ql(0),ls=0,as=null,us=0,os=0,is=0,ss=null,cs=null,fs=0,ds=1/0,ps=null,ms=!1,hs=null,gs=null,vs=!1,ys=null,bs=0,ks=0,ws=null,Ss=-1,xs=0;function Es(){return 0!=(6&Zi)?Je():-1!==Ss?Ss:Ss=Je()}function Cs(e){return 0==(1&e.mode)?1:0!=(2&Zi)&&0!==ns?ns&-ns:null!==Da.transition?(0===xs&&(xs=wn()),xs):0!==(e=zn)?e:e=void 0===(e=window.event)?16:lt(e.type)}function zs(e,n,r,l){if(50<ks)throw ks=0,ws=null,Error(t(185));xn(e,r,l),0!=(2&Zi)&&e===Ji||(e===Ji&&(0==(2&Zi)&&(os|=r),4===ls&&Ms(e,ns)),Ns(e,l),1===r&&0===Zi&&0==(1&n.mode)&&(ds=Je()+500,la&&ia()))}function Ns(e,n){var t=e.callbackNode;bn(e,n);var r=vn(e,e===Ji?ns:0);if(0===r)null!==t&&Xe(t),e.callbackNode=null,e.callbackPriority=0;else if(n=r&-r,e.callbackPriority!==n){if(null!=t&&Xe(t),1===n)0===e.tag?oa(Fs.bind(null,e)):ua(Fs.bind(null,e)),Cl(function(){0==(6&Zi)&&ia()}),t=null;else{switch(Nn(r)){case 1:t=nn;break;case 4:t=tn;break;case 16:t=rn;break;case 536870912:t=an;break;default:t=rn}t=nc(t,Ps.bind(null,e))}e.callbackPriority=n,e.callbackNode=t}}function Ps(e,n){if(Ss=-1,xs=0,0!=(6&Zi))throw Error(t(327));var r=e.callbackNode;if(Ks()&&e.callbackNode!==r)return null;var l=vn(e,e===Ji?ns:0);if(0===l)return null;if(0!=(30&l)||0!=(l&e.expiredLanes)||n)n=Bs(e,l);else{n=l;var a=Zi;Zi|=2;var u=Vs();for(Ji===e&&ns===n||(ps=null,ds=Je()+500,Is(e,n));;)try{Qs();break}catch(i){Us(e,i)}Ba(),Yi.current=u,Zi=a,null!==es?n=0:(Ji=null,ns=0,n=ls)}if(0!==n){if(2===n&&(0!==(a=kn(e))&&(l=a,n=_s(e,a))),1===n)throw r=as,Is(e,0),Ms(e,l),Ns(e,Je()),r;if(6===n)Ms(e,l);else{if(a=e.current.alternate,0==(30&l)&&!Ts(a)&&(2===(n=Bs(e,l))&&(0!==(u=kn(e))&&(l=u,n=_s(e,u))),1===n))throw r=as,Is(e,0),Ms(e,l),Ns(e,Je()),r;switch(e.finishedWork=a,e.finishedLanes=l,n){case 0:case 1:throw Error(t(345));case 2:$s(e,cs,ps);break;case 3:if(Ms(e,l),(130023424&l)===l&&10<(n=fs+500-Je())){if(0!==vn(e,0))break;if(((a=e.suspendedLanes)&l)!==l){Es(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Sl($s.bind(null,e,cs,ps),n);break}$s(e,cs,ps);break;case 4:if(Ms(e,l),(4194240&l)===l)break;for(n=e.eventTimes,a=-1;0<l;){var o=31-cn(l);u=1<<o,(o=n[o])>a&&(a=o),l&=~u}if(l=a,10<(l=(120>(l=Je()-l)?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*Ki(l/1960))-l)){e.timeoutHandle=Sl($s.bind(null,e,cs,ps),l);break}$s(e,cs,ps);break;case 5:$s(e,cs,ps);break;default:throw Error(t(329))}}}return Ns(e,Je()),e.callbackNode===r?Ps.bind(null,e):null}function _s(e,n){var t=ss;return e.current.memoizedState.isDehydrated&&(Is(e,n).flags|=256),2!==(e=Bs(e,n))&&(n=cs,cs=t,null!==n&&Ls(n)),e}function Ls(e){null===cs?cs=e:cs.push.apply(cs,e)}function Ts(e){for(var n=e;;){if(16384&n.flags){var t=n.updateQueue;if(null!==t&&null!==(t=t.stores))for(var r=0;r<t.length;r++){var l=t[r],a=l.getSnapshot;l=l.value;try{if(!Er(a(),l))return!1}catch(u){return!1}}}if(t=n.child,16384&n.subtreeFlags&&null!==t)t.return=n,n=t;else{if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ms(e,n){for(n&=~is,n&=~os,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var t=31-cn(n),r=1<<t;e[t]=-1,n&=~r}}function Fs(e){if(0!=(6&Zi))throw Error(t(327));Ks();var n=vn(e,0);if(0==(1&n))return Ns(e,Je()),null;var r=Bs(e,n);if(0!==e.tag&&2===r){var l=kn(e);0!==l&&(n=l,r=_s(e,l))}if(1===r)throw r=as,Is(e,0),Ms(e,n),Ns(e,Je()),r;if(6===r)throw Error(t(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,$s(e,cs,ps),Ns(e,Je()),null}function Rs(e,n){var t=Zi;Zi|=1;try{return e(n)}finally{0===(Zi=t)&&(ds=Je()+500,la&&ia())}}function Ds(e){null!==ys&&0===ys.tag&&0==(6&Zi)&&Ks();var n=Zi;Zi|=1;var t=Gi.transition,r=zn;try{if(Gi.transition=null,zn=1,e)return e()}finally{zn=r,Gi.transition=t,0==(6&(Zi=n))&&ia()}}function Os(){ts=rs.current,Wl(rs)}function Is(e,n){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(-1!==t&&(e.timeoutHandle=-1,xl(t)),null!==es)for(t=es.return;null!==t;){var r=t;switch(wa(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Zl();break;case 3:Eu(),Wl(Kl),Wl(ql),Lu();break;case 5:zu(r);break;case 4:Eu();break;case 13:case 19:Wl(Nu);break;case 10:Ha(r.type._context);break;case 22:case 23:Os()}t=t.return}if(Ji=e,es=e=uc(e.current,null),ns=ts=n,ls=0,as=null,is=os=us=0,cs=ss=null,null!==$a){for(n=0;n<$a.length;n++)if(null!==(r=(t=$a[n]).interleaved)){t.interleaved=null;var l=r.next,a=t.pending;if(null!==a){var u=a.next;a.next=l,r.next=u}t.pending=r}$a=null}return e}function Us(e,n){for(;;){var r=es;try{if(Ba(),Tu.current=zo,Iu){for(var l=Ru.memoizedState;null!==l;){var a=l.queue;null!==a&&(a.pending=null),l=l.next}Iu=!1}if(Fu=0,Ou=Du=Ru=null,Uu=!1,Vu=0,Xi.current=null,null===r||null===r.return){ls=1,as=n,es=null;break}e:{var u=e,o=r.return,i=r,s=n;if(n=ns,i.flags|=32768,null!==s&&"object"==typeof s&&"function"==typeof s.then){var c=s,f=i,d=f.tag;if(0==(1&f.mode)&&(0===d||11===d||15===d)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=Io(o);if(null!==m){m.flags&=-257,Uo(m,o,i,u,n),1&m.mode&&Oo(u,c,n),s=c;var h=(n=m).updateQueue;if(null===h){var g=new Set;g.add(s),n.updateQueue=g}else h.add(s);break e}if(0==(1&n)){Oo(u,c,n),As();break e}s=Error(t(426))}else if(Ea&&1&i.mode){var v=Io(o);if(null!==v){0==(65536&v.flags)&&(v.flags|=256),Uo(v,o,i,u,n),Ra(Lo(s,i));break e}}u=s=Lo(s,i),4!==ls&&(ls=2),null===ss?ss=[u]:ss.push(u),u=o;do{switch(u.tag){case 3:u.flags|=65536,n&=-n,u.lanes|=n,tu(u,Ro(u,s,n));break e;case 1:i=s;var y=u.type,b=u.stateNode;if(0==(128&u.flags)&&("function"==typeof y.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===gs||!gs.has(b)))){u.flags|=65536,n&=-n,u.lanes|=n,tu(u,Do(u,i,n));break e}}u=u.return}while(null!==u)}js(r)}catch(k){n=k,es===r&&null!==r&&(es=r=r.return);continue}break}}function Vs(){var e=Yi.current;return Yi.current=zo,null===e?zo:e}function As(){0!==ls&&3!==ls&&2!==ls||(ls=4),null===Ji||0==(268435455&us)&&0==(268435455&os)||Ms(Ji,ns)}function Bs(e,n){var r=Zi;Zi|=2;var l=Vs();for(Ji===e&&ns===n||(ps=null,Is(e,n));;)try{Hs();break}catch(a){Us(e,a)}if(Ba(),Zi=r,Yi.current=l,null!==es)throw Error(t(261));return Ji=null,ns=0,ls}function Hs(){for(;null!==es;)Ws(es)}function Qs(){for(;null!==es&&!Ge();)Ws(es)}function Ws(e){var n=qi(e.alternate,e,ts);e.memoizedProps=e.pendingProps,null===n?js(e):es=n,Xi.current=null}function js(e){var n=e;do{var t=n.alternate;if(e=n.return,0==(32768&n.flags)){if(null!==(t=gi(t,n,ts)))return void(es=t)}else{if(null!==(t=vi(t,n)))return t.flags&=32767,void(es=t);if(null===e)return ls=6,void(es=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(n=n.sibling))return void(es=n);es=n=e}while(null!==n);0===ls&&(ls=5)}function $s(e,n,t){var r=zn,l=Gi.transition;try{Gi.transition=null,zn=1,qs(e,n,t,r)}finally{Gi.transition=l,zn=r}return null}function qs(e,n,r,l){do{Ks()}while(null!==ys);if(0!=(6&Zi))throw Error(t(327));r=e.finishedWork;var a=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(t(177));e.callbackNode=null,e.callbackPriority=0;var u=r.lanes|r.childLanes;if(En(e,u),e===Ji&&(es=Ji=null,ns=0),0==(2064&r.subtreeFlags)&&0==(2064&r.flags)||vs||(vs=!0,nc(rn,function(){return Ks(),null})),u=0!=(15990&r.flags),0!=(15990&r.subtreeFlags)||u){u=Gi.transition,Gi.transition=null;var o=zn;zn=1;var i=Zi;Zi|=4,Xi.current=null,Ci(e,r),Ai(r,e),Tr(kl),Zn=!!bl,kl=bl=null,e.current=r,Hi(r,e,a),Ze(),Zi=i,zn=o,Gi.transition=u}else e.current=r;if(vs&&(vs=!1,ys=e,bs=a),0===(u=e.pendingLanes)&&(gs=null),sn(r.stateNode,l),Ns(e,Je()),null!==n)for(l=e.onRecoverableError,r=0;r<n.length;r++)l((a=n[r]).value,{componentStack:a.stack,digest:a.digest});if(ms)throw ms=!1,e=hs,hs=null,e;return 0!=(1&bs)&&0!==e.tag&&Ks(),0!=(1&(u=e.pendingLanes))?e===ws?ks++:(ks=0,ws=e):ks=0,ia(),null}function Ks(){if(null!==ys){var e=Nn(bs),n=Gi.transition,r=zn;try{if(Gi.transition=null,zn=16>e?16:e,null===ys)var l=!1;else{if(e=ys,ys=null,bs=0,0!=(6&Zi))throw Error(t(331));var a=Zi;for(Zi|=4,wi=e.current;null!==wi;){var u=wi,o=u.child;if(0!=(16&wi.flags)){var i=u.deletions;if(null!==i){for(var s=0;s<i.length;s++){var c=i[s];for(wi=c;null!==wi;){var f=wi;switch(f.tag){case 0:case 11:case 15:zi(8,f,u)}var d=f.child;if(null!==d)d.return=f,wi=d;else for(;null!==wi;){var p=(f=wi).sibling,m=f.return;if(_i(f),f===c){wi=null;break}if(null!==p){p.return=m,wi=p;break}wi=m}}}var h=u.alternate;if(null!==h){var g=h.child;if(null!==g){h.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}wi=u}}if(0!=(2064&u.subtreeFlags)&&null!==o)o.return=u,wi=o;else e:for(;null!==wi;){if(0!=(2048&(u=wi).flags))switch(u.tag){case 0:case 11:case 15:zi(9,u,u.return)}var y=u.sibling;if(null!==y){y.return=u.return,wi=y;break e}wi=u.return}}var b=e.current;for(wi=b;null!==wi;){var k=(o=wi).child;if(0!=(2064&o.subtreeFlags)&&null!==k)k.return=o,wi=k;else e:for(o=b;null!==wi;){if(0!=(2048&(i=wi).flags))try{switch(i.tag){case 0:case 11:case 15:Ni(9,i)}}catch(S){Xs(i,i.return,S)}if(i===o){wi=null;break e}var w=i.sibling;if(null!==w){w.return=i.return,wi=w;break e}wi=i.return}}if(Zi=a,ia(),on&&"function"==typeof on.onPostCommitFiberRoot)try{on.onPostCommitFiberRoot(un,e)}catch(S){}l=!0}return l}finally{zn=r,Gi.transition=n}}return!1}function Ys(e,n,t){e=eu(e,n=Ro(e,n=Lo(t,n),1),1),n=Es(),null!==e&&(xn(e,1,n),Ns(e,n))}function Xs(e,n,t){if(3===e.tag)Ys(e,e,t);else for(;null!==n;){if(3===n.tag){Ys(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===gs||!gs.has(r))){n=eu(n,e=Do(n,e=Lo(t,e),1),1),e=Es(),null!==n&&(xn(n,1,e),Ns(n,e));break}}n=n.return}}function Gs(e,n,t){var r=e.pingCache;null!==r&&r.delete(n),n=Es(),e.pingedLanes|=e.suspendedLanes&t,Ji===e&&(ns&t)===t&&(4===ls||3===ls&&(130023424&ns)===ns&&500>Je()-fs?Is(e,0):is|=t),Ns(e,n)}function Zs(e,n){0===n&&(0==(1&e.mode)?n=1:(n=hn,0==(130023424&(hn<<=1))&&(hn=4194304)));var t=Es();null!==(e=Ya(e,n))&&(xn(e,n,t),Ns(e,t))}function Js(e){var n=e.memoizedState,t=0;null!==n&&(t=n.retryLane),Zs(e,t)}function ec(e,n){var r=0;switch(e.tag){case 13:var l=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(t(314))}null!==l&&l.delete(n),Zs(e,r)}function nc(e,n){return Ye(e,n)}function tc(e,n,t,r){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rc(e,n,t,r){return new tc(e,n,t,r)}function lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ac(e){if("function"==typeof e)return lc(e)?1:0;if(null!=e){if((e=e.$$typeof)===P)return 11;if(e===T)return 14}return 2}function uc(e,n){var t=e.alternate;return null===t?((t=rc(e.tag,n,e.key,e.mode)).elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=n,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=14680064&e.flags,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,n=e.dependencies,t.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function oc(e,n,r,l,a,u){var o=2;if(l=e,"function"==typeof e)lc(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case x:return ic(r.children,a,u,n);case E:o=8,a|=8;break;case C:return(e=rc(12,r,n,2|a)).elementType=C,e.lanes=u,e;case _:return(e=rc(13,r,n,a)).elementType=_,e.lanes=u,e;case L:return(e=rc(19,r,n,a)).elementType=L,e.lanes=u,e;case F:return sc(r,a,u,n);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case z:o=10;break e;case N:o=9;break e;case P:o=11;break e;case T:o=14;break e;case M:o=16,l=null;break e}throw Error(t(130,null==e?e:typeof e,""))}return(n=rc(o,r,n,a)).elementType=e,n.type=l,n.lanes=u,n}function ic(e,n,t,r){return(e=rc(7,e,r,n)).lanes=t,e}function sc(e,n,t,r){return(e=rc(22,e,r,n)).elementType=F,e.lanes=t,e.stateNode={isHidden:!1},e}function cc(e,n,t){return(e=rc(6,e,null,n)).lanes=t,e}function fc(e,n,t){return(n=rc(4,null!==e.children?e.children:[],e.key,n)).lanes=t,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function dc(e,n,t,r,l){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sn(0),this.expirationTimes=Sn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sn(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function pc(e,n,t,r,l,a,u,o,i){return e=new dc(e,n,t,o,i),1===n?(n=1,!0===a&&(n|=8)):n=0,a=rc(3,null,null,n),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ga(a),e}function mc(e,n,t){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:n,implementation:t}}function hc(e){if(!e)return $l;e:{if(Qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(t(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Gl(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(null!==n);throw Error(t(171))}if(1===e.tag){var r=e.type;if(Gl(r))return ea(e,r,n)}return n}function gc(e,n,t,r,l,a,u,o,i){return(e=pc(t,r,!0,e,l,a,u,o,i)).context=hc(null),t=e.current,(a=Ja(r=Es(),l=Cs(t))).callback=null!=n?n:null,eu(t,a,l),e.current.lanes=l,xn(e,l,r),Ns(e,r),e}function vc(e,n,t,r){var l=n.current,a=Es(),u=Cs(l);return t=hc(t),null===n.context?n.context=t:n.pendingContext=t,(n=Ja(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(n.callback=r),null!==(e=eu(l,n,u))&&(zs(e,l,u,a),nu(e,l,u)),u}function yc(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function bc(e,n){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var t=e.retryLane;e.retryLane=0!==t&&t<n?t:n}}function kc(e,n){bc(e,n),(e=e.alternate)&&bc(e,n)}function wc(){return null}qi=function(e,n,r){if(null!==e)if(e.memoizedProps!==n.pendingProps||Kl.current)Ao=!0;else{if(0==(e.lanes&r)&&0==(128&n.flags))return Ao=!1,pi(e,n,r);Ao=0!=(131072&e.flags)}else Ao=!1,Ea&&0!=(1048576&n.flags)&&ba(n,da,n.index);switch(n.lanes=0,n.tag){case 2:var l=n.type;fi(e,n),e=n.pendingProps;var a=Xl(n,ql.current);Wa(n,r),a=Qu(null,n,l,e,a,r);var u=Wu();return n.flags|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Gl(l)?(u=!0,na(n)):u=!1,n.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ga(n),a.updater=ou,n.stateNode=a,a._reactInternals=n,fu(n,l,e,r),n=Yo(null,n,l,!0,u,r)):(n.tag=0,Ea&&u&&ka(n),Bo(null,n,a,r),n=n.child),n;case 16:l=n.elementType;e:{switch(fi(e,n),e=n.pendingProps,l=(a=l._init)(l._payload),n.type=l,a=n.tag=ac(l),e=Oa(l,e),a){case 0:n=qo(null,n,l,e,r);break e;case 1:n=Ko(null,n,l,e,r);break e;case 11:n=Ho(null,n,l,e,r);break e;case 14:n=Qo(null,n,l,Oa(l.type,e),r);break e}throw Error(t(306,l,""))}return n;case 0:return l=n.type,a=n.pendingProps,qo(e,n,l,a=n.elementType===l?a:Oa(l,a),r);case 1:return l=n.type,a=n.pendingProps,Ko(e,n,l,a=n.elementType===l?a:Oa(l,a),r);case 3:e:{if(Xo(n),null===e)throw Error(t(387));l=n.pendingProps,a=(u=n.memoizedState).element,Za(e,n),ru(n,l,null,r);var o=n.memoizedState;if(l=o.element,u.isDehydrated){if(u={element:l,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},n.updateQueue.baseState=u,n.memoizedState=u,256&n.flags){n=Go(e,n,l,r,a=Lo(Error(t(423)),n));break e}if(l!==a){n=Go(e,n,l,r,a=Lo(Error(t(424)),n));break e}for(xa=Pl(n.stateNode.containerInfo.firstChild),Sa=n,Ea=!0,Ca=null,r=vu(n,null,l,r),n.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(Fa(),l===a){n=di(e,n,r);break e}Bo(e,n,l,r)}n=n.child}return n;case 5:return Cu(n),null===e&&_a(n),l=n.type,a=n.pendingProps,u=null!==e?e.memoizedProps:null,o=a.children,wl(l,a)?o=null:null!==u&&wl(l,u)&&(n.flags|=32),$o(e,n),Bo(e,n,o,r),n.child;case 6:return null===e&&_a(n),null;case 13:return li(e,n,r);case 4:return xu(n,n.stateNode.containerInfo),l=n.pendingProps,null===e?n.child=gu(n,null,l,r):Bo(e,n,l,r),n.child;case 11:return l=n.type,a=n.pendingProps,Ho(e,n,l,a=n.elementType===l?a:Oa(l,a),r);case 7:return Bo(e,n,n.pendingProps,r),n.child;case 8:case 12:return Bo(e,n,n.pendingProps.children,r),n.child;case 10:e:{if(l=n.type._context,a=n.pendingProps,u=n.memoizedProps,o=a.value,jl(Ia,l._currentValue),l._currentValue=o,null!==u)if(Er(u.value,o)){if(u.children===a.children&&!Kl.current){n=di(e,n,r);break e}}else for(null!==(u=n.child)&&(u.return=n);null!==u;){var i=u.dependencies;if(null!==i){o=u.child;for(var s=i.firstContext;null!==s;){if(s.context===l){if(1===u.tag){(s=Ja(-1,r&-r)).tag=2;var c=u.updateQueue;if(null!==c){var f=(c=c.shared).pending;null===f?s.next=s:(s.next=f.next,f.next=s),c.pending=s}}u.lanes|=r,null!==(s=u.alternate)&&(s.lanes|=r),Qa(u.return,r,n),i.lanes|=r;break}s=s.next}}else if(10===u.tag)o=u.type===n.type?null:u.child;else if(18===u.tag){if(null===(o=u.return))throw Error(t(341));o.lanes|=r,null!==(i=o.alternate)&&(i.lanes|=r),Qa(o,r,n),o=u.sibling}else o=u.child;if(null!==o)o.return=u;else for(o=u;null!==o;){if(o===n){o=null;break}if(null!==(u=o.sibling)){u.return=o.return,o=u;break}o=o.return}u=o}Bo(e,n,a.children,r),n=n.child}return n;case 9:return a=n.type,l=n.pendingProps.children,Wa(n,r),l=l(a=ja(a)),n.flags|=1,Bo(e,n,l,r),n.child;case 14:return a=Oa(l=n.type,n.pendingProps),Qo(e,n,l,a=Oa(l.type,a),r);case 15:return Wo(e,n,n.type,n.pendingProps,r);case 17:return l=n.type,a=n.pendingProps,a=n.elementType===l?a:Oa(l,a),fi(e,n),n.tag=1,Gl(l)?(e=!0,na(n)):e=!1,Wa(n,r),su(n,l,a),fu(n,l,a,r),Yo(null,n,l,!0,e,r);case 19:return ci(e,n,r);case 22:return jo(e,n,r)}throw Error(t(156,n.tag))};var Sc="function"==typeof reportError?reportError:function(e){console.error(e)};function xc(e){this._internalRoot=e}function Ec(e){this._internalRoot=e}function Cc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Nc(){}function Pc(e,n,t,r,l){if(l){if("function"==typeof r){var a=r;r=function(){var e=yc(u);a.call(e)}}var u=gc(n,r,e,0,null,!1,!1,"",Nc);return e._reactRootContainer=u,e[Fl]=u.current,ol(8===e.nodeType?e.parentNode:e),Ds(),u}for(;l=e.lastChild;)e.removeChild(l);if("function"==typeof r){var o=r;r=function(){var e=yc(i);o.call(e)}}var i=pc(e,0,!1,null,null,!1,!1,"",Nc);return e._reactRootContainer=i,e[Fl]=i.current,ol(8===e.nodeType?e.parentNode:e),Ds(function(){vc(n,i,t,r)}),i}function _c(e,n,t,r,l){var a=t._reactRootContainer;if(a){var u=a;if("function"==typeof l){var o=l;l=function(){var e=yc(u);o.call(e)}}vc(n,u,e,l)}else u=Pc(t,n,e,l,r);return yc(u)}Ec.prototype.render=xc.prototype.render=function(e){var n=this._internalRoot;if(null===n)throw Error(t(409));vc(e,n,null,null)},Ec.prototype.unmount=xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var n=e.containerInfo;Ds(function(){vc(null,e,null,null)}),n[Fl]=null}},Ec.prototype.unstable_scheduleHydration=function(e){if(e){var n=Tn();e={blockedOn:null,target:e,priority:n};for(var t=0;t<An.length&&0!==n&&n<An[t].priority;t++);An.splice(t,0,e),0===t&&jn(e)}},Pn=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var t=gn(n.pendingLanes);0!==t&&(Cn(n,1|t),Ns(n,Je()),0==(6&Zi)&&(ds=Je()+500,ia()))}break;case 13:Ds(function(){var n=Ya(e,1);if(null!==n){var t=Es();zs(n,e,1,t)}}),kc(e,1)}},_n=function(e){if(13===e.tag){var n=Ya(e,134217728);if(null!==n)zs(n,e,134217728,Es());kc(e,134217728)}},Ln=function(e){if(13===e.tag){var n=Cs(e),t=Ya(e,n);if(null!==t)zs(t,e,n,Es());kc(e,n)}},Tn=function(){return zn},Mn=function(e,n){var t=zn;try{return zn=e,n()}finally{zn=t}},Se=function(e,n,r){switch(n){case"input":if(J(e,r),n=r.name,"radio"===r.type&&null!=n){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<r.length;n++){var l=r[n];if(l!==e&&l.form===e.form){var a=Al(l);if(!a)throw Error(t(90));K(l),J(l,a)}}}break;case"textarea":ue(e,r);break;case"select":null!=(n=r.value)&&re(e,!!r.multiple,n,!1)}},Pe=Rs,_e=Ds;var Lc={usingClientEntryPoint:!1,Events:[Ul,Vl,Al,ze,Ne,Rs]},Tc={findFiberByHostInstance:Il,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Mc={bundleType:Tc.bundleType,version:Tc.version,rendererPackageName:Tc.rendererPackageName,rendererConfig:Tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:Tc.findFiberByHostInstance||wc,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fc.isDisabled&&Fc.supportsFiber)try{un=Fc.inject(Mc),on=Fc}catch(Rc){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lc,exports.createPortal=function(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Cc(n))throw Error(t(200));return mc(e,n,null,r)},exports.createRoot=function(e,n){if(!Cc(e))throw Error(t(299));var r=!1,l="",a=Sc;return null!=n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(l=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),n=pc(e,1,!1,null,null,r,!1,l,a),e[Fl]=n.current,ol(8===e.nodeType?e.parentNode:e),new xc(n)},exports.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var n=e._reactInternals;if(void 0===n){if("function"==typeof e.render)throw Error(t(188));throw e=Object.keys(e).join(","),Error(t(268,e))}return e=null===(e=qe(n))?null:e.stateNode},exports.flushSync=function(e){return Ds(e)},exports.hydrate=function(e,n,r){if(!zc(n))throw Error(t(200));return _c(null,e,n,!0,r)},exports.hydrateRoot=function(e,n,r){if(!Cc(e))throw Error(t(405));var l=null!=r&&r.hydratedSources||null,a=!1,u="",o=Sc;if(null!=r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(u=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),n=gc(n,null,e,1,null!=r?r:null,a,!1,u,o),e[Fl]=n.current,ol(e),l)for(e=0;e<l.length;e++)a=(a=(r=l[e])._getVersion)(r._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[r,a]:n.mutableSourceEagerHydrationData.push(r,a);return new Ec(n)},exports.render=function(e,n,r){if(!zc(n))throw Error(t(200));return _c(null,e,n,!1,r)},exports.unmountComponentAtNode=function(e){if(!zc(e))throw Error(t(40));return!!e._reactRootContainer&&(Ds(function(){_c(null,null,e,!1,function(){e._reactRootContainer=null,e[Fl]=null})}),!0)},exports.unstable_batchedUpdates=Rs,exports.unstable_renderSubtreeIntoContainer=function(e,n,r,l){if(!zc(r))throw Error(t(200));if(null==e||void 0===e._reactInternals)throw Error(t(38));return _c(e,n,r,!1,l)},exports.version="18.2.0-next-9e3b772b8-20220608";
},{"react":"n8MK","scheduler":"MDSO"}],"NKHc":[function(require,module,exports) {
"use strict";function _(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(O){console.error(O)}}}_(),module.exports=require("./cjs/react-dom.production.min.js");
},{"./cjs/react-dom.production.min.js":"i17t"}],"NdAl":[function(require,module,exports) {
"use strict";var t,e=require("react-dom");exports.createRoot=e.createRoot,exports.hydrateRoot=e.hydrateRoot;
},{"react-dom":"NKHc"}],"uEEO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useCallbackRef=r;var e=require("react");function r(r){const t=(0,e.useRef)(r);return(0,e.useEffect)(()=>{t.current=r}),(0,e.useMemo)(()=>(...e)=>{var r;return null==(r=t.current)?void 0:r.call(t,...e)},[])}
},{"react":"n8MK"}],"jLxI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useDebounceCallback=u;var e=require("react"),r=require("../use-callback-ref/use-callback-ref.mjs");function u(u,c){const t=(0,r.useCallbackRef)(u),a=(0,e.useRef)(0);return(0,e.useEffect)(()=>()=>window.clearTimeout(a.current),[]),(0,e.useCallback)(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(t,c)},[t,c])}
},{"react":"n8MK","../use-callback-ref/use-callback-ref.mjs":"uEEO"}],"NIoC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useClickOutside=r;var e=require("react");const t=["mousedown","touchstart"];function r(r,n,o){const s=(0,e.useRef)();return(0,e.useEffect)(()=>{const e=e=>{const{target:t}=null!=e?e:{};if(Array.isArray(o)){const n=(null==t?void 0:t.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(t)&&"HTML"!==t.tagName;o.every(t=>!!t&&!e.composedPath().includes(t))&&!n&&r()}else s.current&&!s.current.contains(t)&&r()};return(n||t).forEach(t=>document.addEventListener(t,e)),()=>{(n||t).forEach(t=>document.removeEventListener(t,e))}},[s,r,o]),s}
},{"react":"n8MK"}],"DhuU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useClipboard=t;var e=require("react");function t({timeout:t=2e3}={}){const[r,o]=(0,e.useState)(null),[i,a]=(0,e.useState)(!1),[u,n]=(0,e.useState)(null);return{copy:e=>{"clipboard"in navigator?navigator.clipboard.writeText(e).then(()=>(e=>{window.clearTimeout(u),n(window.setTimeout(()=>a(!1),t)),a(e)})(!0)).catch(e=>o(e)):o(new Error("useClipboard: navigator.clipboard is not supported"))},reset:()=>{a(!1),o(null),window.clearTimeout(u)},error:r,copied:i}}
},{"react":"n8MK"}],"SQyg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useMediaQuery=r;var e=require("react");function t(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch(n){return e.addListener(t),()=>e.removeListener(t)}}function n(e,t){return"boolean"==typeof t?t:"undefined"!=typeof window&&"matchMedia"in window&&window.matchMedia(e).matches}function r(r,i,{getInitialValueInEffect:a}={getInitialValueInEffect:!0}){const[c,u]=(0,e.useState)(a?i:n(r,i)),o=(0,e.useRef)();return(0,e.useEffect)(()=>{if("matchMedia"in window)return o.current=window.matchMedia(r),u(o.current.matches),t(o.current,e=>u(e.matches))},[r]),c}
},{"react":"n8MK"}],"z5Pg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useColorScheme=r;var e=require("../use-media-query/use-media-query.mjs");function r(r,u){return(0,e.useMediaQuery)("(prefers-color-scheme: dark)","dark"===r,u)?"dark":"light"}
},{"../use-media-query/use-media-query.mjs":"SQyg"}],"gRCK":[function(require,module,exports) {
"use strict";function t(t,e,i){return void 0===e&&void 0===i?t:void 0!==e&&void 0===i?Math.max(t,e):void 0===e&&void 0!==i?Math.min(t,i):Math.min(Math.max(t,e),i)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.clamp=t;
},{}],"WitE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useCounter=m;var e=require("react"),r=require("../utils/clamp/clamp.mjs"),t=Object.defineProperty,a=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(e,r,a)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,l=(e,r)=>{for(var t in r||(r={}))c.call(r,t)&&o(e,t,r[t]);if(a)for(var t of a(r))n.call(r,t)&&o(e,t,r[t]);return e};const p={min:-1/0,max:1/0};function m(t=0,a){const{min:c,max:n}=l(l({},p),a),[o,m]=(0,e.useState)((0,r.clamp)(t,c,n));return[o,{increment:()=>m(e=>(0,r.clamp)(e+1,c,n)),decrement:()=>m(e=>(0,r.clamp)(e-1,c,n)),set:e=>m((0,r.clamp)(e,c,n)),reset:()=>m((0,r.clamp)(t,c,n))}]}
},{"react":"n8MK","../utils/clamp/clamp.mjs":"gRCK"}],"CVfW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useDebouncedState=t;var e=require("react");function t(t,r,u={leading:!1}){const[n,c]=(0,e.useState)(t),s=(0,e.useRef)(null),a=(0,e.useRef)(!0),i=()=>window.clearTimeout(s.current);return(0,e.useEffect)(()=>i,[]),[n,(0,e.useCallback)(e=>{i(),a.current&&u.leading?c(e):s.current=window.setTimeout(()=>{a.current=!0,c(e)},r),a.current=!1},[u.leading])]}
},{"react":"n8MK"}],"IhWr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useDebouncedValue=r;var e=require("react");function r(r,u,t={leading:!1}){const[n,c]=(0,e.useState)(r),s=(0,e.useRef)(!1),i=(0,e.useRef)(null),o=(0,e.useRef)(!1),a=()=>window.clearTimeout(i.current);return(0,e.useEffect)(()=>{s.current&&(!o.current&&t.leading?(o.current=!0,c(r)):(a(),i.current=window.setTimeout(()=>{o.current=!1,c(r)},u)))},[r,t.leading,u]),(0,e.useEffect)(()=>(s.current=!0,a),[]),[n,a]}
},{"react":"n8MK"}],"e2JD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useIsomorphicEffect=void 0;var e=require("react");const t=exports.useIsomorphicEffect="undefined"!=typeof document?e.useLayoutEffect:e.useEffect;
},{"react":"n8MK"}],"ruHt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useDocumentTitle=t;var e=require("../use-isomorphic-effect/use-isomorphic-effect.mjs");function t(t){(0,e.useIsomorphicEffect)(()=>{"string"==typeof t&&t.trim().length>0&&(document.title=t.trim())},[t])}
},{"../use-isomorphic-effect/use-isomorphic-effect.mjs":"e2JD"}],"Wa2A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useDocumentVisibility=t;var e=require("react");function t(){const[t,i]=(0,e.useState)("visible");return(0,e.useEffect)(()=>{const e=()=>i(document.visibilityState);return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[]),t}
},{"react":"n8MK"}],"NnMb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useDidUpdate=r;var e=require("react");function r(r,t){const u=(0,e.useRef)(!1);(0,e.useEffect)(()=>()=>{u.current=!1},[]),(0,e.useEffect)(()=>{if(u.current)return r();u.current=!0},t)}
},{"react":"n8MK"}],"PNXq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useFocusReturn=u;var e=require("react"),t=require("../use-did-update/use-did-update.mjs");function u({opened:u,shouldReturnFocus:r=!0}){const n=(0,e.useRef)(),o=()=>{var e;n.current&&"focus"in n.current&&"function"==typeof n.current.focus&&(null==(e=n.current)||e.focus({preventScroll:!0}))};return(0,t.useDidUpdate)(()=>{let e=-1;const t=t=>{"Tab"===t.key&&window.clearTimeout(e)};return document.addEventListener("keydown",t),u?n.current=document.activeElement:r&&(e=window.setTimeout(o,10)),()=>{window.clearTimeout(e),document.removeEventListener("keydown",t)}},[u,r]),o}
},{"react":"n8MK","../use-did-update/use-did-update.mjs":"NnMb"}],"jKv2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FOCUS_SELECTOR=void 0,exports.findTabbableDescendants=a,exports.focusable=i,exports.tabbable=u;const e=/input|select|textarea|button|object/,t=exports.FOCUS_SELECTOR="a, input, select, textarea, button, object, [tabindex]";function n(e){return"none"===e.style.display}function r(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||"hidden"===e.getAttribute("type"))return!1;let t=e;for(;t&&t!==document.body&&11!==t.nodeType;){if(n(t))return!1;t=t.parentNode}return!0}function o(e){let t=e.getAttribute("tabindex");return null===t&&(t=void 0),parseInt(t,10)}function i(t){const n=t.nodeName.toLowerCase(),i=!Number.isNaN(o(t));return(e.test(n)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||i)&&r(t)}function u(e){const t=o(e);return(Number.isNaN(t)||t>=0)&&i(e)}function a(e){return Array.from(e.querySelectorAll(t)).filter(u)}
},{}],"fFSG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scopeTab=t;var e=require("./tabbable.mjs");function t(t,n){const s=(0,e.findTabbableDescendants)(t);if(!s.length)return void n.preventDefault();const o=s[n.shiftKey?0:s.length-1],r=t.getRootNode();if(!(o===r.activeElement||t===r.activeElement))return;n.preventDefault();const a=s[n.shiftKey?s.length-1:0];a&&a.focus()}
},{"./tabbable.mjs":"jKv2"}],"B3YW":[function(require,module,exports) {
"use strict";function e(){return`mantine-${Math.random().toString(36).slice(2,11)}`}Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomId=e;
},{}],"HqYZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAriaHider=e;var t=require("../utils/random-id/random-id.mjs");function e(e,d="body > :not(script)"){const r=(0,t.randomId)(),i=Array.from(document.querySelectorAll(d)).map(t=>{var d;if((null==(d=null==t?void 0:t.shadowRoot)?void 0:d.contains(e))||t.contains(e))return;const i=t.getAttribute("aria-hidden"),a=t.getAttribute("data-hidden"),n=t.getAttribute("data-focus-id");return t.setAttribute("data-focus-id",r),null===i||"false"===i?t.setAttribute("aria-hidden","true"):a||n||t.setAttribute("data-hidden",i),{node:t,ariaHidden:a||null}});return()=>{i.forEach(t=>{t&&r===t.node.getAttribute("data-focus-id")&&(null===t.ariaHidden?t.node.removeAttribute("aria-hidden"):t.node.setAttribute("aria-hidden",t.ariaHidden),t.node.removeAttribute("data-focus-id"),t.node.removeAttribute("data-hidden"))})}}
},{"../utils/random-id/random-id.mjs":"B3YW"}],"xIb7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useFocusTrap=n;var e=require("react"),r=require("./tabbable.mjs"),t=require("./scope-tab.mjs"),u=require("./create-aria-hider.mjs");function n(n=!0){const c=(0,e.useRef)(),o=(0,e.useRef)(null),s=e=>{let t=e.querySelector("[data-autofocus]");if(!t){const u=Array.from(e.querySelectorAll(r.FOCUS_SELECTOR));!(t=u.find(r.tabbable)||u.find(r.focusable)||null)&&(0,r.focusable)(e)&&(t=e)}t&&t.focus({preventScroll:!0})},a=(0,e.useCallback)(e=>{n&&(null!==e?(o.current=(0,u.createAriaHider)(e),c.current!==e&&(e?(setTimeout(()=>{e.getRootNode()&&s(e)}),c.current=e):c.current=null)):o.current&&(o.current(),o.current=null))},[n]);return(0,e.useEffect)(()=>{if(!n)return;c.current&&setTimeout(()=>s(c.current));const e=e=>{"Tab"===e.key&&c.current&&(0,t.scopeTab)(c.current,e)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e),o.current&&o.current()}},[n]),a}
},{"react":"n8MK","./tabbable.mjs":"jKv2","./scope-tab.mjs":"fFSG","./create-aria-hider.mjs":"HqYZ"}],"zItY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useForceUpdate=t;var e=require("react");const r=e=>(e+1)%1e6;function t(){const[,t]=(0,e.useReducer)(r,0);return t}
},{"react":"n8MK"}],"ICkF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useReactId=u;var e=t(require("react"));function t(e){return e&&e.__esModule?e:{default:e}}const r=e.default["useId".toString()]||(()=>void 0);function u(){const e=r();return e?`mantine-${e.replace(/:/g,"")}`:""}
},{"react":"n8MK"}],"xUHD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useId=i;var e=require("react"),r=require("../use-isomorphic-effect/use-isomorphic-effect.mjs"),s=require("./use-react-id.mjs"),t=require("../utils/random-id/random-id.mjs");function i(i){const o=(0,s.useReactId)(),[u,d]=(0,e.useState)(o);return(0,r.useIsomorphicEffect)(()=>{d((0,t.randomId)())},[]),"string"==typeof i?i:"undefined"==typeof window?o:u}
},{"react":"n8MK","../use-isomorphic-effect/use-isomorphic-effect.mjs":"e2JD","./use-react-id.mjs":"ICkF","../utils/random-id/random-id.mjs":"B3YW"}],"m563":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useIdle=a;var e=require("react"),t=Object.defineProperty,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,c=(e,r,o)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,u=(e,t)=>{for(var u in t||(t={}))o.call(t,u)&&c(e,u,t[u]);if(r)for(var u of r(t))n.call(t,u)&&c(e,u,t[u]);return e};const s=["keypress","mousemove","touchmove","click","scroll"],i={events:s,initialState:!0};function a(t,r){const{events:o,initialState:n}=u(u({},i),r),[c,s]=(0,e.useState)(n),a=(0,e.useRef)();return(0,e.useEffect)(()=>{const e=()=>{s(!1),a.current&&window.clearTimeout(a.current),a.current=window.setTimeout(()=>{s(!0)},t)};return o.forEach(t=>document.addEventListener(t,e)),()=>{o.forEach(t=>document.removeEventListener(t,e))}},[t]),c}
},{"react":"n8MK"}],"co0l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useInterval=t;var e=require("react");function t(t,r){const[n,u]=(0,e.useState)(!1),c=(0,e.useRef)(),s=(0,e.useRef)();(0,e.useEffect)(()=>{s.current=t},[t]);const o=()=>{u(e=>(e||c.current||(c.current=window.setInterval(s.current,r)),!0))},a=()=>{u(!1),window.clearInterval(c.current),c.current=void 0};return{start:o,stop:a,toggle:()=>{n?a():o()},active:n}}
},{"react":"n8MK"}],"N1FP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useListState=a;var e=require("react"),t=Object.defineProperty,r=Object.defineProperties,o=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,c=(e,r,o)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,i=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&c(e,r,t[r]);if(p)for(var r of p(t))n.call(t,r)&&c(e,r,t[r]);return e},l=(e,t)=>r(e,o(t));function a(t=[]){const[r,o]=(0,e.useState)(t);return[r,{setState:o,append:(...e)=>o(t=>[...t,...e]),prepend:(...e)=>o(t=>[...e,...t]),insert:(e,...t)=>o(r=>[...r.slice(0,e),...t,...r.slice(e)]),pop:()=>o(e=>{const t=[...e];return t.pop(),t}),shift:()=>o(e=>{const t=[...e];return t.shift(),t}),apply:e=>o(t=>t.map((t,r)=>e(t,r))),applyWhere:(e,t)=>o(r=>r.map((r,o)=>e(r,o)?t(r,o):r)),remove:(...e)=>o(t=>t.filter((t,r)=>!e.includes(r))),reorder:({from:e,to:t})=>o(r=>{const o=[...r],p=r[e];return o.splice(e,1),o.splice(t,0,p),o}),setItem:(e,t)=>o(r=>{const o=[...r];return o[e]=t,o}),setItemProp:(e,t,r)=>o(o=>{const p=[...o];return p[e]=l(i({},p[e]),{[t]:r}),p}),filter:e=>{o(t=>t.filter(e))}}]}
},{"react":"n8MK"}],"bULJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useWindowEvent=t;var e=require("react");function t(t,r,n){(0,e.useEffect)(()=>(window.addEventListener(t,r,n),()=>window.removeEventListener(t,r,n)),[t,r])}
},{"react":"n8MK"}],"IlgY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStorage=r;var e=require("react"),t=require("../use-window-event/use-window-event.mjs");function o(e,t){try{return JSON.stringify(e)}catch(o){throw new Error(`@mantine/hooks ${t}: Failed to serialize the value`)}}function n(e){try{return JSON.parse(e)}catch(t){return e}}function a(e){return{getItem:t=>{try{return window[e].getItem(t)}catch(o){return console.warn("use-local-storage: Failed to get value from storage, localStorage is blocked"),null}},setItem:(t,o)=>{try{window[e].setItem(t,o)}catch(n){console.warn("use-local-storage: Failed to set value to storage, localStorage is blocked")}},removeItem:t=>{try{window[e].removeItem(t)}catch(o){console.warn("use-local-storage: Failed to remove value from storage, localStorage is blocked")}}}}function r(r,l){const i="localStorage"===r?"mantine-local-storage":"mantine-session-storage",{getItem:s,setItem:u,removeItem:c}=a(r);return function({key:a,defaultValue:d,getInitialValueInEffect:w=!0,deserialize:v=n,serialize:m=(e=>o(e,l))}){const g=(0,e.useCallback)(e=>{if("undefined"==typeof window||!(r in window)||null===window[r]||e)return d;const t=s(a);return null!==t?v(t):d},[a,d]),[f,y]=(0,e.useState)(g(w)),k=(0,e.useCallback)(e=>{e instanceof Function?y(t=>{const o=e(t);return u(a,m(o)),window.dispatchEvent(new CustomEvent(i,{detail:{key:a,value:e(t)}})),o}):(u(a,m(e)),window.dispatchEvent(new CustomEvent(i,{detail:{key:a,value:e}})),y(e))},[a]),E=(0,e.useCallback)(()=>{c(a),window.dispatchEvent(new CustomEvent(i,{detail:{key:a,value:d}}))},[]);return(0,t.useWindowEvent)("storage",e=>{var t;e.storageArea===window[r]&&e.key===a&&y(v(null!=(t=e.newValue)?t:void 0))}),(0,t.useWindowEvent)(i,e=>{e.detail.key===a&&y(e.detail.value)}),(0,e.useEffect)(()=>{void 0!==d&&void 0===f&&k(d)},[d,f,k]),(0,e.useEffect)(()=>{w&&y(g())},[]),[void 0===f?d:f,k,E]}}
},{"react":"n8MK","../use-window-event/use-window-event.mjs":"bULJ"}],"Vg3T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useLocalStorage=r;var e=require("./create-storage.mjs");function r(r){return(0,e.createStorage)("localStorage","use-local-storage")(r)}
},{"./create-storage.mjs":"IlgY"}],"wX6J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useSessionStorage=s;var e=require("../use-local-storage/create-storage.mjs");function s(s){return(0,e.createStorage)("sessionStorage","use-session-storage")(s)}
},{"../use-local-storage/create-storage.mjs":"IlgY"}],"xyO4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assignRef=r,exports.mergeRefs=t,exports.useMergedRef=n;var e=require("react");function r(e,r){"function"==typeof e?e(r):"object"==typeof e&&null!==e&&"current"in e&&(e.current=r)}function t(...e){return t=>{e.forEach(e=>r(e,t))}}function n(...r){return(0,e.useCallback)(t(...r),r)}
},{"react":"n8MK"}],"Yxsw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useMouse=a;var e=require("react"),t=Object.defineProperty,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(e,r,n)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,u=(e,t)=>{for(var u in t||(t={}))n.call(t,u)&&s(e,u,t[u]);if(r)for(var u of r(t))o.call(t,u)&&s(e,u,t[u]);return e};function a(t={resetOnExit:!1}){const[r,n]=(0,e.useState)({x:0,y:0}),o=(0,e.useRef)(),s=e=>{if(o.current){const t=e.currentTarget.getBoundingClientRect(),r=Math.max(0,Math.round(e.pageX-t.left-(window.pageXOffset||window.scrollX))),o=Math.max(0,Math.round(e.pageY-t.top-(window.pageYOffset||window.scrollY)));n({x:r,y:o})}else n({x:e.clientX,y:e.clientY})},a=()=>n({x:0,y:0});return(0,e.useEffect)(()=>{const e=(null==o?void 0:o.current)?o.current:document;return e.addEventListener("mousemove",s),t.resetOnExit&&e.addEventListener("mouseleave",a),()=>{e.removeEventListener("mousemove",s),t.resetOnExit&&e.removeEventListener("mouseleave",a)}},[o.current]),u({ref:o},r)}
},{"react":"n8MK"}],"oymV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clampUseMovePosition=void 0,exports.useMove=r;var e=require("react"),t=require("../utils/clamp/clamp.mjs");const n=e=>({x:(0,t.clamp)(e.x,0,1),y:(0,t.clamp)(e.y,0,1)});function r(n,r,u="ltr"){const c=(0,e.useRef)(null),o=(0,e.useRef)(!1),s=(0,e.useRef)(!1),i=(0,e.useRef)(0),[a,l]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{o.current=!0},[]),(0,e.useEffect)(()=>{var e,a;const m=({x:e,y:r})=>{cancelAnimationFrame(i.current),i.current=requestAnimationFrame(()=>{if(o.current&&c.current){c.current.style.userSelect="none";const o=c.current.getBoundingClientRect();if(o.width&&o.height){const c=(0,t.clamp)((e-o.left)/o.width,0,1);n({x:"ltr"===u?c:1-c,y:(0,t.clamp)((r-o.top)/o.height,0,1)})}}})},d=()=>{!s.current&&o.current&&(s.current=!0,"function"==typeof(null==r?void 0:r.onScrubStart)&&r.onScrubStart(),l(!0),document.addEventListener("mousemove",f),document.addEventListener("mouseup",v),document.addEventListener("touchmove",E),document.addEventListener("touchend",v))},v=()=>{s.current&&o.current&&(s.current=!1,l(!1),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",v),document.removeEventListener("touchmove",E),document.removeEventListener("touchend",v),setTimeout(()=>{"function"==typeof(null==r?void 0:r.onScrubEnd)&&r.onScrubEnd()},0))},p=e=>{d(),e.preventDefault(),f(e)},f=e=>m({x:e.clientX,y:e.clientY}),h=e=>{e.cancelable&&e.preventDefault(),d(),E(e)},E=e=>{e.cancelable&&e.preventDefault(),m({x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY})};return null==(e=c.current)||e.addEventListener("mousedown",p),null==(a=c.current)||a.addEventListener("touchstart",h,{passive:!1}),()=>{c.current&&(c.current.removeEventListener("mousedown",p),c.current.removeEventListener("touchstart",h))}},[u,n]),{ref:c,active:a}}exports.clampUseMovePosition=n;
},{"react":"n8MK","../utils/clamp/clamp.mjs":"gRCK"}],"RAjn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useUncontrolled=t;var e=require("react");function t({value:t,defaultValue:u,finalValue:r,onChange:l=(()=>{})}){const[n,o]=(0,e.useState)(void 0!==u?u:r);return void 0!==t?[t,l,!0]:[n,e=>{o(e),null==l||l(e)},!1]}
},{"react":"n8MK"}],"Pzuz":[function(require,module,exports) {
"use strict";function e(e,r){const t=r-e+1;return Array.from({length:t},(r,t)=>t+e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.range=e;
},{}],"WurF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DOTS=void 0,exports.usePagination=a;var e=require("react"),n=require("../use-uncontrolled/use-uncontrolled.mjs"),r=require("../utils/range/range.mjs");const t=exports.DOTS="dots";function a({total:a,siblings:s=1,boundaries:o=1,page:u,initialPage:i=1,onChange:g}){const l=Math.max(Math.trunc(a),0),[c,d]=(0,n.useUncontrolled)({value:u,onChange:g,defaultValue:i,finalValue:i}),f=e=>{d(e<=0?1:e>l?l:e)};return{range:(0,e.useMemo)(()=>{if(2*s+3+2*o>=l)return(0,r.range)(1,l);const e=Math.max(c-s,o),n=Math.min(c+s,l-o),a=e>o+2,u=n<l-(o+1);if(!a&&u){const e=2*s+o+2;return[...(0,r.range)(1,e),t,...(0,r.range)(l-(o-1),l)]}if(a&&!u){const e=o+1+2*s;return[...(0,r.range)(1,o),t,...(0,r.range)(l-e,l)]}return[...(0,r.range)(1,o),t,...(0,r.range)(e,n),t,...(0,r.range)(l-o+1,l)]},[l,s,c]),active:c,setPage:f,next:()=>f(c+1),previous:()=>f(c-1),first:()=>f(1),last:()=>f(l)}}
},{"react":"n8MK","../use-uncontrolled/use-uncontrolled.mjs":"RAjn","../utils/range/range.mjs":"Pzuz"}],"W5y0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useQueue=t;var e=require("react");function t({initialValues:t=[],limit:u}){const[{state:s,queue:a},i]=(0,e.useState)({state:t.slice(0,u),queue:t.slice(u)});return{state:s,queue:a,add:(...e)=>i(t=>{const s=[...t.state,...t.queue,...e];return{state:s.slice(0,u),queue:s.slice(u)}}),update:e=>i(t=>{const s=e([...t.state,...t.queue]);return{state:s.slice(0,u),queue:s.slice(u)}}),cleanQueue:()=>i(e=>({state:e.state,queue:[]}))}}
},{"react":"n8MK"}],"A5EZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.usePageLeave=t;var e=require("react");function t(t){(0,e.useEffect)(()=>(document.documentElement.addEventListener("mouseleave",t),()=>document.documentElement.removeEventListener("mouseleave",t)),[])}
},{"react":"n8MK"}],"FViy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useReducedMotion=r;var e=require("../use-media-query/use-media-query.mjs");function r(r,u){return(0,e.useMediaQuery)("(prefers-reduced-motion: reduce)",r,u)}
},{"../use-media-query/use-media-query.mjs":"SQyg"}],"FjwJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.easeInOutQuad=void 0;const e=e=>e<.5?2*e*e:(4-2*e)*e-1;exports.easeInOutQuad=e;
},{}],"AF2t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getRelativePosition=void 0;const t=({axis:t,target:e,parent:n,alignment:i,offset:r,isList:o})=>{if(!e||!n&&"undefined"==typeof document)return 0;const s=!!n,d=(n||document.body).getBoundingClientRect(),c=e.getBoundingClientRect(),u=t=>c[t]-d[t];if("y"===t){const t=u("top");if(0===t)return 0;if("start"===i){const e=t-r;return e<=c.height*(o?0:1)||!o?e:0}const e=s?d.height:window.innerHeight;if("end"===i){const n=t+r-e+c.height;return n>=-c.height*(o?0:1)||!o?n:0}return"center"===i?t-e/2+c.height/2:0}if("x"===t){const t=u("left");if(0===t)return 0;if("start"===i){const e=t-r;return e<=c.width||!o?e:0}const e=s?d.width:window.innerWidth;if("end"===i){const n=t+r-e+c.width;return n>=-c.width||!o?n:0}return"center"===i?t-e/2+c.width/2:0}return 0};exports.getRelativePosition=t;
},{}],"IwQ5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getScrollStart=void 0;const e=({axis:e,parent:t})=>{if(!t&&"undefined"==typeof document)return 0;const o="y"===e?"scrollTop":"scrollLeft";if(t)return t[o];const{body:r,documentElement:n}=document;return r[o]+n[o]};exports.getScrollStart=e;
},{}],"chjo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setScrollParam=void 0;const e=({axis:e,parent:t,distance:o})=>{if(!t&&"undefined"==typeof document)return;const s="y"===e?"scrollTop":"scrollLeft";if(t)t[s]=o;else{const{body:e,documentElement:t}=document;e[s]=o,t[s]=o}};exports.setScrollParam=e;
},{}],"RSJ8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useScrollIntoView=c;var e=require("react"),r=require("../use-reduced-motion/use-reduced-motion.mjs"),t=require("../use-window-event/use-window-event.mjs"),n=require("./utils/ease-in-out-quad.mjs"),s=require("./utils/get-relative-position.mjs"),u=require("./utils/get-scroll-start.mjs"),i=require("./utils/set-scroll-param.mjs");function c({duration:c=1250,axis:o="y",onScrollFinish:a,easing:l=n.easeInOutQuad,offset:f=0,cancelable:m=!0,isList:d=!1}={}){const p=(0,e.useRef)(0),v=(0,e.useRef)(0),w=(0,e.useRef)(!1),g=(0,e.useRef)(null),q=(0,e.useRef)(null),R=(0,r.useReducedMotion)(),j=()=>{p.current&&cancelAnimationFrame(p.current)},x=(0,e.useCallback)(({alignment:e="start"}={})=>{var r;w.current=!1,p.current&&j();const t=null!=(r=(0,u.getScrollStart)({parent:g.current,axis:o}))?r:0,n=(0,s.getRelativePosition)({parent:g.current,target:q.current,axis:o,alignment:e,offset:f,isList:d})-(g.current?0:t);!function e(){0===v.current&&(v.current=performance.now());const r=performance.now()-v.current,s=R||0===c?1:r/c,u=t+n*l(s);(0,i.setScrollParam)({parent:g.current,axis:o,distance:u}),!w.current&&s<1?p.current=requestAnimationFrame(e):("function"==typeof a&&a(),v.current=0,p.current=0,j())}()},[o,c,l,d,f,a,R]),S=()=>{m&&(w.current=!0)};return(0,t.useWindowEvent)("wheel",S,{passive:!0}),(0,t.useWindowEvent)("touchmove",S,{passive:!0}),(0,e.useEffect)(()=>j,[]),{scrollableRef:g,targetRef:q,scrollIntoView:x,cancel:j}}
},{"react":"n8MK","../use-reduced-motion/use-reduced-motion.mjs":"FViy","../use-window-event/use-window-event.mjs":"bULJ","./utils/ease-in-out-quad.mjs":"FjwJ","./utils/get-relative-position.mjs":"AF2t","./utils/get-scroll-start.mjs":"IwQ5","./utils/set-scroll-param.mjs":"chjo"}],"OuTe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useElementSize=n,exports.useResizeObserver=r;var e=require("react");const t={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function r(){const r=(0,e.useRef)(0),n=(0,e.useRef)(null),[u,c]=(0,e.useState)(t),i=(0,e.useMemo)(()=>"undefined"!=typeof window?new ResizeObserver(e=>{const t=e[0];t&&(cancelAnimationFrame(r.current),r.current=requestAnimationFrame(()=>{n.current&&c(t.contentRect)}))}):null,[]);return(0,e.useEffect)(()=>(n.current&&(null==i||i.observe(n.current)),()=>{null==i||i.disconnect(),r.current&&cancelAnimationFrame(r.current)}),[n.current]),[n,u]}function n(){const[e,{width:t,height:n}]=r();return{ref:e,width:t,height:n}}
},{"react":"n8MK"}],"Otj8":[function(require,module,exports) {
"use strict";function e(e,t){if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;const n=Object.keys(e),{length:r}=n;if(r!==Object.keys(t).length)return!1;for(let s=0;s<r;s+=1){const r=n[s];if(!(r in t))return!1;if(e[r]!==t[r])return!1}return!0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shallowEqual=e;
},{}],"kSiG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useShallowEffect=n;var e=require("react"),r=require("../utils/shallow-equal/shallow-equal.mjs");function t(e,t){if(!e||!t)return!1;if(e===t)return!0;if(e.length!==t.length)return!1;for(let u=0;u<e.length;u+=1)if(!(0,r.shallowEqual)(e[u],t[u]))return!1;return!0}function u(r){const u=(0,e.useRef)([]),n=(0,e.useRef)(0);return t(u.current,r)||(u.current=r,n.current+=1),[n.current]}function n(r,t){(0,e.useEffect)(r,u(t))}
},{"react":"n8MK","../utils/shallow-equal/shallow-equal.mjs":"Otj8"}],"pKux":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useToggle=t;var e=require("react");function t(t=[!1,!0]){const[[r],c]=(0,e.useReducer)((e,t)=>{const r=t instanceof Function?t(e[0]):t,c=Math.abs(e.indexOf(r));return e.slice(c).concat(e.slice(0,c))},t);return[r,c]}
},{"react":"n8MK"}],"kVpu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useViewportSize=n;var e=require("react"),t=require("../use-window-event/use-window-event.mjs");const i={passive:!0};function n(){const[n,s]=(0,e.useState)({width:0,height:0}),r=(0,e.useCallback)(()=>{s({width:window.innerWidth||0,height:window.innerHeight||0})},[]);return(0,t.useWindowEvent)("resize",r,i),(0,t.useWindowEvent)("orientationchange",r,i),(0,e.useEffect)(r,[]),n}
},{"react":"n8MK","../use-window-event/use-window-event.mjs":"bULJ"}],"rgVe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useWindowScroll=i;var e=require("react"),n=require("../use-window-event/use-window-event.mjs");function o(){return"undefined"!=typeof window?{x:window.pageXOffset,y:window.pageYOffset}:{x:0,y:0}}function t({x:e,y:n}){if("undefined"!=typeof window){const o={behavior:"smooth"};"number"==typeof e&&(o.left=e),"number"==typeof n&&(o.top=n),window.scrollTo(o)}}function i(){const[i,r]=(0,e.useState)({x:0,y:0});return(0,n.useWindowEvent)("scroll",()=>r(o())),(0,n.useWindowEvent)("resize",()=>r(o())),(0,e.useEffect)(()=>{r(o())},[]),[i,t]}
},{"react":"n8MK","../use-window-event/use-window-event.mjs":"bULJ"}],"vyJT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useIntersection=r;var e=require("react");function r(r){const[n,t]=(0,e.useState)(null),u=(0,e.useRef)(null);return{ref:(0,e.useCallback)(e=>{u.current&&(u.current.disconnect(),u.current=null),null!==e?(u.current=new IntersectionObserver(([e])=>{t(e)},r),u.current.observe(e)):t(null)},[null==r?void 0:r.rootMargin,null==r?void 0:r.root,null==r?void 0:r.threshold]),entry:n}}
},{"react":"n8MK"}],"gP0V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useHash=s;var e=require("react"),t=require("../use-window-event/use-window-event.mjs");function s(){const[s,n]=(0,e.useState)("");return(0,t.useWindowEvent)("hashchange",()=>{const e=window.location.hash;s!==e&&n(s)}),(0,e.useEffect)(()=>{n(window.location.hash)},[]),[s,e=>{const t=e.startsWith("#")?e:`#${e}`;window.location.hash=t,n(t)}]}
},{"react":"n8MK","../use-window-event/use-window-event.mjs":"bULJ"}],"M6M1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getHotkeyHandler=p,exports.getHotkeyMatcher=f,exports.parseHotkey=c;var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(t,r,o)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,l=(e,t)=>{for(var r in t||(t={}))n.call(t,r)&&i(e,r,t[r]);if(o)for(var r of o(t))a.call(t,r)&&i(e,r,t[r]);return e},s=(e,o)=>t(e,r(o));function c(e){const t=e.toLowerCase().split("+").map(e=>e.trim()),r={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},o=["alt","ctrl","meta","shift","mod"],n=t.find(e=>!o.includes(e));return s(l({},r),{key:n})}function u(e,t){const{alt:r,ctrl:o,meta:n,mod:a,shift:i,key:l}=e,{altKey:s,ctrlKey:c,metaKey:u,shiftKey:f,key:p}=t;if(r!==s)return!1;if(a){if(!c&&!u)return!1}else{if(o!==c)return!1;if(n!==u)return!1}return i===f&&!(!l||p.toLowerCase()!==l.toLowerCase()&&t.code.replace("Key","").toLowerCase()!==l.toLowerCase())}function f(e){return t=>u(c(e),t)}function p(e){return t=>{const r="nativeEvent"in t?t.nativeEvent:t;e.forEach(([e,o,n={preventDefault:!0}])=>{f(e)(r)&&(n.preventDefault&&t.preventDefault(),o(r))})}}
},{}],"LbWa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"getHotkeyHandler",{enumerable:!0,get:function(){return t.getHotkeyHandler}}),exports.useHotkeys=r;var e=require("react"),t=require("./parse-hotkey.mjs");function n(e,t,n=!1){return!(e.target instanceof HTMLElement)||(n?!t.includes(e.target.tagName):!e.target.isContentEditable&&!t.includes(e.target.tagName))}function r(r,o=["INPUT","TEXTAREA","SELECT"],a=!1){(0,e.useEffect)(()=>{const e=e=>{r.forEach(([r,u,c={preventDefault:!0}])=>{(0,t.getHotkeyMatcher)(r)(e)&&n(e,o,a)&&(c.preventDefault&&e.preventDefault(),u(e))})};return document.documentElement.addEventListener("keydown",e),()=>document.documentElement.removeEventListener("keydown",e)},[r])}
},{"react":"n8MK","./parse-hotkey.mjs":"M6M1"}],"XBBT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useFullscreen=c;var e=require("react");function n(){const e=window.document;return e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement}async function l(){const e=window.document;return"function"==typeof e.exitFullscreen?e.exitFullscreen():"function"==typeof e.msExitFullscreen?e.msExitFullscreen():"function"==typeof e.webkitExitFullscreen?e.webkitExitFullscreen():"function"==typeof e.mozCancelFullScreen?e.mozCancelFullScreen():null}async function r(e){var n,l,r,t,u;const c=e;return(null==(n=c.requestFullscreen)?void 0:n.call(c))||(null==(l=c.msRequestFullscreen)?void 0:l.call(c))||(null==(r=c.webkitEnterFullscreen)?void 0:r.call(c))||(null==(t=c.webkitRequestFullscreen)?void 0:t.call(c))||(null==(u=c.mozRequestFullscreen)?void 0:u.call(c))}const t=["","webkit","moz","ms"];function u(e,{onFullScreen:n,onError:l}){return t.forEach(r=>{e.addEventListener(`${r}fullscreenchange`,n),e.addEventListener(`${r}fullscreenerror`,l)}),()=>{t.forEach(r=>{e.removeEventListener(`${r}fullscreenchange`,n),e.removeEventListener(`${r}fullscreenerror`,l)})}}function c(){const[t,c]=(0,e.useState)(!1),o=(0,e.useRef)(),s=(0,e.useCallback)(e=>{c(e.target===n())},[c]),i=(0,e.useCallback)(e=>{c(!1),console.error(`[@mantine/hooks] use-fullscreen: Error attempting full-screen mode method: ${e} (${e.target})`)},[c]),a=(0,e.useCallback)(async()=>{n()?await l():await r(o.current)},[]),m=(0,e.useCallback)(e=>{o.current=null===e?window.document.documentElement:e},[]);return(0,e.useEffect)(()=>!o.current&&window.document?(o.current=window.document.documentElement,u(o.current,{onFullScreen:s,onError:i})):o.current?u(o.current,{onFullScreen:s,onError:i}):void 0,[]),{ref:m,toggle:a,fullscreen:t}}
},{"react":"n8MK"}],"UlOS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useLogger=o;var e=require("react"),u=require("../use-did-update/use-did-update.mjs");function o(o,t){return(0,e.useEffect)(()=>(console.log(`${o} mounted`,...t),()=>console.log(`${o} unmounted`)),[]),(0,u.useDidUpdate)(()=>{console.log(`${o} updated`,...t)},t),null}
},{"react":"n8MK","../use-did-update/use-did-update.mjs":"NnMb"}],"FesW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useHover=r;var e=require("react");function r(){const[r,t]=(0,e.useState)(!1),u=(0,e.useRef)(null),n=(0,e.useCallback)(()=>t(!0),[]),s=(0,e.useCallback)(()=>t(!1),[]);return(0,e.useEffect)(()=>{if(u.current)return u.current.addEventListener("mouseenter",n),u.current.addEventListener("mouseleave",s),()=>{var e,r;null==(e=u.current)||e.removeEventListener("mouseenter",n),null==(r=u.current)||r.removeEventListener("mouseleave",s)}},[]),{ref:u,hovered:r}}
},{"react":"n8MK"}],"cvEe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useValidatedState=t;var e=require("react");function t(t,a,u){const[r,s]=(0,e.useState)(t),[o,l]=(0,e.useState)(a(t)?t:void 0),[i,d]=(0,e.useState)("boolean"==typeof u?u:a(t));return[{value:r,lastValidValue:o,valid:i},e=>{a(e)?(l(e),d(!0)):d(!1),s(e)}]}
},{"react":"n8MK"}],"SIsa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useOs=n;var e=require("react"),t=require("../use-isomorphic-effect/use-isomorphic-effect.mjs");function i(){if("undefined"==typeof window)return"undetermined";const{userAgent:e}=window.navigator;return/(Macintosh)|(MacIntel)|(MacPPC)|(Mac68K)/i.test(e)?"macos":/(iPhone)|(iPad)|(iPod)/i.test(e)?"ios":/(Win32)|(Win64)|(Windows)|(WinCE)/i.test(e)?"windows":/Android/i.test(e)?"android":/Linux/i.test(e)?"linux":"undetermined"}function n(n={getValueInEffect:!0}){const[s,o]=(0,e.useState)(n.getValueInEffect?"undetermined":i());return(0,t.useIsomorphicEffect)(()=>{n.getValueInEffect&&o(i)},[]),s}
},{"react":"n8MK","../use-isomorphic-effect/use-isomorphic-effect.mjs":"e2JD"}],"oRNc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useSetState=c;var e=require("react"),t=Object.defineProperty,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,n=(e,r,o)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,u=(e,t)=>{for(var u in t||(t={}))o.call(t,u)&&n(e,u,t[u]);if(r)for(var u of r(t))a.call(t,u)&&n(e,u,t[u]);return e};function c(t){const[r,o]=(0,e.useState)(t);return[r,(0,e.useCallback)(e=>o(t=>u(u({},t),"function"==typeof e?e(t):e)),[])]}
},{"react":"n8MK"}],"SA6o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getInputOnChange=t,exports.useInputState=n;var e=require("react");function t(e){return t=>{if(t)if("function"==typeof t)e(t);else if("object"==typeof t&&"nativeEvent"in t){const{currentTarget:n}=t;"checkbox"===n.type?e(n.checked):e(n.value)}else e(t);else e(t)}}function n(n){const[r,u]=(0,e.useState)(n);return[r,t(u)]}
},{"react":"n8MK"}],"vu2V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useEventListener=r;var e=require("react");function r(r,t,n){const u=(0,e.useRef)();return(0,e.useEffect)(()=>{if(u.current)return u.current.addEventListener(r,t,n),()=>{var e;return null==(e=u.current)?void 0:e.removeEventListener(r,t,n)}},[t,n]),u}
},{"react":"n8MK"}],"MyoH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useDisclosure=l;var e=require("react");function l(l=!1,s){const{onOpen:u,onClose:o}=s||{},[t,r]=(0,e.useState)(l),n=(0,e.useCallback)(()=>{r(e=>e||(null==u||u(),!0))},[u]),a=(0,e.useCallback)(()=>{r(e=>e?(null==o||o(),!1):e)},[o]),c=(0,e.useCallback)(()=>{t?a():n()},[a,n,t]);return[t,{open:n,close:a,toggle:c}]}
},{"react":"n8MK"}],"yAoc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useFocusWithin=t;var e=require("react");function r(e){return e.currentTarget instanceof HTMLElement&&e.relatedTarget instanceof HTMLElement&&e.currentTarget.contains(e.relatedTarget)}function t({onBlur:t,onFocus:n}={}){const u=(0,e.useRef)(),[c,s]=(0,e.useState)(!1),o=(0,e.useRef)(!1),i=e=>{s(e),o.current=e},a=e=>{o.current||(i(!0),null==n||n(e))},f=e=>{o.current&&!r(e)&&(i(!1),null==t||t(e))};return(0,e.useEffect)(()=>{if(u.current)return u.current.addEventListener("focusin",a),u.current.addEventListener("focusout",f),()=>{var e,r;null==(e=u.current)||e.removeEventListener("focusin",a),null==(r=u.current)||r.removeEventListener("focusout",f)}},[a,f]),{ref:u,focused:c}}
},{"react":"n8MK"}],"HWS5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useNetwork=u;var e=require("react"),n=require("../use-window-event/use-window-event.mjs"),t=Object.defineProperty,o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,l=(e,n,o)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,a=(e,n)=>{for(var t in n||(n={}))i.call(n,t)&&l(e,t,n[t]);if(o)for(var t of o(n))r.call(n,t)&&l(e,t,n[t]);return e};function c(){if("undefined"==typeof navigator)return{};const e=navigator,n=e.connection||e.mozConnection||e.webkitConnection;return n?{downlink:null==n?void 0:n.downlink,downlinkMax:null==n?void 0:n.downlinkMax,effectiveType:null==n?void 0:n.effectiveType,rtt:null==n?void 0:n.rtt,saveData:null==n?void 0:n.saveData,type:null==n?void 0:n.type}:{}}function u(){const[t,o]=(0,e.useState)({online:!0}),i=(0,e.useCallback)(()=>o(e=>a(a({},e),c())),[]);return(0,n.useWindowEvent)("online",()=>o(a({online:!0},c()))),(0,n.useWindowEvent)("offline",()=>o(a({online:!1},c()))),(0,e.useEffect)(()=>{const e=navigator;if(e.connection)return o(a({online:e.onLine},c())),e.connection.addEventListener("change",i),()=>e.connection.removeEventListener("change",i)},[]),t}
},{"react":"n8MK","../use-window-event/use-window-event.mjs":"bULJ"}],"wRKy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useTimeout=r;var e=require("react");function r(r,t,u={autoInvoke:!1}){const n=(0,e.useRef)(null),o=(...e)=>{n.current||(n.current=window.setTimeout(()=>{r(e),n.current=null},t))},c=()=>{n.current&&(window.clearTimeout(n.current),n.current=null)};return(0,e.useEffect)(()=>(u.autoInvoke&&o(),c),[t]),{start:o,clear:c}}
},{"react":"n8MK"}],"BehD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useTextSelection=n;var e=require("react"),t=require("../use-force-update/use-force-update.mjs");function n(){const n=(0,t.useForceUpdate)(),[c,u]=(0,e.useState)(null),o=()=>{u(document.getSelection()),n()};return(0,e.useEffect)(()=>(u(document.getSelection()),document.addEventListener("selectionchange",o),()=>document.removeEventListener("selectionchange",o)),[]),c}
},{"react":"n8MK","../use-force-update/use-force-update.mjs":"zItY"}],"ofSp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.usePrevious=r;var e=require("react");function r(r){const t=(0,e.useRef)();return(0,e.useEffect)(()=>{t.current=r},[r]),t.current}
},{"react":"n8MK"}],"tBDX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useFavicon=c;var e=require("react"),t=require("../use-isomorphic-effect/use-isomorphic-effect.mjs");const r={ico:"image/x-icon",png:"image/png",svg:"image/svg+xml",gif:"image/gif"};function c(c){const o=(0,e.useRef)();(0,t.useIsomorphicEffect)(()=>{if(!c)return;if(!o.current){document.querySelectorAll('link[rel*="icon"]').forEach(e=>document.head.removeChild(e));const e=document.createElement("link");e.rel="shortcut icon",o.current=e,document.querySelector("head").appendChild(e)}const e=c.split(".");o.current.setAttribute("type",r[e[e.length-1].toLowerCase()]),o.current.setAttribute("href",c)},[c])}
},{"react":"n8MK","../use-isomorphic-effect/use-isomorphic-effect.mjs":"e2JD"}],"KrDz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isReleased=exports.isPinned=exports.isFixed=void 0,exports.useHeadroom=c;var e=require("react"),s=require("../use-window-scroll/use-window-scroll.mjs"),o=require("../use-isomorphic-effect/use-isomorphic-effect.mjs");const r=(e,s)=>e<=s;exports.isFixed=r;const i=(e,s)=>e<=s;exports.isPinned=i;const t=(e,s,o)=>!i(e,s)&&!r(e,o);function c({fixedAt:c=0,onPin:n,onFix:u,onRelease:l}={}){const f=(0,e.useRef)(0),[{y:d}]=(0,s.useWindowScroll)();return(0,o.useIsomorphicEffect)(()=>{i(d,f.current)&&(null==n||n())},[d,n]),(0,o.useIsomorphicEffect)(()=>{r(d,c)&&(null==u||u())},[d,c,u]),(0,o.useIsomorphicEffect)(()=>{t(d,f.current,c)&&(null==l||l())},[d,l]),(0,o.useIsomorphicEffect)(()=>{f.current=window.scrollY},[d]),!!i(d,f.current)||!!r(d,c)}exports.isReleased=t;
},{"react":"n8MK","../use-window-scroll/use-window-scroll.mjs":"rgVe","../use-isomorphic-effect/use-isomorphic-effect.mjs":"e2JD"}],"vOXq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useEyeDropper=o;var e=require("react"),r=require("../use-isomorphic-effect/use-isomorphic-effect.mjs");function o(){const[o,s]=(0,e.useState)(!1);(0,r.useIsomorphicEffect)(()=>{s("undefined"!=typeof window&&"EyeDropper"in window)},[]);const t=(0,e.useCallback)((e={})=>{if(o){return(new window.EyeDropper).open(e)}return Promise.resolve(void 0)},[o]);return{supported:o,open:t}}
},{"react":"n8MK","../use-isomorphic-effect/use-isomorphic-effect.mjs":"e2JD"}],"ymc4":[function(require,module,exports) {
"use strict";function e(e){return"string"!=typeof e?"":e.charAt(0).toLowerCase()+e.slice(1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.lowerFirst=e;
},{}],"l7Z4":[function(require,module,exports) {
"use strict";function e(e){return"string"!=typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.upperFirst=e;
},{}],"JaOZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"assignRef",{enumerable:!0,get:function(){return q.assignRef}}),Object.defineProperty(exports,"clamp",{enumerable:!0,get:function(){return se.clamp}}),Object.defineProperty(exports,"clampUseMovePosition",{enumerable:!0,get:function(){return w.clampUseMovePosition}}),Object.defineProperty(exports,"getHotkeyHandler",{enumerable:!0,get:function(){return ue.getHotkeyHandler}}),Object.defineProperty(exports,"lowerFirst",{enumerable:!0,get:function(){return ne.lowerFirst}}),Object.defineProperty(exports,"mergeRefs",{enumerable:!0,get:function(){return q.mergeRefs}}),Object.defineProperty(exports,"randomId",{enumerable:!0,get:function(){return oe.randomId}}),Object.defineProperty(exports,"range",{enumerable:!0,get:function(){return ie.range}}),Object.defineProperty(exports,"shallowEqual",{enumerable:!0,get:function(){return ce.shallowEqual}}),Object.defineProperty(exports,"upperFirst",{enumerable:!0,get:function(){return le.upperFirst}}),Object.defineProperty(exports,"useCallbackRef",{enumerable:!0,get:function(){return e.useCallbackRef}}),Object.defineProperty(exports,"useClickOutside",{enumerable:!0,get:function(){return t.useClickOutside}}),Object.defineProperty(exports,"useClipboard",{enumerable:!0,get:function(){return u.useClipboard}}),Object.defineProperty(exports,"useColorScheme",{enumerable:!0,get:function(){return s.useColorScheme}}),Object.defineProperty(exports,"useCounter",{enumerable:!0,get:function(){return n.useCounter}}),Object.defineProperty(exports,"useDebounceCallback",{enumerable:!0,get:function(){return r.useDebounceCallback}}),Object.defineProperty(exports,"useDebouncedState",{enumerable:!0,get:function(){return o.useDebouncedState}}),Object.defineProperty(exports,"useDebouncedValue",{enumerable:!0,get:function(){return i.useDebouncedValue}}),Object.defineProperty(exports,"useDidUpdate",{enumerable:!0,get:function(){return p.useDidUpdate}}),Object.defineProperty(exports,"useDisclosure",{enumerable:!0,get:function(){return J.useDisclosure}}),Object.defineProperty(exports,"useDocumentTitle",{enumerable:!0,get:function(){return c.useDocumentTitle}}),Object.defineProperty(exports,"useDocumentVisibility",{enumerable:!0,get:function(){return l.useDocumentVisibility}}),Object.defineProperty(exports,"useElementSize",{enumerable:!0,get:function(){return I.useElementSize}}),Object.defineProperty(exports,"useEventListener",{enumerable:!0,get:function(){return G.useEventListener}}),Object.defineProperty(exports,"useEyeDropper",{enumerable:!0,get:function(){return te.useEyeDropper}}),Object.defineProperty(exports,"useFavicon",{enumerable:!0,get:function(){return ee.useFavicon}}),Object.defineProperty(exports,"useFocusReturn",{enumerable:!0,get:function(){return a.useFocusReturn}}),Object.defineProperty(exports,"useFocusTrap",{enumerable:!0,get:function(){return f.useFocusTrap}}),Object.defineProperty(exports,"useFocusWithin",{enumerable:!0,get:function(){return K.useFocusWithin}}),Object.defineProperty(exports,"useForceUpdate",{enumerable:!0,get:function(){return m.useForceUpdate}}),Object.defineProperty(exports,"useFullscreen",{enumerable:!0,get:function(){return U.useFullscreen}}),Object.defineProperty(exports,"useHash",{enumerable:!0,get:function(){return T.useHash}}),Object.defineProperty(exports,"useHeadroom",{enumerable:!0,get:function(){return re.useHeadroom}}),Object.defineProperty(exports,"useHotkeys",{enumerable:!0,get:function(){return V.useHotkeys}}),Object.defineProperty(exports,"useHover",{enumerable:!0,get:function(){return Q.useHover}}),Object.defineProperty(exports,"useId",{enumerable:!0,get:function(){return d.useId}}),Object.defineProperty(exports,"useIdle",{enumerable:!0,get:function(){return b.useIdle}}),Object.defineProperty(exports,"useInputState",{enumerable:!0,get:function(){return B.useInputState}}),Object.defineProperty(exports,"useIntersection",{enumerable:!0,get:function(){return L.useIntersection}}),Object.defineProperty(exports,"useInterval",{enumerable:!0,get:function(){return j.useInterval}}),Object.defineProperty(exports,"useIsomorphicEffect",{enumerable:!0,get:function(){return g.useIsomorphicEffect}}),Object.defineProperty(exports,"useListState",{enumerable:!0,get:function(){return y.useListState}}),Object.defineProperty(exports,"useLocalStorage",{enumerable:!0,get:function(){return P.useLocalStorage}}),Object.defineProperty(exports,"useLogger",{enumerable:!0,get:function(){return W.useLogger}}),Object.defineProperty(exports,"useMediaQuery",{enumerable:!0,get:function(){return x.useMediaQuery}}),Object.defineProperty(exports,"useMergedRef",{enumerable:!0,get:function(){return q.useMergedRef}}),Object.defineProperty(exports,"useMouse",{enumerable:!0,get:function(){return v.useMouse}}),Object.defineProperty(exports,"useMove",{enumerable:!0,get:function(){return w.useMove}}),Object.defineProperty(exports,"useNetwork",{enumerable:!0,get:function(){return X.useNetwork}}),Object.defineProperty(exports,"useOs",{enumerable:!0,get:function(){return _.useOs}}),Object.defineProperty(exports,"usePageLeave",{enumerable:!0,get:function(){return k.usePageLeave}}),Object.defineProperty(exports,"usePagination",{enumerable:!0,get:function(){return h.usePagination}}),Object.defineProperty(exports,"usePrevious",{enumerable:!0,get:function(){return $.usePrevious}}),Object.defineProperty(exports,"useQueue",{enumerable:!0,get:function(){return S.useQueue}}),Object.defineProperty(exports,"useReducedMotion",{enumerable:!0,get:function(){return D.useReducedMotion}}),Object.defineProperty(exports,"useResizeObserver",{enumerable:!0,get:function(){return I.useResizeObserver}}),Object.defineProperty(exports,"useScrollIntoView",{enumerable:!0,get:function(){return F.useScrollIntoView}}),Object.defineProperty(exports,"useSessionStorage",{enumerable:!0,get:function(){return O.useSessionStorage}}),Object.defineProperty(exports,"useSetState",{enumerable:!0,get:function(){return A.useSetState}}),Object.defineProperty(exports,"useShallowEffect",{enumerable:!0,get:function(){return E.useShallowEffect}}),Object.defineProperty(exports,"useTextSelection",{enumerable:!0,get:function(){return Z.useTextSelection}}),Object.defineProperty(exports,"useTimeout",{enumerable:!0,get:function(){return Y.useTimeout}}),Object.defineProperty(exports,"useToggle",{enumerable:!0,get:function(){return R.useToggle}}),Object.defineProperty(exports,"useUncontrolled",{enumerable:!0,get:function(){return M.useUncontrolled}}),Object.defineProperty(exports,"useValidatedState",{enumerable:!0,get:function(){return N.useValidatedState}}),Object.defineProperty(exports,"useViewportSize",{enumerable:!0,get:function(){return C.useViewportSize}}),Object.defineProperty(exports,"useWindowEvent",{enumerable:!0,get:function(){return H.useWindowEvent}}),Object.defineProperty(exports,"useWindowScroll",{enumerable:!0,get:function(){return z.useWindowScroll}});var e=require("./use-callback-ref/use-callback-ref.mjs"),r=require("./use-debounced-callback/use-debounced-callback.mjs"),t=require("./use-click-outside/use-click-outside.mjs"),u=require("./use-clipboard/use-clipboard.mjs"),s=require("./use-color-scheme/use-color-scheme.mjs"),n=require("./use-counter/use-counter.mjs"),o=require("./use-debounced-state/use-debounced-state.mjs"),i=require("./use-debounced-value/use-debounced-value.mjs"),c=require("./use-document-title/use-document-title.mjs"),l=require("./use-document-visibility/use-document-visibility.mjs"),a=require("./use-focus-return/use-focus-return.mjs"),p=require("./use-did-update/use-did-update.mjs"),f=require("./use-focus-trap/use-focus-trap.mjs"),m=require("./use-force-update/use-force-update.mjs"),d=require("./use-id/use-id.mjs"),b=require("./use-idle/use-idle.mjs"),j=require("./use-interval/use-interval.mjs"),g=require("./use-isomorphic-effect/use-isomorphic-effect.mjs"),y=require("./use-list-state/use-list-state.mjs"),P=require("./use-local-storage/use-local-storage.mjs"),O=require("./use-session-storage/use-session-storage.mjs"),x=require("./use-media-query/use-media-query.mjs"),q=require("./use-merged-ref/use-merged-ref.mjs"),v=require("./use-mouse/use-mouse.mjs"),w=require("./use-move/use-move.mjs"),h=require("./use-pagination/use-pagination.mjs"),S=require("./use-queue/use-queue.mjs"),k=require("./use-page-leave/use-page-leave.mjs"),D=require("./use-reduced-motion/use-reduced-motion.mjs"),F=require("./use-scroll-into-view/use-scroll-into-view.mjs"),I=require("./use-resize-observer/use-resize-observer.mjs"),E=require("./use-shallow-effect/use-shallow-effect.mjs"),R=require("./use-toggle/use-toggle.mjs"),M=require("./use-uncontrolled/use-uncontrolled.mjs"),C=require("./use-viewport-size/use-viewport-size.mjs"),H=require("./use-window-event/use-window-event.mjs"),z=require("./use-window-scroll/use-window-scroll.mjs"),L=require("./use-intersection/use-intersection.mjs"),T=require("./use-hash/use-hash.mjs"),V=require("./use-hotkeys/use-hotkeys.mjs"),U=require("./use-fullscreen/use-fullscreen.mjs"),W=require("./use-logger/use-logger.mjs"),Q=require("./use-hover/use-hover.mjs"),N=require("./use-validated-state/use-validated-state.mjs"),_=require("./use-os/use-os.mjs"),A=require("./use-set-state/use-set-state.mjs"),B=require("./use-input-state/use-input-state.mjs"),G=require("./use-event-listener/use-event-listener.mjs"),J=require("./use-disclosure/use-disclosure.mjs"),K=require("./use-focus-within/use-focus-within.mjs"),X=require("./use-network/use-network.mjs"),Y=require("./use-timeout/use-timeout.mjs"),Z=require("./use-text-selection/use-text-selection.mjs"),$=require("./use-previous/use-previous.mjs"),ee=require("./use-favicon/use-favicon.mjs"),re=require("./use-headroom/use-headroom.mjs"),te=require("./use-eye-dropper/use-eye-dropper.mjs"),ue=require("./use-hotkeys/parse-hotkey.mjs"),se=require("./utils/clamp/clamp.mjs"),ne=require("./utils/lower-first/lower-first.mjs"),oe=require("./utils/random-id/random-id.mjs"),ie=require("./utils/range/range.mjs"),ce=require("./utils/shallow-equal/shallow-equal.mjs"),le=require("./utils/upper-first/upper-first.mjs");
},{"./use-callback-ref/use-callback-ref.mjs":"uEEO","./use-debounced-callback/use-debounced-callback.mjs":"jLxI","./use-click-outside/use-click-outside.mjs":"NIoC","./use-clipboard/use-clipboard.mjs":"DhuU","./use-color-scheme/use-color-scheme.mjs":"z5Pg","./use-counter/use-counter.mjs":"WitE","./use-debounced-state/use-debounced-state.mjs":"CVfW","./use-debounced-value/use-debounced-value.mjs":"IhWr","./use-document-title/use-document-title.mjs":"ruHt","./use-document-visibility/use-document-visibility.mjs":"Wa2A","./use-focus-return/use-focus-return.mjs":"PNXq","./use-did-update/use-did-update.mjs":"NnMb","./use-focus-trap/use-focus-trap.mjs":"xIb7","./use-force-update/use-force-update.mjs":"zItY","./use-id/use-id.mjs":"xUHD","./use-idle/use-idle.mjs":"m563","./use-interval/use-interval.mjs":"co0l","./use-isomorphic-effect/use-isomorphic-effect.mjs":"e2JD","./use-list-state/use-list-state.mjs":"N1FP","./use-local-storage/use-local-storage.mjs":"Vg3T","./use-session-storage/use-session-storage.mjs":"wX6J","./use-media-query/use-media-query.mjs":"SQyg","./use-merged-ref/use-merged-ref.mjs":"xyO4","./use-mouse/use-mouse.mjs":"Yxsw","./use-move/use-move.mjs":"oymV","./use-pagination/use-pagination.mjs":"WurF","./use-queue/use-queue.mjs":"W5y0","./use-page-leave/use-page-leave.mjs":"A5EZ","./use-reduced-motion/use-reduced-motion.mjs":"FViy","./use-scroll-into-view/use-scroll-into-view.mjs":"RSJ8","./use-resize-observer/use-resize-observer.mjs":"OuTe","./use-shallow-effect/use-shallow-effect.mjs":"kSiG","./use-toggle/use-toggle.mjs":"pKux","./use-uncontrolled/use-uncontrolled.mjs":"RAjn","./use-viewport-size/use-viewport-size.mjs":"kVpu","./use-window-event/use-window-event.mjs":"bULJ","./use-window-scroll/use-window-scroll.mjs":"rgVe","./use-intersection/use-intersection.mjs":"vyJT","./use-hash/use-hash.mjs":"gP0V","./use-hotkeys/use-hotkeys.mjs":"LbWa","./use-fullscreen/use-fullscreen.mjs":"XBBT","./use-logger/use-logger.mjs":"UlOS","./use-hover/use-hover.mjs":"FesW","./use-validated-state/use-validated-state.mjs":"cvEe","./use-os/use-os.mjs":"SIsa","./use-set-state/use-set-state.mjs":"oRNc","./use-input-state/use-input-state.mjs":"SA6o","./use-event-listener/use-event-listener.mjs":"vu2V","./use-disclosure/use-disclosure.mjs":"MyoH","./use-focus-within/use-focus-within.mjs":"yAoc","./use-network/use-network.mjs":"HWS5","./use-timeout/use-timeout.mjs":"wRKy","./use-text-selection/use-text-selection.mjs":"BehD","./use-previous/use-previous.mjs":"ofSp","./use-favicon/use-favicon.mjs":"tBDX","./use-headroom/use-headroom.mjs":"KrDz","./use-eye-dropper/use-eye-dropper.mjs":"vOXq","./use-hotkeys/parse-hotkey.mjs":"M6M1","./utils/clamp/clamp.mjs":"gRCK","./utils/lower-first/lower-first.mjs":"ymc4","./utils/random-id/random-id.mjs":"B3YW","./utils/range/range.mjs":"Pzuz","./utils/shallow-equal/shallow-equal.mjs":"Otj8","./utils/upper-first/upper-first.mjs":"l7Z4"}],"pBGv":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"chA2":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var t=arguments[3],e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sha1=exports.RANDOM_FACTOR=exports.MAX_VALUE_MILLIS=exports.FirebaseError=exports.ErrorFactory=exports.Deferred=exports.DecodeBase64StringError=exports.CONSTANTS=void 0,exports.areCookiesEnabled=V,exports.assertionError=exports.assert=void 0,exports.async=ft,exports.base64urlEncodeWithoutPadding=exports.base64Encode=exports.base64Decode=exports.base64=void 0,exports.calculateBackoffMillis=Ct,exports.contains=Y,exports.createMockUserToken=O,exports.createSubscribe=ht,exports.decode=void 0,exports.deepCopy=l,exports.deepEqual=rt,exports.deepExtend=p,exports.errorPrefix=bt,exports.extractQuerystring=at,exports.getExperimentalSetting=exports.getDefaults=exports.getDefaultEmulatorHostnameAndPort=exports.getDefaultEmulatorHost=exports.getDefaultAppConfig=void 0,exports.getGlobal=b,exports.getModularInstance=Tt,exports.getUA=C,exports.isAdmin=void 0,exports.isBrowser=T,exports.isBrowserExtension=N,exports.isElectron=j,exports.isEmpty=tt,exports.isIE=B,exports.isIndexedDBAvailable=L,exports.isMobileCordova=D,exports.isNode=w,exports.isNodeSdk=I,exports.isReactNative=M,exports.isSafari=P,exports.isUWP=k,exports.issuedAtTime=exports.isValidTimestamp=exports.isValidFormat=void 0,exports.jsonEval=H,exports.map=et,exports.ordinal=Dt,exports.promiseWithTimeout=nt,exports.querystring=st,exports.querystringDecode=it,exports.safeGet=Z,exports.stringToByteArray=exports.stringLength=void 0,exports.stringify=J,exports.validateArgCount=exports.uuidv4=void 0,exports.validateCallback=_t,exports.validateContextObject=gt,exports.validateIndexedDBOpenable=R,exports.validateNamespace=xt;const r=exports.CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw n(e)};exports.assert=o;const n=function(t){return new Error("Firebase Database ("+r.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};exports.assertionError=n;const s=function(t){const e=[];let r=0;for(let o=0;o<t.length;o++){let n=t.charCodeAt(o);n<128?e[r++]=n:n<2048?(e[r++]=n>>6|192,e[r++]=63&n|128):55296==(64512&n)&&o+1<t.length&&56320==(64512&t.charCodeAt(o+1))?(n=65536+((1023&n)<<10)+(1023&t.charCodeAt(++o)),e[r++]=n>>18|240,e[r++]=n>>12&63|128,e[r++]=n>>6&63|128,e[r++]=63&n|128):(e[r++]=n>>12|224,e[r++]=n>>6&63|128,e[r++]=63&n|128)}return e},i=function(t){const e=[];let r=0,o=0;for(;r<t.length;){const n=t[r++];if(n<128)e[o++]=String.fromCharCode(n);else if(n>191&&n<224){const s=t[r++];e[o++]=String.fromCharCode((31&n)<<6|63&s)}else if(n>239&&n<365){const s=((7&n)<<18|(63&t[r++])<<12|(63&t[r++])<<6|63&t[r++])-65536;e[o++]=String.fromCharCode(55296+(s>>10)),e[o++]=String.fromCharCode(56320+(1023&s))}else{const s=t[r++],i=t[r++];e[o++]=String.fromCharCode((15&n)<<12|(63&s)<<6|63&i)}}return e.join("")},a=exports.base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let n=0;n<t.length;n+=3){const e=t[n],s=n+1<t.length,i=s?t[n+1]:0,a=n+2<t.length,c=a?t[n+2]:0,h=e>>2,u=(3&e)<<4|i>>4;let f=(15&i)<<2|c>>6,l=63&c;a||(l=64,s||(f=64)),o.push(r[h],r[u],r[f],r[l])}return o.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):i(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let n=0;n<t.length;){const e=r[t.charAt(n++)],s=n<t.length?r[t.charAt(n)]:0,i=++n<t.length?r[t.charAt(n)]:64,a=++n<t.length?r[t.charAt(n)]:64;if(++n,null==e||null==s||null==i||null==a)throw new c;const h=e<<2|s>>4;if(o.push(h),64!==i){const t=s<<4&240|i>>2;if(o.push(t),64!==a){const t=i<<6&192|a;o.push(t)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class c extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}exports.DecodeBase64StringError=c;const h=function(t){const e=s(t);return a.encodeByteArray(e,!0)};exports.base64Encode=h;const u=function(t){return h(t).replace(/\./g,"")};exports.base64urlEncodeWithoutPadding=u;const f=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return p(void 0,t)}function p(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const r in e)e.hasOwnProperty(r)&&d(r)&&(t[r]=p(t[r],e[r]));return t}function d(t){return"__proto__"!==t}function b(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw new Error("Unable to locate global object.")}exports.base64Decode=f;const x=()=>b().__FIREBASE_DEFAULTS__,_=()=>{if(void 0===e||void 0===e.env)return},g=()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(r){return}const e=t&&f(t[1]);return e&&JSON.parse(e)},y=()=>{try{return x()||_()||g()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}};exports.getDefaults=y;const v=t=>{var e,r;return null===(r=null===(e=y())||void 0===e?void 0:e.emulatorHosts)||void 0===r?void 0:r[t]};exports.getDefaultEmulatorHost=v;const E=t=>{const e=v(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(r+1),10);return"["===e[0]?[e.substring(1,r-1),o]:[e.substring(0,r),o]};exports.getDefaultEmulatorHostnameAndPort=E;const m=()=>{var t;return null===(t=y())||void 0===t?void 0:t.config};exports.getDefaultAppConfig=m;const S=t=>{var e;return null===(e=y())||void 0===e?void 0:e[`_${t}`]};exports.getExperimentalSetting=S;class A{constructor(){this.reject=(()=>{}),this.resolve=(()=>{}),this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),"function"==typeof t&&(this.promise.catch(()=>{}),1===t.length?t(e):t(e,r))}}}function O(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",o=t.iat||0,n=t.sub||t.user_id;if(!n)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:n,user_id:n,firebase:{sign_in_provider:"custom",identities:{}}},t);return[u(JSON.stringify({alg:"none",type:"JWT"})),u(JSON.stringify(s)),""].join(".")}function C(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function D(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(C())}function w(){var e;const r=null===(e=y())||void 0===e?void 0:e.forceEnvironment;if("node"===r)return!0;if("browser"===r)return!1;try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(o){return!1}}function T(){return"object"==typeof self&&self.self===self}function N(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function M(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function j(){return C().indexOf("Electron/")>=0}function B(){const t=C();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function k(){return C().indexOf("MSAppHost/")>=0}function I(){return!0===r.NODE_CLIENT||!0===r.NODE_ADMIN}function P(){return!w()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L(){try{return"object"==typeof indexedDB}catch(t){return!1}}function R(){return new Promise((t,e)=>{try{let o=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=(()=>{s.result.close(),o||self.indexedDB.deleteDatabase(n),t(!0)}),s.onupgradeneeded=(()=>{o=!1}),s.onerror=(()=>{var t;e((null===(t=s.error)||void 0===t?void 0:t.message)||"")})}catch(r){e(r)}})}function V(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}exports.Deferred=A;const F="FirebaseError";class U extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=F,Object.setPrototypeOf(this,U.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,W.prototype.create)}}exports.FirebaseError=U;class W{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},o=`${this.service}/${t}`,n=this.errors[t],s=n?$(n,r):"Error",i=`${this.serviceName}: ${s} (${o}).`;return new U(o,i,r)}}function $(t,e){return t.replace(z,(t,r)=>{const o=e[r];return null!=o?String(o):`<${r}?>`})}exports.ErrorFactory=W;const z=/\{\$([^}]+)}/g;function H(t){return JSON.parse(t)}function J(t){return JSON.stringify(t)}const q=function(t){let e={},r={},o={},n="";try{const i=t.split(".");e=H(f(i[0])||""),r=H(f(i[1])||""),n=i[2],o=r.d||{},delete r.d}catch(s){}return{header:e,claims:r,data:o,signature:n}};exports.decode=q;const G=function(t){const e=q(t).claims,r=Math.floor((new Date).getTime()/1e3);let o=0,n=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?o=e.nbf:e.hasOwnProperty("iat")&&(o=e.iat),n=e.hasOwnProperty("exp")?e.exp:o+86400),!!r&&!!o&&!!n&&r>=o&&r<=n};exports.isValidTimestamp=G;const K=function(t){const e=q(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null};exports.issuedAtTime=K;const X=function(t){const e=q(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")};exports.isValidFormat=X;const Q=function(t){const e=q(t).claims;return"object"==typeof e&&!0===e.admin};function Y(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Z(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function tt(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function et(t,e,r){const o={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=e.call(r,t[n],n,t));return o}function rt(t,e){if(t===e)return!0;const r=Object.keys(t),o=Object.keys(e);for(const n of r){if(!o.includes(n))return!1;const r=t[n],s=e[n];if(ot(r)&&ot(s)){if(!rt(r,s))return!1}else if(r!==s)return!1}for(const n of o)if(!r.includes(n))return!1;return!0}function ot(t){return null!==t&&"object"==typeof t}function nt(t,e=2e3){const r=new A;return setTimeout(()=>r.reject("timeout!"),e),t.then(r.resolve,r.reject),r.promise}function st(t){const e=[];for(const[r,o]of Object.entries(t))Array.isArray(o)?o.forEach(t=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(t))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(o));return e.length?"&"+e.join("&"):""}function it(t){const e={};return t.replace(/^\?/,"").split("&").forEach(t=>{if(t){const[r,o]=t.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function at(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}exports.isAdmin=Q;class ct{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);const r=this.W_;if("string"==typeof t)for(let u=0;u<16;u++)r[u]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let u=0;u<16;u++)r[u]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let u=16;u<80;u++){const t=r[u-3]^r[u-8]^r[u-14]^r[u-16];r[u]=4294967295&(t<<1|t>>>31)}let o,n,s=this.chain_[0],i=this.chain_[1],a=this.chain_[2],c=this.chain_[3],h=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(o=c^i&(a^c),n=1518500249):(o=i^a^c,n=1859775393):u<60?(o=i&a|c&(i|a),n=2400959708):(o=i^a^c,n=3395469782);const t=(s<<5|s>>>27)+o+h+n+r[u]&4294967295;h=c,c=a,a=4294967295&(i<<30|i>>>2),i=s,s=t}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(t,e){if(null==t)return;void 0===e&&(e=t.length);const r=e-this.blockSize;let o=0;const n=this.buf_;let s=this.inbuf_;for(;o<e;){if(0===s)for(;o<=r;)this.compress_(t,o),o+=this.blockSize;if("string"==typeof t){for(;o<e;)if(n[s]=t.charCodeAt(o),++o,++s===this.blockSize){this.compress_(n),s=0;break}}else for(;o<e;)if(n[s]=t[o],++o,++s===this.blockSize){this.compress_(n),s=0;break}}this.inbuf_=s,this.total_+=e}digest(){const t=[];let e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=255&e,e/=256;this.compress_(this.buf_);let r=0;for(let o=0;o<5;o++)for(let e=24;e>=0;e-=8)t[r]=this.chain_[o]>>e&255,++r;return t}}function ht(t,e){const r=new ut(t,e);return r.subscribe.bind(r)}exports.Sha1=ct;class ut{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(t=>{this.error(t)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let o;if(void 0===t&&void 0===e&&void 0===r)throw new Error("Missing Observer.");void 0===(o=lt(t,["next","error","complete"])?t:{next:t,error:e,complete:r}).next&&(o.next=pt),void 0===o.error&&(o.error=pt),void 0===o.complete&&(o.complete=pt);const n=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch(t){}}),this.observers.push(o),n}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ft(t,e){return(...r)=>{Promise.resolve(!0).then(()=>{t(...r)}).catch(t=>{e&&e(t)})}}function lt(t,e){if("object"!=typeof t||null===t)return!1;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}function pt(){}const dt=function(t,e,r,o){let n;if(o<e?n="at least "+e:o>r&&(n=0===r?"none":"no more than "+r),n){throw new Error(t+" failed: Was called with "+o+(1===o?" argument.":" arguments.")+" Expects "+n+".")}};function bt(t,e){return`${t} failed: ${e} argument `}function xt(t,e,r){if((!r||e)&&"string"!=typeof e)throw new Error(bt(t,"namespace")+"must be a valid firebase namespace.")}function _t(t,e,r,o){if((!o||r)&&"function"!=typeof r)throw new Error(bt(t,e)+"must be a valid function.")}function gt(t,e,r,o){if((!o||r)&&("object"!=typeof r||null===r))throw new Error(bt(t,e)+"must be a valid context object.")}exports.validateArgCount=dt;const yt=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s>=55296&&s<=56319){const e=s-55296;o(++n<t.length,"Surrogate pair missing trail surrogate."),s=65536+(e<<10)+(t.charCodeAt(n)-56320)}s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=63&s|128):s<65536?(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=63&s|128):(e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=63&s|128)}return e};exports.stringToByteArray=yt;const vt=function(t){let e=0;for(let r=0;r<t.length;r++){const o=t.charCodeAt(r);o<128?e++:o<2048?e+=2:o>=55296&&o<=56319?(e+=4,r++):e+=3}return e};exports.stringLength=vt;const Et=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})};exports.uuidv4=Et;const mt=1e3,St=2,At=exports.MAX_VALUE_MILLIS=144e5,Ot=exports.RANDOM_FACTOR=.5;function Ct(t,e=mt,r=St){const o=e*Math.pow(r,t),n=Math.round(Ot*o*(Math.random()-.5)*2);return Math.min(At,o+n)}function Dt(t){return Number.isFinite(t)?t+wt(t):`${t}`}function wt(t){const e=(t=Math.abs(t))%100;if(e>=10&&e<=20)return"th";const r=t%10;return 1===r?"st":2===r?"nd":3===r?"rd":"th"}function Tt(t){return t&&t._delegate?t._delegate:t}
},{"process":"pBGv"}],"vhY9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Provider=exports.ComponentContainer=exports.Component=void 0;var t=require("@firebase/util");class e{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}exports.Component=e;const n="[DEFAULT]";class i{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const e=new t.Deferred;if(this.instancesDeferred.set(n,e),this.isInitialized(n)||this.shouldAutoInitialize())try{const t=this.getOrInitializeService({instanceIdentifier:n});t&&e.resolve(t)}catch(i){}}return this.instancesDeferred.get(n).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(r(t))try{this.getOrInitializeService({instanceIdentifier:n})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:i});n.resolve(t)}catch(e){}}}}clearInstance(t=n){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...t.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return null!=this.component}isInitialized(t=n){return this.instances.has(t)}getOptions(t=n){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[s,r]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&r.resolve(i)}return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),s=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;s.add(t),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&t(r,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const s of n)try{s(t,e)}catch(i){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:s(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(i){}return n||null}normalizeInstanceIdentifier(t=n){return this.component?this.component.multipleInstances?t:n:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function s(t){return t===n?void 0:t}function r(t){return"EAGER"===t.instantiationMode}exports.Provider=i;class o{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new i(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}exports.ComponentContainer=o;
},{"@firebase/util":"chA2"}],"JJem":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Logger=exports.LogLevel=void 0,exports.setLogLevel=i,exports.setUserLogHandler=g;const e=[];var r;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(r||(exports.LogLevel=r={}));const t={debug:r.DEBUG,verbose:r.VERBOSE,info:r.INFO,warn:r.WARN,error:r.ERROR,silent:r.SILENT},o=r.INFO,l={[r.DEBUG]:"log",[r.VERBOSE]:"log",[r.INFO]:"info",[r.WARN]:"warn",[r.ERROR]:"error"},s=(e,r,...t)=>{if(r<e.logLevel)return;const o=(new Date).toISOString(),s=l[r];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${r})`);console[s](`[${o}]  ${e.name}:`,...t)};class n{constructor(r){this.name=r,this._logLevel=o,this._logHandler=s,this._userLogHandler=null,e.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in r))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?t[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,r.DEBUG,...e),this._logHandler(this,r.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,r.VERBOSE,...e),this._logHandler(this,r.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,r.INFO,...e),this._logHandler(this,r.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,r.WARN,...e),this._logHandler(this,r.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,r.ERROR,...e),this._logHandler(this,r.ERROR,...e)}}function i(r){e.forEach(e=>{e.setLogLevel(r)})}function g(o,l){for(const s of e){let e=null;l&&l.level&&(e=t[l.level]),s.userLogHandler=null===o?null:(t,l,...s)=>{const n=s.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(r){return null}}).filter(e=>e).join(" ");l>=(null!=e?e:t.logLevel)&&o({level:r[l].toLowerCase(),message:n,args:s,type:t.name})}}}exports.Logger=n;
},{}],"F1qz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.i=exports.a=void 0,exports.r=v,exports.u=void 0,exports.w=I;const e=(e,t)=>t.some(t=>e instanceof t);let t,r;function n(){return t||(t=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function o(){return r||(r=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}exports.i=e;const s=new WeakMap,i=new WeakMap,a=new WeakMap,c=new WeakMap,u=exports.a=new WeakMap;function p(e){const t=new Promise((t,r)=>{const n=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{t(I(e.result)),n()},s=()=>{r(e.error),n()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&s.set(t,e)}).catch(()=>{}),u.set(t,e),t}function f(e){if(i.has(e))return;const t=new Promise((t,r)=>{const n=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{t(),n()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});i.set(e,t)}let d={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return i.get(e);if("objectStoreNames"===t)return e.objectStoreNames||a.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return I(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function v(e){d=e(d)}function D(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?o().includes(e)?function(...t){return e.apply(B(this),t),I(s.get(this))}:function(...t){return I(e.apply(B(this),t))}:function(t,...r){const n=e.call(B(this),t,...r);return a.set(n,t.sort?t.sort():[t]),I(n)}}function m(t){return"function"==typeof t?D(t):(t instanceof IDBTransaction&&f(t),e(t,n())?new Proxy(t,d):t)}function I(e){if(e instanceof IDBRequest)return p(e);if(c.has(e))return c.get(e);const t=m(e);return t!==e&&(c.set(e,t),u.set(t,e)),t}const B=e=>u.get(e);exports.u=B;
},{}],"JZvK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deleteDB=n,exports.openDB=t,Object.defineProperty(exports,"unwrap",{enumerable:!0,get:function(){return e.u}}),Object.defineProperty(exports,"wrap",{enumerable:!0,get:function(){return e.w}});var e=require("./wrap-idb-value.js");function t(t,n,{blocked:r,upgrade:o,blocking:i,terminated:s}={}){const d=indexedDB.open(t,n),a=(0,e.w)(d);return o&&d.addEventListener("upgradeneeded",t=>{o((0,e.w)(d.result),t.oldVersion,t.newVersion,(0,e.w)(d.transaction),t)}),r&&d.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}function n(t,{blocked:n}={}){const r=indexedDB.deleteDatabase(t);return n&&r.addEventListener("blocked",e=>n(e.oldVersion,e)),(0,e.w)(r).then(()=>void 0)}const r=["get","getKey","getAll","getAllKeys","count"],o=["put","add","delete","clear"],i=new Map;function s(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(i.get(t))return i.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,d=o.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!d&&!r.includes(n))return;const a=async function(e,...t){const r=this.transaction(e,d?"readwrite":"readonly");let o=r.store;return s&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),d&&r.done]))[0]};return i.set(t,a),a}(0,e.r)(e=>({...e,get:(t,n,r)=>s(t,n)||e.get(t,n,r),has:(t,n)=>!!s(t,n)||e.has(t,n)}));
},{"./wrap-idb-value.js":"F1qz"}],"h2Mb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"FirebaseError",{enumerable:!0,get:function(){return a.FirebaseError}}),exports._DEFAULT_ENTRY_NAME=exports.SDK_VERSION=void 0,exports._addComponent=L,exports._addOrOverwriteComponent=M,exports._apps=void 0,exports._clearComponents=V,exports._components=void 0,exports._getProvider=U,exports._registerComponent=T,exports._removeServiceInstance=R,exports.deleteApp=Q,exports.getApp=Y,exports.getApps=G,exports.initializeApp=W,exports.onLog=Z,exports.registerVersion=X,exports.setLogLevel=ee;var e=require("@firebase/component"),t=require("@firebase/logger"),a=require("@firebase/util"),r=require("idb");class n{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(i(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}function i(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}const s="@firebase/app",o="0.9.19",c=new t.Logger("@firebase/app"),p="@firebase/app-compat",h="@firebase/analytics-compat",l="@firebase/analytics",f="@firebase/app-check-compat",d="@firebase/app-check",b="@firebase/auth",g="@firebase/auth-compat",u="@firebase/database",m="@firebase/database-compat",w="@firebase/functions",_="@firebase/functions-compat",v="@firebase/installations",D="@firebase/installations-compat",C="@firebase/messaging",E="@firebase/messaging-compat",y="@firebase/performance",x="@firebase/performance-compat",I="@firebase/remote-config",S="@firebase/remote-config-compat",P="@firebase/storage",O="@firebase/storage-compat",A="@firebase/firestore",$="@firebase/firestore-compat",N="firebase",j="10.4.0",k=exports._DEFAULT_ENTRY_NAME="[DEFAULT]",F={[s]:"fire-core",[p]:"fire-core-compat",[l]:"fire-analytics",[h]:"fire-analytics-compat",[d]:"fire-app-check",[f]:"fire-app-check-compat",[b]:"fire-auth",[g]:"fire-auth-compat",[u]:"fire-rtdb",[m]:"fire-rtdb-compat",[w]:"fire-fn",[_]:"fire-fn-compat",[v]:"fire-iid",[D]:"fire-iid-compat",[C]:"fire-fcm",[E]:"fire-fcm-compat",[y]:"fire-perf",[x]:"fire-perf-compat",[I]:"fire-rc",[S]:"fire-rc-compat",[P]:"fire-gcs",[O]:"fire-gcs-compat",[A]:"fire-fst",[$]:"fire-fst-compat","fire-js":"fire-js",[N]:"fire-js-all"},B=exports._apps=new Map,H=exports._components=new Map;function L(e,t){try{e.container.addComponent(t)}catch(a){c.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,a)}}function M(e,t){e.container.addOrOverwriteComponent(t)}function T(e){const t=e.name;if(H.has(t))return c.debug(`There were multiple attempts to register component ${t}.`),!1;H.set(t,e);for(const a of B.values())L(a,e);return!0}function U(e,t){const a=e.container.getProvider("heartbeat").getImmediate({optional:!0});return a&&a.triggerHeartbeat(),e.container.getProvider(t)}function R(e,t,a=k){U(e,t).clearInstance(a)}function V(){H.clear()}const q={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},z=new a.ErrorFactory("app","Firebase",q);class J{constructor(t,a,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},a),this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new e.Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw z.create("app-deleted",{appName:this._name})}}const K=exports.SDK_VERSION=j;function W(t,r={}){let n=t;if("object"!=typeof r){r={name:r}}const i=Object.assign({name:k,automaticDataCollectionEnabled:!1},r),s=i.name;if("string"!=typeof s||!s)throw z.create("bad-app-name",{appName:String(s)});if(n||(n=(0,a.getDefaultAppConfig)()),!n)throw z.create("no-options");const o=B.get(s);if(o){if((0,a.deepEqual)(n,o.options)&&(0,a.deepEqual)(i,o.config))return o;throw z.create("duplicate-app",{appName:s})}const c=new e.ComponentContainer(s);for(const e of H.values())c.addComponent(e);const p=new J(n,i,c);return B.set(s,p),p}function Y(e=k){const t=B.get(e);if(!t&&e===k&&(0,a.getDefaultAppConfig)())return W();if(!t)throw z.create("no-app",{appName:e});return t}function G(){return Array.from(B.values())}async function Q(e){const t=e.name;B.has(t)&&(B.delete(t),await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function X(t,a,r){var n;let i=null!==(n=F[t])&&void 0!==n?n:t;r&&(i+=`-${r}`);const s=i.match(/\s|\//),o=a.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${a}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${a}" contains illegal characters (whitespace or "/")`),void c.warn(e.join(" "))}T(new e.Component(`${i}-version`,()=>({library:i,version:a}),"VERSION"))}function Z(e,a){if(null!==e&&"function"!=typeof e)throw z.create("invalid-log-argument");(0,t.setUserLogHandler)(e,a)}function ee(e){(0,t.setLogLevel)(e)}const te="firebase-heartbeat-database",ae=1,re="firebase-heartbeat-store";let ne=null;function ie(){return ne||(ne=(0,r.openDB)(te,ae,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(re)}}}).catch(e=>{throw z.create("idb-open",{originalErrorMessage:e.message})})),ne}async function se(e){try{const r=await ie();return await r.transaction(re).objectStore(re).get(ce(e))}catch(t){if(t instanceof a.FirebaseError)c.warn(t.message);else{const e=z.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});c.warn(e.message)}}}async function oe(e,t){try{const n=(await ie()).transaction(re,"readwrite"),i=n.objectStore(re);await i.put(t,ce(e)),await n.done}catch(r){if(r instanceof a.FirebaseError)c.warn(r.message);else{const e=z.create("idb-set",{originalErrorMessage:null==r?void 0:r.message});c.warn(e.message)}}}function ce(e){return`${e.name}!${e.options.appId}`}const pe=1024,he=2592e6;class le{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new be(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=fe();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=he}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=fe(),{heartbeatsToSend:t,unsentEntries:r}=de(this._heartbeatsCache.heartbeats),n=(0,a.base64urlEncodeWithoutPadding)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),n}}function fe(){return(new Date).toISOString().substring(0,10)}function de(e,t=pe){const a=[];let r=e.slice();for(const n of e){const e=a.find(e=>e.agent===n.agent);if(e){if(e.dates.push(n.date),ge(a)>t){e.dates.pop();break}}else if(a.push({agent:n.agent,dates:[n.date]}),ge(a)>t){a.pop();break}r=r.slice(1)}return{heartbeatsToSend:a,unsentEntries:r}}class be{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,a.isIndexedDBAvailable)()&&(0,a.validateIndexedDBOpenable)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){return await se(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return oe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return oe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}}}function ge(e){return(0,a.base64urlEncodeWithoutPadding)(JSON.stringify({version:2,heartbeats:e})).length}function ue(t){T(new e.Component("platform-logger",e=>new n(e),"PRIVATE")),T(new e.Component("heartbeat",e=>new le(e),"PRIVATE")),X(s,o,t),X(s,o,"esm2017"),X("fire-js","")}ue("");
},{"@firebase/component":"vhY9","@firebase/logger":"JJem","@firebase/util":"chA2","idb":"JZvK"}],"fIlu":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStatEventTarget=exports.default=exports.createWebChannelTransport=exports.XhrIo=exports.WebChannel=exports.Stat=exports.Md5=exports.Integer=exports.FetchXmlHttpFactory=exports.EventType=exports.Event=exports.ErrorCode=void 0;var e,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},n=exports.default={},r=r||{},s=i||self;function o(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function h(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function a(t){return Object.prototype.hasOwnProperty.call(t,l)&&t[l]||(t[l]=++u)}var l="closure_uid_"+(1e9*Math.random()>>>0),u=0;function c(t,e,i){return t.call.apply(t.bind,arguments)}function f(t,e,i){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function g(t,e,i){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?c:f).apply(null,arguments)}function p(t,e){var i=Array.prototype.slice.call(arguments,1);return function(){var e=i.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function d(t,e){function i(){}i.prototype=e.prototype,t.$=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.ac=function(t,i,n){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[i].apply(t,r)}}function y(){this.s=this.s,this.o=this.o}var v=0;y.prototype.s=!1,y.prototype.sa=function(){this.s||(this.s=!0,this.N(),0==v)||a(this)},y.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const m=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let i=0;i<t.length;i++)if(i in t&&t[i]===e)return i;return-1};function b(t){const e=t.length;if(0<e){const i=Array(e);for(let n=0;n<e;n++)i[n]=t[n];return i}return[]}function w(t,e){for(let i=1;i<arguments.length;i++){const e=arguments[i];if(o(e)){const i=t.length||0,n=e.length||0;t.length=i+n;for(let r=0;r<n;r++)t[i+r]=e[r]}else t.push(e)}}function T(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var S=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",()=>{},e),s.removeEventListener("test",()=>{},e)}catch(i){}return t}();function E(t){return/^[\s\xa0]*$/.test(t)}function x(){var t=s.navigator;return t&&(t=t.userAgent)?t:""}function j(t){return-1!=x().indexOf(t)}function C(t){return C[" "](t),t}function A(t,e){var i=pn;return Object.prototype.hasOwnProperty.call(i,t)?i[t]:i[t]=e(t)}C[" "]=function(){};var I,M,R=j("Opera"),O=j("Trident")||j("MSIE"),P=j("Edge"),k=P||O,_=j("Gecko")&&!(-1!=x().toLowerCase().indexOf("webkit")&&!j("Edge"))&&!(j("Trident")||j("MSIE"))&&!j("Edge"),D=-1!=x().toLowerCase().indexOf("webkit")&&!j("Edge");function L(){var t=s.document;return t?t.documentMode:void 0}t:{var H="",X=function(){var t=x();return _?/rv:([^\);]+)(\)|;)/.exec(t):P?/Edge\/([\d\.]+)/.exec(t):O?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):D?/WebKit\/(\S+)/.exec(t):R?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(X&&(H=X?X[1]:""),O){var N=L();if(null!=N&&N>parseFloat(H)){I=String(N);break t}}I=H}if(s.document&&O){var F=L();M=F||(parseInt(I,10)||void 0)}else M=void 0;var B=M;function U(t,e){if(T.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var i=this.type=t.type,n=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(_){t:{try{C(e.nodeName);var r=!0;break t}catch(s){}r=!1}r||(e=null)}}else"mouseover"==i?e=t.fromElement:"mouseout"==i&&(e=t.toElement);this.relatedTarget=e,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:K[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&U.$.h.call(this)}}d(U,T);var K={2:"touch",3:"pen",4:"mouse"};U.prototype.h=function(){U.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Y="closure_listenable_"+(1e6*Math.random()|0),G=0;function J(t,e,i,n,r){this.listener=t,this.proxy=null,this.src=e,this.type=i,this.capture=!!n,this.la=r,this.key=++G,this.fa=this.ia=!1}function W(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function z(t,e,i){for(const n in t)e.call(i,t[n],n,t)}function q(t,e){for(const i in t)e.call(void 0,t[i],i,t)}function V(t){const e={};for(const i in t)e[i]=t[i];return e}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Z(t,e){let i,n;for(let r=1;r<arguments.length;r++){for(i in n=arguments[r])t[i]=n[i];for(let e=0;e<$.length;e++)i=$[e],Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}}function Q(t){this.src=t,this.g={},this.h=0}function tt(t,e){var i=e.type;if(i in t.g){var n,r=t.g[i],s=m(r,e);(n=0<=s)&&Array.prototype.splice.call(r,s,1),n&&(W(e),0==t.g[i].length&&(delete t.g[i],t.h--))}}function et(t,e,i,n){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!i&&s.la==n)return r}return-1}Q.prototype.add=function(t,e,i,n,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=et(t,e,n,r);return-1<o?(e=t[o],i||(e.ia=!1)):((e=new J(e,this.src,s,!!n,r)).ia=i,t.push(e)),e};var it="closure_lm_"+(1e6*Math.random()|0),nt={};function rt(t,e,i,n,r){if(n&&n.once)return ht(t,e,i,n,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)rt(t,e[s],i,n,r);return null}return i=pt(i),t&&t[Y]?t.O(e,i,h(n)?!!n.capture:!!n,r):st(t,e,i,!1,n,r)}function st(t,e,i,n,r,s){if(!e)throw Error("Invalid event type");var o=h(r)?!!r.capture:!!r,a=ft(t);if(a||(t[it]=a=new Q(t)),(i=a.add(e,i,n,o,s)).proxy)return i;if(n=ot(),i.proxy=n,n.src=t,n.listener=i,t.addEventListener)S||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),n,r);else if(t.attachEvent)t.attachEvent(ut(e.toString()),n);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(n)}return i}function ot(){const t=ct;return function e(i){return t.call(e.src,e.listener,i)}}function ht(t,e,i,n,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)ht(t,e[s],i,n,r);return null}return i=pt(i),t&&t[Y]?t.P(e,i,h(n)?!!n.capture:!!n,r):st(t,e,i,!0,n,r)}function at(t,e,i,n,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)at(t,e[s],i,n,r);else n=h(n)?!!n.capture:!!n,i=pt(i),t&&t[Y]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(i=et(s=t.g[e],i,n,r))&&(W(s[i]),Array.prototype.splice.call(s,i,1),0==s.length&&(delete t.g[e],t.h--)))):t&&(t=ft(t))&&(e=t.g[e.toString()],t=-1,e&&(t=et(e,i,n,r)),(i=-1<t?e[t]:null)&&lt(i))}function lt(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Y])tt(e.i,t);else{var i=t.type,n=t.proxy;e.removeEventListener?e.removeEventListener(i,n,t.capture):e.detachEvent?e.detachEvent(ut(i),n):e.addListener&&e.removeListener&&e.removeListener(n),(i=ft(e))?(tt(i,t),0==i.h&&(i.src=null,e[it]=null)):W(t)}}}function ut(t){return t in nt?nt[t]:nt[t]="on"+t}function ct(t,e){if(t.fa)t=!0;else{e=new U(e,this);var i=t.listener,n=t.la||t.src;t.ia&&lt(t),t=i.call(n,e)}return t}function ft(t){return(t=t[it])instanceof Q?t:null}var gt="__closure_events_fn_"+(1e9*Math.random()>>>0);function pt(t){return"function"==typeof t?t:(t[gt]||(t[gt]=function(e){return t.handleEvent(e)}),t[gt])}function dt(){y.call(this),this.i=new Q(this),this.S=this,this.J=null}function yt(t,e){var i,n=t.J;if(n)for(i=[];n;n=n.J)i.push(n);if(t=t.S,n=e.type||e,"string"==typeof e)e=new T(e,t);else if(e instanceof T)e.target=e.target||t;else{var r=e;Z(e=new T(n,t),r)}if(r=!0,i)for(var s=i.length-1;0<=s;s--){var o=e.g=i[s];r=vt(o,n,!0,e)&&r}if(r=vt(o=e.g=t,n,!0,e)&&r,r=vt(o,n,!1,e)&&r,i)for(s=0;s<i.length;s++)r=vt(o=e.g=i[s],n,!1,e)&&r}function vt(t,e,i,n){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==i){var h=o.listener,a=o.la||o.src;o.ia&&tt(t.i,o),r=!1!==h.call(a,n)&&r}}return r&&!n.defaultPrevented}d(dt,y),dt.prototype[Y]=!0,dt.prototype.removeEventListener=function(t,e,i,n){at(this,t,e,i,n)},dt.prototype.N=function(){if(dt.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var i=e.g[t],n=0;n<i.length;n++)W(i[n]);delete e.g[t],e.h--}}this.J=null},dt.prototype.O=function(t,e,i,n){return this.i.add(String(t),e,!1,i,n)},dt.prototype.P=function(t,e,i,n){return this.i.add(String(t),e,!0,i,n)};var mt=s.JSON.stringify;class bt{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function wt(){var t=It;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Tt{constructor(){this.h=this.g=null}add(t,e){const i=St.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}}var St=new bt(()=>new Et,t=>t.reset());class Et{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function xt(t){var e=1;t=t.split(":");const i=[];for(;0<e&&t.length;)i.push(t.shift()),e--;return t.length&&i.push(t.join(":")),i}function jt(t){s.setTimeout(()=>{throw t},0)}let Ct,At=!1,It=new Tt,Mt=()=>{const t=s.Promise.resolve(void 0);Ct=(()=>{t.then(Rt)})};var Rt=()=>{for(var t;t=wt();){try{t.h.call(t.g)}catch(i){jt(i)}var e=St;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}At=!1};function Ot(t,e){dt.call(this),this.h=t||1,this.g=e||s,this.j=g(this.qb,this),this.l=Date.now()}function Pt(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function kt(t,e,i){if("function"==typeof t)i&&(t=g(t,i));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=g(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function _t(t){t.g=kt(()=>{t.g=null,t.i&&(t.i=!1,_t(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}d(Ot,dt),(e=Ot.prototype).ga=!1,e.T=null,e.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),yt(this,"tick"),this.ga&&(Pt(this),this.start()))}},e.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},e.N=function(){Ot.$.N.call(this),Pt(this),delete this.g};class Dt extends y{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:_t(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lt(t){y.call(this),this.h=t,this.g={}}d(Lt,y);var Ht=[];function Xt(t,e,i,n){Array.isArray(i)||(i&&(Ht[0]=i.toString()),i=Ht);for(var r=0;r<i.length;r++){var s=rt(e,i[r],n||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Nt(t){z(t.g,function(t,e){this.g.hasOwnProperty(e)&&lt(t)},t),t.g={}}function Ft(){this.g=!0}function Bt(t,e,i,n,r,s){t.info(function(){if(t.g)if(s)for(var o="",h=s.split("&"),a=0;a<h.length;a++){var l=h[a].split("=");if(1<l.length){var u=l[0];l=l[1];var c=u.split("_");o=2<=c.length&&"type"==c[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+n+") [attempt "+r+"]: "+e+"\n"+i+"\n"+o})}function Ut(t,e,i,n,r,s,o){t.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+r+"]: "+e+"\n"+i+"\n"+s+" "+o})}function Kt(t,e,i,n){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Gt(t,i)+(n?" "+n:"")})}function Yt(t,e){t.info(function(){return"TIMEOUT: "+e})}function Gt(t,e){if(!t.g)return e;if(!e)return null;try{var i=JSON.parse(e);if(i)for(t=0;t<i.length;t++)if(Array.isArray(i[t])){var n=i[t];if(!(2>n.length)){var r=n[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return mt(i)}catch(h){return e}}Lt.prototype.N=function(){Lt.$.N.call(this),Nt(this)},Lt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ft.prototype.Ea=function(){this.g=!1},Ft.prototype.info=function(){};var Jt={},Wt=null;function zt(){return Wt=Wt||new dt}function qt(t){T.call(this,Jt.Ta,t)}function Vt(t){const e=zt();yt(e,new qt(e))}function $t(t,e){T.call(this,Jt.STAT_EVENT,t),this.stat=e}function Zt(t){const e=zt();yt(e,new $t(e,t))}function Qt(t,e){T.call(this,Jt.Ua,t),this.size=e}function te(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){t()},e)}Jt.Ta="serverreachability",d(qt,T),Jt.STAT_EVENT="statevent",d($t,T),Jt.Ua="timingevent",d(Qt,T);var ee={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ie={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ne(){}function re(t){return t.h||(t.h=t.i())}function se(){}ne.prototype.h=null;var oe,he={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ae(){T.call(this,"d")}function le(){T.call(this,"c")}function ue(){}function ce(t,e,i,n){this.l=t,this.j=e,this.m=i,this.W=n||1,this.U=new Lt(this),this.P=ge,t=k?125:void 0,this.V=new Ot(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new fe}function fe(){this.i=null,this.g="",this.h=!1}d(ae,T),d(le,T),d(ue,ne),ue.prototype.g=function(){return new XMLHttpRequest},ue.prototype.i=function(){return{}},oe=new ue;var ge=45e3,pe={},de={};function ye(t,e,i){t.L=1,t.v=Xe(ke(e)),t.s=i,t.S=!0,ve(t,null)}function ve(t,e){t.G=Date.now(),Te(t),t.A=ke(t.v);var i=t.A,n=t.W;Array.isArray(n)||(n=[String(n)]),$e(i.i,"t",n),t.C=0,i=t.l.J,t.h=new fe,t.g=nn(t.l,i?e:null,!t.s),0<t.O&&(t.M=new Dt(g(t.Pa,t,t.g),t.O)),Xt(t.U,t.g,"readystatechange",t.nb),e=t.I?V(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Vt(),Bt(t.j,t.u,t.A,t.m,t.W,t.s)}function me(t){return!!t.g&&("GET"==t.u&&2!=t.L&&t.l.Ha)}function be(t,e,i){let n,r=!0;for(;!t.J&&t.C<i.length;){if((n=we(t,i))==de){4==e&&(t.o=4,Zt(14),r=!1),Kt(t.j,t.m,null,"[Incomplete Response]");break}if(n==pe){t.o=4,Zt(15),Kt(t.j,t.m,i,"[Invalid Chunk]"),r=!1;break}Kt(t.j,t.m,n,null),Ce(t,n)}me(t)&&n!=de&&n!=pe&&(t.h.g="",t.C=0),4!=e||0!=i.length||t.h.h||(t.o=1,Zt(16),r=!1),t.i=t.i&&r,r?0<i.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+i.length),zi(e),e.M=!0,Zt(11))):(Kt(t.j,t.m,i,"[Invalid Chunked Response]"),je(t),xe(t))}function we(t,e){var i=t.C,n=e.indexOf("\n",i);return-1==n?de:(i=Number(e.substring(i,n)),isNaN(i)?pe:(n+=1)+i>e.length?de:(e=e.slice(n,n+i),t.C=n+i,e))}function Te(t){t.Y=Date.now()+t.P,Se(t,t.P)}function Se(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=te(g(t.lb,t),e)}function Ee(t){t.B&&(s.clearTimeout(t.B),t.B=null)}function xe(t){0==t.l.H||t.J||$i(t.l,t)}function je(t){Ee(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,Pt(t.V),Nt(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Ce(t,e){try{var i=t.l;if(0!=i.H&&(i.g==t||si(i.i,t)))if(!t.K&&si(i.i,t)&&3==i.H){try{var n=i.Ja.g.parse(e)}catch(l){n=null}if(Array.isArray(n)&&3==n.length){var r=n;if(0==r[0]){t:if(!i.u){if(i.g){if(!(i.g.G+3e3<t.G))break t;Vi(i),Ni(i)}Wi(i),Zt(18)}}else i.Fa=r[1],0<i.Fa-i.V&&37500>r[2]&&i.G&&0==i.A&&!i.v&&(i.v=te(g(i.ib,i),6e3));if(1>=ri(i.i)&&i.oa){try{i.oa()}catch(l){}i.oa=void 0}}else Qi(i,11)}else if((t.K||i.g==t)&&Vi(i),!E(e))for(r=i.Ja.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(i.V=l[0],l=l[1],2==i.H)if("c"==l[0]){i.K=l[1],i.pa=l[2];const e=l[3];null!=e&&(i.ra=e,i.l.info("VER="+i.ra));const r=l[4];null!=r&&(i.Ga=r,i.l.info("SVER="+i.Ga));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(n=1.5*u,i.L=n,i.l.info("backChannelRequestTimeoutMs_="+n)),n=i;const c=t.g;if(c){const t=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=n.i;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(oi(s,s.h),s.h=null))}if(n.F){const t=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(n.Da=t,He(n.I,n.F,t))}}i.H=3,i.h&&i.h.Ba(),i.ca&&(i.S=Date.now()-t.G,i.l.info("Handshake RTT: "+i.S+"ms"));var o=t;if((n=i).wa=en(n,n.J?n.pa:null,n.Y),o.K){hi(n.i,o);var h=o,a=n.L;a&&h.setTimeout(a),h.B&&(Ee(h),Te(h)),n.g=o}else Ji(n);0<i.j.length&&Bi(i)}else"stop"!=l[0]&&"close"!=l[0]||Qi(i,7);else 3==i.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Qi(i,7):Xi(i):"noop"!=l[0]&&i.h&&i.h.Aa(l),i.A=0)}Vt(4)}catch(l){}}function Ae(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(o(t)){for(var e=[],i=t.length,n=0;n<i;n++)e.push(t[n]);return e}for(n in e=[],i=0,t)e[i++]=t[n];return e}function Ie(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(o(t)||"string"==typeof t){var e=[];t=t.length;for(var i=0;i<t;i++)e.push(i);return e}e=[],i=0;for(const n in t)e[i++]=n;return e}}}function Me(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(o(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var i=Ie(t),n=Ae(t),r=n.length,s=0;s<r;s++)e.call(void 0,n[s],i&&i[s],t)}(e=ce.prototype).setTimeout=function(t){this.P=t},e.nb=function(t){t=t.target;const e=this.M;e&&3==Oi(t)?e.l():this.Pa(t)},e.Pa=function(t){try{if(t==this.g)t:{const c=Oi(this.g);var e=this.g.Ia();const f=this.g.da();if(!(3>c)&&(3!=c||k||this.g&&(this.h.h||this.g.ja()||Pi(this.g)))){this.J||4!=c||7==e||Vt(8==e||0>=f?3:2),Ee(this);var i=this.g.da();this.ca=i;e:if(me(this)){var n=Pi(this.g);t="";var r=n.length,o=4==Oi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){je(this),xe(this);var h="";break e}this.h.i=new s.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(n[e],{stream:o&&e==r-1});n.splice(0,r),this.h.g+=t,this.C=0,h=this.h.g}else h=this.g.ja();if(this.i=200==i,Ut(this.j,this.u,this.A,this.m,this.W,c,i),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(a)){var u=a;break e}}u=null}if(!(i=u)){this.i=!1,this.o=3,Zt(12),je(this),xe(this);break t}Kt(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ce(this,i)}this.S?(be(this,c,h),k&&this.i&&3==c&&(Xt(this.U,this.V,"tick",this.mb),this.V.start())):(Kt(this.j,this.m,h,null),Ce(this,h)),4==c&&je(this),this.i&&!this.J&&(4==c?$i(this.l,this):(this.i=!1,Te(this)))}else ki(this.g),400==i&&0<h.indexOf("Unknown SID")?(this.o=3,Zt(12)):(this.o=0,Zt(13)),je(this),xe(this)}}}catch(c){}},e.mb=function(){if(this.g){var t=Oi(this.g),e=this.g.ja();this.C<e.length&&(Ee(this),be(this,t,e),this.i&&4!=t&&Te(this))}},e.cancel=function(){this.J=!0,je(this)},e.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(Yt(this.j,this.A),2!=this.L&&(Vt(),Zt(17)),je(this),this.o=2,xe(this)):Se(this,this.Y-t)};var Re=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oe(t,e){if(t){t=t.split("&");for(var i=0;i<t.length;i++){var n=t[i].indexOf("="),r=null;if(0<=n){var s=t[i].substring(0,n);r=t[i].substring(n+1)}else s=t[i];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Pe(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Pe){this.h=t.h,_e(this,t.j),this.s=t.s,this.g=t.g,De(this,t.m),this.l=t.l;var e=t.i,i=new We;i.i=e.i,e.g&&(i.g=new Map(e.g),i.h=e.h),Le(this,i),this.o=t.o}else t&&(e=String(t).match(Re))?(this.h=!1,_e(this,e[1]||"",!0),this.s=Ne(e[2]||""),this.g=Ne(e[3]||"",!0),De(this,e[4]),this.l=Ne(e[5]||"",!0),Le(this,e[6]||"",!0),this.o=Ne(e[7]||"")):(this.h=!1,this.i=new We(null,this.h))}function ke(t){return new Pe(t)}function _e(t,e,i){t.j=i?Ne(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function De(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Le(t,e,i){e instanceof We?(t.i=e,Qe(t.i,t.h)):(i||(e=Fe(e,Ge)),t.i=new We(e,t.h))}function He(t,e,i){t.i.set(e,i)}function Xe(t){return He(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ne(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Fe(t,e,i){return"string"==typeof t?(t=encodeURI(t).replace(e,Be),i&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Be(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Pe.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Fe(e,Ue,!0),":");var i=this.g;return(i||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Fe(e,Ue,!0),"@"),t.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(i=this.m)&&t.push(":",String(i))),(i=this.l)&&(this.g&&"/"!=i.charAt(0)&&t.push("/"),t.push(Fe(i,"/"==i.charAt(0)?Ye:Ke,!0))),(i=this.i.toString())&&t.push("?",i),(i=this.o)&&t.push("#",Fe(i,Je)),t.join("")};var Ue=/[#\/\?@]/g,Ke=/[#\?:]/g,Ye=/[#\?]/g,Ge=/[#\?@]/g,Je=/#/g;function We(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ze(t){t.g||(t.g=new Map,t.h=0,t.i&&Oe(t.i,function(e,i){t.add(decodeURIComponent(e.replace(/\+/g," ")),i)}))}function qe(t,e){ze(t),e=Ze(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Ve(t,e){return ze(t),e=Ze(t,e),t.g.has(e)}function $e(t,e,i){qe(t,e),0<i.length&&(t.i=null,t.g.set(Ze(t,e),b(i)),t.h+=i.length)}function Ze(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Qe(t,e){e&&!t.j&&(ze(t),t.i=null,t.g.forEach(function(t,e){var i=e.toLowerCase();e!=i&&(qe(this,e),$e(this,i,t))},t)),t.j=e}(e=We.prototype).add=function(t,e){ze(this),this.i=null,t=Ze(this,t);var i=this.g.get(t);return i||this.g.set(t,i=[]),i.push(e),this.h+=1,this},e.forEach=function(t,e){ze(this),this.g.forEach(function(i,n){i.forEach(function(i){t.call(e,i,n,this)},this)},this)},e.ta=function(){ze(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),i=[];for(let n=0;n<e.length;n++){const r=t[n];for(let t=0;t<r.length;t++)i.push(e[n])}return i},e.Z=function(t){ze(this);let e=[];if("string"==typeof t)Ve(this,t)&&(e=e.concat(this.g.get(Ze(this,t))));else{t=Array.from(this.g.values());for(let i=0;i<t.length;i++)e=e.concat(t[i])}return e},e.set=function(t,e){return ze(this),this.i=null,Ve(this,t=Ze(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},e.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var i=0;i<e.length;i++){var n=e[i];const s=encodeURIComponent(String(n)),o=this.Z(n);for(n=0;n<o.length;n++){var r=s;""!==o[n]&&(r+="="+encodeURIComponent(String(o[n]))),t.push(r)}}return this.i=t.join("&")};var ti=class{constructor(t,e){this.g=t,this.map=e}};function ei(t){this.l=t||ii,s.PerformanceNavigationTiming?t=0<(t=s.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(s.g&&s.g.Ka&&s.g.Ka()&&s.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ii=10;function ni(t){return!!t.h||!!t.g&&t.g.size>=t.j}function ri(t){return t.h?1:t.g?t.g.size:0}function si(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function oi(t,e){t.g?t.g.add(e):t.h=e}function hi(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function ai(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const i of t.g.values())e=e.concat(i.F);return e}return b(t.i)}ei.prototype.cancel=function(){if(this.i=ai(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var li=class{stringify(t){return s.JSON.stringify(t,void 0)}parse(t){return s.JSON.parse(t,void 0)}};function ui(){this.g=new li}function ci(t,e,i){const n=i||"";try{Me(t,function(t,i){let r=t;h(t)&&(r=mt(t)),e.push(n+i+"="+encodeURIComponent(r))})}catch(r){throw e.push(n+"type="+encodeURIComponent("_badmap")),r}}function fi(t,e){const i=new Ft;if(s.Image){const n=new Image;n.onload=p(gi,i,n,"TestLoadImage: loaded",!0,e),n.onerror=p(gi,i,n,"TestLoadImage: error",!1,e),n.onabort=p(gi,i,n,"TestLoadImage: abort",!1,e),n.ontimeout=p(gi,i,n,"TestLoadImage: timeout",!1,e),s.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=t}else e(!1)}function gi(t,e,i,n,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(n)}catch(s){}}function pi(t){this.l=t.ec||null,this.j=t.ob||!1}function di(t,e){dt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=yi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}d(pi,ne),pi.prototype.g=function(){return new di(this.l,this.j)},pi.prototype.i=function(t){return function(){return t}}({}),d(di,dt);var yi=0;function vi(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function mi(t){t.readyState=4,t.l=null,t.j=null,t.A=null,bi(t)}function bi(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(e=di.prototype).open=function(t,e){if(this.readyState!=yi)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,bi(this)},e.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||s).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},e.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mi(this)),this.readyState=yi},e.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,bi(this)),this.g&&(this.readyState=3,bi(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==s.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vi(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},e.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?mi(this):bi(this),3==this.readyState&&vi(this)}},e.Za=function(t){this.g&&(this.response=this.responseText=t,mi(this))},e.Ya=function(t){this.g&&(this.response=t,mi(this))},e.ka=function(){this.g&&mi(this)},e.setRequestHeader=function(t,e){this.v.append(t,e)},e.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var i=e.next();!i.done;)i=i.value,t.push(i[0]+": "+i[1]),i=e.next();return t.join("\r\n")},Object.defineProperty(di.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var wi=s.JSON.parse;function Ti(t){dt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Si,this.L=this.M=!1}d(Ti,dt);var Si="",Ei=/^https?$/i,xi=["POST","PUT"];function ji(t){return O&&"number"==typeof t.timeout&&void 0!==t.ontimeout}function Ci(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ai(t),Mi(t)}function Ai(t){t.F||(t.F=!0,yt(t,"complete"),yt(t,"error"))}function Ii(t){if(t.h&&void 0!==r&&(!t.C[1]||4!=Oi(t)||2!=t.da()))if(t.v&&4==Oi(t))kt(t.La,0,t);else if(yt(t,"readystatechange"),4==Oi(t)){t.h=!1;try{const r=t.da();t:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var i;if(!(i=e)){var n;if(n=0===r){var o=String(t.I).match(Re)[1]||null;!o&&s.self&&s.self.location&&(o=s.self.location.protocol.slice(0,-1)),n=!Ei.test(o?o.toLowerCase():"")}i=n}if(i)yt(t,"complete"),yt(t,"success");else{t.m=6;try{var h=2<Oi(t)?t.g.statusText:""}catch(a){h=""}t.j=h+" ["+t.da()+"]",Ai(t)}}finally{Mi(t)}}}function Mi(t,e){if(t.g){Ri(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||yt(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function Ri(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(s.clearTimeout(t.A),t.A=null)}function Oi(t){return t.g?t.g.readyState:0}function Pi(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Si:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ki(t){const e={};t=(t.g&&2<=Oi(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let n=0;n<t.length;n++){if(E(t[n]))continue;var i=xt(t[n]);const r=i[0];if("string"!=typeof(i=i[1]))continue;i=i.trim();const s=e[r]||[];e[r]=s,s.push(i)}q(e,function(t){return t.join(", ")})}function _i(t){let e="";return z(t,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function Di(t,e,i){t:{for(n in i){var n=!1;break t}n=!0}n||(i=_i(i),"string"==typeof t?null!=i&&encodeURIComponent(String(i)):He(t,e,i))}function Li(t,e,i){return i&&i.internalChannelParams&&i.internalChannelParams[t]||e}function Hi(t){this.Ga=0,this.j=[],this.l=new Ft,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Li("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Li("baseRetryDelayMs",5e3,t),this.hb=Li("retryDelaySeedMs",1e4,t),this.eb=Li("forwardChannelMaxRetries",2,t),this.xa=Li("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new ei(t&&t.concurrentRequestLimit),this.Ja=new ui,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Xi(t){if(Fi(t),3==t.H){var e=t.W++,i=ke(t.I);if(He(i,"SID",t.K),He(i,"RID",e),He(i,"TYPE","terminate"),Yi(t,i),(e=new ce(t,t.l,e)).L=2,e.v=Xe(ke(i)),i=!1,s.navigator&&s.navigator.sendBeacon)try{i=s.navigator.sendBeacon(e.v.toString(),"")}catch(n){}!i&&s.Image&&((new Image).src=e.v,i=!0),i||(e.g=nn(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Te(e)}tn(t)}function Ni(t){t.g&&(zi(t),t.g.cancel(),t.g=null)}function Fi(t){Ni(t),t.u&&(s.clearTimeout(t.u),t.u=null),Vi(t),t.i.cancel(),t.m&&("number"==typeof t.m&&s.clearTimeout(t.m),t.m=null)}function Bi(t){if(!ni(t.i)&&!t.m){t.m=!0;var e=t.Na;Ct||Mt(),At||(Ct(),At=!0),It.add(e,t),t.C=0}}function Ui(t,e){return!(ri(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.j=e.F.concat(t.j),!0):!(1==t.H||2==t.H||t.C>=(t.cb?0:t.eb))&&(t.m=te(g(t.Na,t,e),Zi(t,t.C)),t.C++,!0))}function Ki(t,e){var i;i=e?e.m:t.W++;const n=ke(t.I);He(n,"SID",t.K),He(n,"RID",i),He(n,"AID",t.V),Yi(t,n),t.o&&t.s&&Di(n,t.o,t.s),i=new ce(t,t.l,i,t.C+1),null===t.o&&(i.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Gi(t,i,1e3),i.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),oi(t.i,i),ye(i,n,e)}function Yi(t,e){t.na&&z(t.na,function(t,i){He(e,i,t)}),t.h&&Me({},function(t,i){He(e,i,t)})}function Gi(t,e,i){i=Math.min(t.j.length,i);var n=t.h?g(t.h.Va,t.h,t):null;t:{var r=t.j;let e=-1;for(;;){const t=["count="+i];-1==e?0<i?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let o=!0;for(let h=0;h<i;h++){let i=r[h].g;const a=r[h].map;if(0>(i-=e))e=Math.max(0,r[h].g-100),o=!1;else try{ci(a,t,"req"+i+"_")}catch(s){n&&n(a)}}if(o){n=t.join("&");break t}}}return t=t.j.splice(0,i),e.F=t,n}function Ji(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ct||Mt(),At||(Ct(),At=!0),It.add(e,t),t.A=0}}function Wi(t){return!(t.g||t.u||3<=t.A)&&(t.ba++,t.u=te(g(t.Ma,t),Zi(t,t.A)),t.A++,!0)}function zi(t){null!=t.B&&(s.clearTimeout(t.B),t.B=null)}function qi(t){t.g=new ce(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=ke(t.wa);He(e,"RID","rpc"),He(e,"SID",t.K),He(e,"AID",t.V),He(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&He(e,"TO",t.qa),He(e,"TYPE","xmlhttp"),Yi(t,e),t.o&&t.s&&Di(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var i=t.g;t=t.pa,i.L=1,i.v=Xe(ke(e)),i.s=null,i.S=!0,ve(i,t)}function Vi(t){null!=t.v&&(s.clearTimeout(t.v),t.v=null)}function $i(t,e){var i=null;if(t.g==e){Vi(t),zi(t),t.g=null;var n=2}else{if(!si(t.i,e))return;i=e.F,hi(t.i,e),n=1}if(0!=t.H)if(e.i)if(1==n){i=e.s?e.s.length:0,e=Date.now()-e.G;var r=t.C;yt(n=zt(),new Qt(n,i)),Bi(t)}else Ji(t);else if(3==(r=e.o)||0==r&&0<e.ca||!(1==n&&Ui(t,e)||2==n&&Wi(t)))switch(i&&0<i.length&&(e=t.i,e.i=e.i.concat(i)),r){case 1:Qi(t,5);break;case 4:Qi(t,10);break;case 3:Qi(t,6);break;default:Qi(t,2)}}function Zi(t,e){let i=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(i*=2),i*e}function Qi(t,e){if(t.l.info("Error code "+e),2==e){var i=null;t.h&&(i=null);var n=g(t.pb,t);i||(i=new Pe("//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||_e(i,"https"),Xe(i)),fi(i.toString(),n)}else Zt(2);t.H=0,t.h&&t.h.za(e),tn(t),Fi(t)}function tn(t){if(t.H=0,t.ma=[],t.h){const e=ai(t.i);0==e.length&&0==t.j.length||(w(t.ma,e),w(t.ma,t.j),t.i.i.length=0,b(t.j),t.j.length=0),t.h.ya()}}function en(t,e,i){var n=i instanceof Pe?ke(i):new Pe(i);if(""!=n.g)e&&(n.g=e+"."+n.g),De(n,n.m);else{var r=s.location;n=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var o=new Pe(null);n&&_e(o,n),e&&(o.g=e),r&&De(o,r),i&&(o.l=i),n=o}return i=t.F,e=t.Da,i&&e&&He(n,i,e),He(n,"VER",t.ra),Yi(t,n),n}function nn(t,e,i){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=i&&t.Ha&&!t.va?new Ti(new pi({ob:!0})):new Ti(t.va)).Oa(t.J),e}function rn(){}function sn(){if(O&&!(10<=Number(B)))throw Error("Environmental error: no available transport.")}function on(t,e){dt.call(this),this.g=new Hi(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!E(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!E(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new ln(this)}function hn(t){ae.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const i in e){t=i;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function an(){le.call(this),this.status=1}function ln(t){this.g=t}function un(){this.blockSize=-1}function cn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function fn(t,e,i){i||(i=0);var n=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)n[r]=e.charCodeAt(i++)|e.charCodeAt(i++)<<8|e.charCodeAt(i++)<<16|e.charCodeAt(i++)<<24;else for(r=0;16>r;++r)n[r]=e[i++]|e[i++]<<8|e[i++]<<16|e[i++]<<24;e=t.g[0],i=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^i&(r^s))+n[0]+3614090360&4294967295;o=(i=(r=(s=(e=(i=(r=(s=(e=(i=(r=(s=(e=(i=(r=(s=(e=(i=(r=(s=(e=(i=(r=(s=(e=(i=(r=(s=(e=(i=(r=(s=(e=(i=(r=(s=(e=(i=(r=(s=(e=(i=(r=(s=(e=(i=(r=(s=(e=(i=(r=(s=(e=(i=(r=(s=(e=(i=(r=(s=(e=i+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(i^r))+n[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(i^s&(e^i))+n[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=i+(e^r&(s^e))+n[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^i&(r^s))+n[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(i^r))+n[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(i^s&(e^i))+n[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=i+(e^r&(s^e))+n[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^i&(r^s))+n[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(i^r))+n[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(i^s&(e^i))+n[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=i+(e^r&(s^e))+n[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^i&(r^s))+n[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(i^r))+n[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(i^s&(e^i))+n[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=i+(e^r&(s^e))+n[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(i^r))+n[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(i^r&(e^i))+n[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^i&(s^e))+n[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=i+(s^e&(r^s))+n[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(i^r))+n[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(i^r&(e^i))+n[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^i&(s^e))+n[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=i+(s^e&(r^s))+n[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(i^r))+n[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(i^r&(e^i))+n[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^i&(s^e))+n[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=i+(s^e&(r^s))+n[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(i^r))+n[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(i^r&(e^i))+n[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^i&(s^e))+n[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=i+(s^e&(r^s))+n[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^r^s)+n[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^i^r)+n[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^i)+n[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=i+(r^s^e)+n[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^r^s)+n[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^i^r)+n[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^i)+n[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=i+(r^s^e)+n[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^r^s)+n[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^i^r)+n[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^i)+n[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=i+(r^s^e)+n[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^r^s)+n[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^i^r)+n[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^i)+n[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=i+(r^s^e)+n[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(i|~s))+n[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(i^(e|~r))+n[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~i))+n[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=i+(s^(r|~e))+n[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(i|~s))+n[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(i^(e|~r))+n[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~i))+n[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=i+(s^(r|~e))+n[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(i|~s))+n[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(i^(e|~r))+n[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~i))+n[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=i+(s^(r|~e))+n[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=i+((o=e+(r^(i|~s))+n[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(i^(e|~r))+n[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~i))+n[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+n[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}function gn(t,e){this.h=e;for(var i=[],n=!0,r=t.length-1;0<=r;r--){var s=0|t[r];n&&s==e||(i[r]=s,n=!1)}this.g=i}(e=Ti.prototype).Oa=function(t){this.M=t},e.ha=function(t,e,i,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():oe.g(),this.C=this.u?re(this.u):re(oe),this.g.onreadystatechange=g(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){return void Ci(this,o)}if(t=i||"",i=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var r in n)i.set(r,n[r]);else{if("function"!=typeof n.keys||"function"!=typeof n.get)throw Error("Unknown input type for opt_headers: "+String(n));for(const t of n.keys())i.set(t,n.get(t))}n=Array.from(i.keys()).find(t=>"content-type"==t.toLowerCase()),r=s.FormData&&t instanceof s.FormData,!(0<=m(xi,e))||n||r||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,h]of i)this.g.setRequestHeader(s,h);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ri(this),0<this.B&&((this.L=ji(this.g))?(this.g.timeout=this.B,this.g.ontimeout=g(this.ua,this)):this.A=kt(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Ci(this,o)}},e.ua=function(){void 0!==r&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yt(this,"timeout"),this.abort(8))},e.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,yt(this,"complete"),yt(this,"abort"),Mi(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Mi(this,!0)),Ti.$.N.call(this)},e.La=function(){this.s||(this.G||this.v||this.l?Ii(this):this.kb())},e.kb=function(){Ii(this)},e.isActive=function(){return!!this.g},e.da=function(){try{return 2<Oi(this)?this.g.status:-1}catch(t){return-1}},e.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},e.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),wi(e)}},e.Ia=function(){return this.m},e.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(e=Hi.prototype).ra=8,e.H=1,e.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new ce(this,this.l,t);let s=this.s;if(this.U&&(s?Z(s=V(s),this.U):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)t:{for(var e=0,i=0;i<this.j.length;i++){var n=this.j[i];if(void 0===(n="__data__"in n.map&&"string"==typeof(n=n.map.__data__)?n.length:void 0))break;if(4096<(e+=n)){e=i;break t}if(4096===e||i===this.j.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Gi(this,r,e),He(i=ke(this.I),"RID",t),He(i,"CVER",22),this.F&&He(i,"X-HTTP-Session-Id",this.F),Yi(this,i),s&&(this.O?e="headers="+encodeURIComponent(String(_i(s)))+"&"+e:this.o&&Di(i,this.o,s)),oi(this.i,r),this.bb&&He(i,"TYPE","init"),this.P?(He(i,"$req",e),He(i,"SID","null"),r.aa=!0,ye(r,i,null)):ye(r,i,e),this.H=2}}else 3==this.H&&(t?Ki(this,t):0==this.j.length||ni(this.i)||Ki(this))},e.Ma=function(){if(this.u=null,qi(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=te(g(this.jb,this),t)}},e.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Zt(10),Ni(this),qi(this))},e.ib=function(){null!=this.v&&(this.v=null,Ni(this),Wi(this),Zt(19))},e.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Zt(2)):(this.l.info("Failed to ping google.com"),Zt(1))},e.isActive=function(){return!!this.h&&this.h.isActive(this)},(e=rn.prototype).Ba=function(){},e.Aa=function(){},e.za=function(){},e.ya=function(){},e.isActive=function(){return!0},e.Va=function(){},sn.prototype.g=function(t,e){return new on(t,e)},d(on,dt),on.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,i=this.h||void 0;Zt(0),t.Y=e,t.na=i||{},t.G=t.aa,t.I=en(t,null,t.Y),Bi(t)},on.prototype.close=function(){Xi(this.g)},on.prototype.u=function(t){var e=this.g;if("string"==typeof t){var i={};i.__data__=t,t=i}else this.v&&((i={}).__data__=mt(t),t=i);e.j.push(new ti(e.fb++,t)),3==e.H&&Bi(e)},on.prototype.N=function(){this.g.h=null,delete this.j,Xi(this.g),delete this.g,on.$.N.call(this)},d(hn,ae),d(an,le),d(ln,rn),ln.prototype.Ba=function(){yt(this.g,"a")},ln.prototype.Aa=function(t){yt(this.g,new hn(t))},ln.prototype.za=function(t){yt(this.g,new an)},ln.prototype.ya=function(){yt(this.g,"b")},d(cn,un),cn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},cn.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var i=e-this.blockSize,n=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=i;)fn(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(n[r++]=t.charCodeAt(s++),r==this.blockSize){fn(this,n),r=0;break}}else for(;s<e;)if(n[r++]=t[s++],r==this.blockSize){fn(this,n),r=0;break}}this.h=r,this.i+=e},cn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var i=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&i,i/=256;for(this.j(t),t=Array(16),e=i=0;4>e;++e)for(var n=0;32>n;n+=8)t[i++]=this.g[e]>>>n&255;return t};var pn={};function dn(t){return-128<=t&&128>t?A(t,function(t){return new gn([0|t],0>t?-1:0)}):new gn([0|t],0>t?-1:0)}function yn(t){if(isNaN(t)||!isFinite(t))return bn;if(0>t)return xn(yn(-t));for(var e=[],i=1,n=0;t>=i;n++)e[n]=t/i|0,i*=mn;return new gn(e,0)}function vn(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return xn(vn(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=yn(Math.pow(e,8)),n=bn,r=0;r<t.length;r+=8){var s=Math.min(8,t.length-r),o=parseInt(t.substring(r,r+s),e);8>s?(s=yn(Math.pow(e,s)),n=n.R(s).add(yn(o))):n=(n=n.R(i)).add(yn(o))}return n}var mn=4294967296,bn=dn(0),wn=dn(1),Tn=dn(16777216);function Sn(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function En(t){return-1==t.h}function xn(t){for(var e=t.g.length,i=[],n=0;n<e;n++)i[n]=~t.g[n];return new gn(i,~t.h).add(wn)}function jn(t,e){return t.add(xn(e))}function Cn(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function An(t,e){this.g=t,this.h=e}function In(t,e){if(Sn(e))throw Error("division by zero");if(Sn(t))return new An(bn,bn);if(En(t))return e=In(xn(t),e),new An(xn(e.g),xn(e.h));if(En(e))return e=In(t,xn(e)),new An(xn(e.g),e.h);if(30<t.g.length){if(En(t)||En(e))throw Error("slowDivide_ only works with positive integers.");for(var i=wn,n=e;0>=n.X(t);)i=Mn(i),n=Mn(n);var r=Rn(i,1),s=Rn(n,1);for(n=Rn(n,2),i=Rn(i,2);!Sn(n);){var o=s.add(n);0>=o.X(t)&&(r=r.add(i),s=o),n=Rn(n,1),i=Rn(i,1)}return e=jn(t,r.R(e)),new An(r,e)}for(r=bn;0<=t.X(e);){for(i=Math.max(1,Math.floor(t.ea()/e.ea())),n=48>=(n=Math.ceil(Math.log(i)/Math.LN2))?1:Math.pow(2,n-48),o=(s=yn(i)).R(e);En(o)||0<o.X(t);)o=(s=yn(i-=n)).R(e);Sn(s)&&(s=wn),r=r.add(s),t=jn(t,o)}return new An(r,t)}function Mn(t){for(var e=t.g.length+1,i=[],n=0;n<e;n++)i[n]=t.D(n)<<1|t.D(n-1)>>>31;return new gn(i,t.h)}function Rn(t,e){var i=e>>5;e%=32;for(var n=t.g.length-i,r=[],s=0;s<n;s++)r[s]=0<e?t.D(s+i)>>>e|t.D(s+i+1)<<32-e:t.D(s+i);return new gn(r,t.h)}(e=gn.prototype).ea=function(){if(En(this))return-xn(this).ea();for(var t=0,e=1,i=0;i<this.g.length;i++){var n=this.D(i);t+=(0<=n?n:mn+n)*e,e*=mn}return t},e.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Sn(this))return"0";if(En(this))return"-"+xn(this).toString(t);for(var e=yn(Math.pow(t,6)),i=this,n="";;){var r=In(i,e).g,s=((0<(i=jn(i,r.R(e))).g.length?i.g[0]:i.h)>>>0).toString(t);if(Sn(i=r))return s+n;for(;6>s.length;)s="0"+s;n=s+n}},e.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},e.X=function(t){return En(t=jn(this,t))?-1:Sn(t)?0:1},e.abs=function(){return En(this)?xn(this):this},e.add=function(t){for(var e=Math.max(this.g.length,t.g.length),i=[],n=0,r=0;r<=e;r++){var s=n+(65535&this.D(r))+(65535&t.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);n=o>>>16,s&=65535,o&=65535,i[r]=o<<16|s}return new gn(i,-2147483648&i[i.length-1]?-1:0)},e.R=function(t){if(Sn(this)||Sn(t))return bn;if(En(this))return En(t)?xn(this).R(xn(t)):xn(xn(this).R(t));if(En(t))return xn(this.R(xn(t)));if(0>this.X(Tn)&&0>t.X(Tn))return yn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,i=[],n=0;n<2*e;n++)i[n]=0;for(n=0;n<this.g.length;n++)for(var r=0;r<t.g.length;r++){var s=this.D(n)>>>16,o=65535&this.D(n),h=t.D(r)>>>16,a=65535&t.D(r);i[2*n+2*r]+=o*a,Cn(i,2*n+2*r),i[2*n+2*r+1]+=s*a,Cn(i,2*n+2*r+1),i[2*n+2*r+1]+=o*h,Cn(i,2*n+2*r+1),i[2*n+2*r+2]+=s*h,Cn(i,2*n+2*r+2)}for(n=0;n<e;n++)i[n]=i[2*n+1]<<16|i[2*n];for(n=e;n<2*e;n++)i[n]=0;return new gn(i,0)},e.gb=function(t){return In(this,t).h},e.and=function(t){for(var e=Math.max(this.g.length,t.g.length),i=[],n=0;n<e;n++)i[n]=this.D(n)&t.D(n);return new gn(i,this.h&t.h)},e.or=function(t){for(var e=Math.max(this.g.length,t.g.length),i=[],n=0;n<e;n++)i[n]=this.D(n)|t.D(n);return new gn(i,this.h|t.h)},e.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),i=[],n=0;n<e;n++)i[n]=this.D(n)^t.D(n);return new gn(i,this.h^t.h)},sn.prototype.createWebChannel=sn.prototype.g,on.prototype.send=on.prototype.u,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,ee.NO_ERROR=0,ee.TIMEOUT=8,ee.HTTP_ERROR=6,ie.COMPLETE="complete",se.EventType=he,he.OPEN="a",he.CLOSE="b",he.ERROR="c",he.MESSAGE="d",dt.prototype.listen=dt.prototype.O,Ti.prototype.listenOnce=Ti.prototype.P,Ti.prototype.getLastError=Ti.prototype.Sa,Ti.prototype.getLastErrorCode=Ti.prototype.Ia,Ti.prototype.getStatus=Ti.prototype.da,Ti.prototype.getResponseJson=Ti.prototype.Wa,Ti.prototype.getResponseText=Ti.prototype.ja,Ti.prototype.send=Ti.prototype.ha,Ti.prototype.setWithCredentials=Ti.prototype.Oa,cn.prototype.digest=cn.prototype.l,cn.prototype.reset=cn.prototype.reset,cn.prototype.update=cn.prototype.j,gn.prototype.add=gn.prototype.add,gn.prototype.multiply=gn.prototype.R,gn.prototype.modulo=gn.prototype.gb,gn.prototype.compare=gn.prototype.X,gn.prototype.toNumber=gn.prototype.ea,gn.prototype.toString=gn.prototype.toString,gn.prototype.getBits=gn.prototype.D,gn.fromNumber=yn,gn.fromString=vn;var On=exports.createWebChannelTransport=n.createWebChannelTransport=function(){return new sn},Pn=exports.getStatEventTarget=n.getStatEventTarget=function(){return zt()},kn=exports.ErrorCode=n.ErrorCode=ee,_n=exports.EventType=n.EventType=ie,Dn=exports.Event=n.Event=Jt,Ln=exports.Stat=n.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Hn=exports.FetchXmlHttpFactory=n.FetchXmlHttpFactory=pi,Xn=exports.WebChannel=n.WebChannel=se,Nn=exports.XhrIo=n.XhrIo=Ti,Fn=exports.Md5=n.Md5=cn,Bn=exports.Integer=n.Integer=gn;
},{}],"lBbe":[function(require,module,exports) {
var define;
var process = require("process");
var e,t=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports._TestingHooks=exports._FieldPath=exports._EmptyAuthCredentialsProvider=exports._EmptyAppCheckTokenProvider=exports._DocumentKey=exports._DatabaseId=exports._ByteString=exports.WriteBatch=exports.Transaction=exports.Timestamp=exports.SnapshotMetadata=exports.QueryStartAtConstraint=exports.QuerySnapshot=exports.QueryOrderByConstraint=exports.QueryLimitConstraint=exports.QueryFieldFilterConstraint=exports.QueryEndAtConstraint=exports.QueryDocumentSnapshot=exports.QueryConstraint=exports.QueryCompositeFilterConstraint=exports.Query=exports.PersistentCacheIndexManager=exports.LoadBundleTask=exports.GeoPoint=exports.FirestoreError=exports.Firestore=exports.FieldValue=exports.FieldPath=exports.DocumentSnapshot=exports.DocumentReference=exports.CollectionReference=exports.CACHE_SIZE_UNLIMITED=exports.Bytes=exports.AggregateQuerySnapshot=exports.AggregateField=exports.AbstractUserDataWriter=void 0,exports._cast=df,exports._debugAssert=J,exports._isBase64Available=Ut,exports._logWarn=W,exports._validateIsNotUsedTogether=cf,exports.addDoc=_d,exports.aggregateFieldEqual=ud,exports.aggregateQuerySnapshotEqual=od,exports.and=Oh,exports.arrayRemove=Jd,exports.arrayUnion=Xd,exports.average=id,exports.clearIndexedDbPersistence=Vf,exports.collection=xf,exports.collectionGroup=bf,exports.connectFirestoreEmulator=mf,exports.count=ad,exports.deleteAllPersistentCacheIndexes=uv,exports.deleteDoc=Id,exports.deleteField=Hd,exports.disableNetwork=Bf,exports.disablePersistentCacheIndexAutoCreation=av,exports.doc=If,exports.documentId=Xf,exports.enableIndexedDbPersistence=Lf,exports.enableMultiTabIndexedDbPersistence=Of,exports.enableNetwork=Uf,exports.enablePersistentCacheIndexAutoCreation=iv,exports.endAt=Wh,exports.endBefore=Qh,exports.ensureFirestoreConfigured=Rf,exports.executeWrite=Sd,exports.getAggregateFromServer=Ad,exports.getCountFromServer=Dd,exports.getDoc=vd,exports.getDocFromCache=yd,exports.getDocFromServer=md,exports.getDocs=gd,exports.getDocsFromCache=kd,exports.getDocsFromServer=wd,exports.getFirestore=Ff,exports.getPersistentCacheIndexManager=rv,exports.increment=Zd,exports.initializeFirestore=Nf,exports.limit=Uh,exports.limitToLast=Bh,exports.loadBundle=Gf,exports.memoryEagerGarbageCollector=Ld,exports.memoryLocalCache=Md,exports.memoryLruGarbageCollector=Od,exports.namedQuery=Kf,exports.onSnapshot=Ed,exports.onSnapshotsInSync=Td,exports.or=Lh,exports.orderBy=Vh,exports.persistentLocalCache=Vd,exports.persistentMultipleTabManager=zd,exports.persistentSingleTabManager=Bd,exports.query=Nh,exports.queryEqual=Ef,exports.refEqual=_f,exports.runTransaction=Wd,exports.serverTimestamp=Yd,exports.setDoc=xd,exports.setIndexConfiguration=ev,exports.setLogLevel=K,exports.snapshotEqual=dd,exports.startAfter=Kh,exports.startAt=Gh,exports.sum=rd,exports.terminate=zf,exports.updateDoc=bd,exports.waitForPendingWrites=qf,exports.where=Rh,exports.writeBatch=$d;var n=require("@firebase/app"),r=require("@firebase/component"),i=require("@firebase/logger"),a=require("@firebase/util"),u=require("@firebase/webchannel-wrapper");function o(){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=s(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}function c(e,t){return h(e)||f(e,t)||D(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,u,o=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(c)throw i}}return o}}function h(e){if(Array.isArray(e))return e}function d(e){var t="function"==typeof Map?new Map:void 0;return(d=function(e){if(null===e||!p(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return v(e,arguments,T(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),x(n,e)})(e)}function v(e,t,n){return(v=E()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&x(i,n.prototype),i}).apply(null,arguments)}function p(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=D(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){o=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(o)throw a}}}}function m(){"use strict";m=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,u=Object.create(a.prototype),o=new N(r||[]);return i(u,"_invoke",{value:S(e,n,o)}),u}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",d="suspendedYield",v="executing",p="completed",y={};function g(){}function k(){}function w(){}var x={};c(x,u,function(){return this});var b=Object.getPrototypeOf,I=b&&b(b(F([])));I&&I!==n&&r.call(I,u)&&(x=I);var _=w.prototype=g.prototype=Object.create(x);function E(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function T(e,t){function n(i,a,u,o){var s=f(e[i],e,a);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==R(l)&&r.call(l,"__await")?t.resolve(l.__await).then(function(e){n("next",e,u,o)},function(e){n("throw",e,u,o)}):t.resolve(l).then(function(e){c.value=e,u(c)},function(e){return n("throw",e,u,o)})}o(s.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t(function(t,i){n(e,r,t,i)})}return a=a?a.then(i,i):i()}})}function S(t,n,r){var i=h;return function(a,u){if(i===v)throw new Error("Generator is already running");if(i===p){if("throw"===a)throw u;return{value:e,done:!0}}for(r.method=a,r.arg=u;;){var o=r.delegate;if(o){var s=C(o,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var c=f(t,n,r);if("normal"===c.type){if(i=r.done?p:d,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=p,r.method="throw",r.arg=c.arg)}}}function C(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=f(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var u=a.arg;return u?u.done?(n[t.resultName]=u.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):u:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function F(t){if(t||""===t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(R(t)+" is not iterable")}return k.prototype=w,i(_,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:k,configurable:!0}),k.displayName=c(w,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},E(T.prototype),c(T.prototype,o,function(){return this}),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var u=new T(l(e,n,r,i),a);return t.isGeneratorFunction(n)?u:u.next().then(function(e){return e.done?e.value:u.next()})},E(_),c(_,s,"Generator"),c(_,u,function(){return this}),c(_,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=F,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return o.type="throw",o.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],o=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var s=r.call(u,"catchLoc"),c=r.call(u,"finallyLoc");if(s&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(s){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:F(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function g(e,t,n,r,i,a,u){try{var o=e[a](u),s=o.value}catch(c){return void n(c)}o.done?t(s):Promise.resolve(s).then(r,i)}function k(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function u(e){g(a,r,i,u,o,"next",e)}function o(e){g(a,r,i,u,o,"throw",e)}u(void 0)})}}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}function x(e,t){return(x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=E();return function(){var n,r=T(e);if(t){var i=T(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return I(this,n)}}function I(e,t){if(t&&("object"===R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e){return N(e)||A(e)||D(e)||C()}function C(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function D(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}function A(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function N(e){if(Array.isArray(e))return F(e)}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M(r.key),r)}}function O(e,t,n){return t&&L(e.prototype,t),n&&L(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function M(e){var t=V(e,"string");return"symbol"===R(t)?t:String(t)}function V(e,t){if("object"!==R(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var q="@firebase/firestore",U=function(){function e(t){P(this,e),this.uid=t}return O(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();U.UNAUTHENTICATED=new U(null),U.GOOGLE_CREDENTIALS=new U("google-credentials-uid"),U.FIRST_PARTY=new U("first-party-uid"),U.MOCK_USER=new U("mock-user");var B="10.4.0",z=new i.Logger("@firebase/firestore");function G(){return z.logLevel}function K(e){z.setLogLevel(e)}function j(e){if(z.logLevel<=i.LogLevel.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(H);z.debug.apply(z,["Firestore (".concat(B,"): ").concat(e)].concat(S(a)))}}function Q(e){if(z.logLevel<=i.LogLevel.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(H);z.error.apply(z,["Firestore (".concat(B,"): ").concat(e)].concat(S(a)))}}function W(e){if(z.logLevel<=i.LogLevel.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(H);z.warn.apply(z,["Firestore (".concat(B,"): ").concat(e)].concat(S(a)))}}function H(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(B,") INTERNAL ASSERTION FAILED: ")+e;throw Q(t),new Error(t)}function X(e,t){e||Y()}function J(e,t){e||Y()}function Z(e,t){return e}var $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ee=exports.FirestoreError=function(e){w(n,a.FirebaseError);var t=b(n);function n(e,r){var i;return P(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return O(n)}(),te=O(function e(){var t=this;P(this,e),this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}),ne=O(function e(t,n){P(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))}),re=exports._EmptyAuthCredentialsProvider=function(){function e(){P(this,e)}return O(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t(U.UNAUTHENTICATED)})}},{key:"shutdown",value:function(){}}]),e}(),ie=function(){function e(t){P(this,e),this.token=t,this.changeListener=null}return O(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable(function(){return t(n.token.user)})}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),ae=function(){function e(t){P(this,e),this.t=t,this.currentUser=U.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return O(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new te;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new te,e.enqueueRetryable(function(){return i(n.currentUser)})};var u=function(){var t=a;e.enqueueRetryable(k(m().mark(function e(){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}},e)})))},o=function(e){j("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),u()};this.t.onInit(function(e){return o(e)}),setTimeout(function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?o(e):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new te)}},0),u()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return e.i!==t?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(X("string"==typeof n.accessToken),new ne(n.accessToken,e.currentUser)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return X(null===e||"string"==typeof e),new U(e)}}]),e}(),ue=function(){function e(t,n,r){P(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=U.FIRST_PARTY,this.I=new Map}return O(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),oe=function(){function e(t,n,r){P(this,e),this.l=t,this.h=n,this.P=r}return O(e,[{key:"getToken",value:function(){return Promise.resolve(new ue(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t(U.FIRST_PARTY)})}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),se=O(function e(t){P(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}),ce=function(){function e(t){P(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return O(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&j("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,j("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable(function(){return r(t)})};var i=function(e){j("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit(function(e){return i(e)}),setTimeout(function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(function(t){return t?(X("string"==typeof t.token),e.R=t.token,new se(t.token)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),le=exports._EmptyAppCheckTokenProvider=function(){function e(){P(this,e)}return O(e,[{key:"getToken",value:function(){return Promise.resolve(new se(""))}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){}},{key:"shutdown",value:function(){}}]),e}();function fe(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var he=function(){function e(){P(this,e)}return O(e,null,[{key:"V",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=fe(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function de(e,t){return e<t?-1:e>t?1:0}function ve(e,t,n){return e.length===t.length&&e.every(function(e,r){return n(e,t[r])})}function pe(e){return e+"\0"}var ye=exports.Timestamp=function(){function e(t,n){if(P(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new ee($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ee($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ee($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return O(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),me=function(){function e(t){P(this,e),this.timestamp=t}return O(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new ye(0,0))}},{key:"max",value:function(){return new e(new ye(253402300799,999999999))}}]),e}(),ge=function(){function e(t,n,r){P(this,e),void 0===n?n=0:n>t.length&&Y(),void 0===r?r=t.length-n:r>t.length-n&&Y(),this.segments=t,this.offset=n,this.len=r}return O(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),ke=function(e){w(n,ge);var t=b(n);function n(){return P(this,n),t.apply(this,arguments)}return O(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,u=r;a<u.length;a++){var o=u[a];if(o.indexOf("//")>=0)throw new ee($.INVALID_ARGUMENT,"Invalid segment (".concat(o,"). Paths must not contain // in them."));e.push.apply(e,S(o.split("/").filter(function(e){return e.length>0})))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(),we=/^[_a-zA-Z][_a-zA-Z0-9]*$/,xe=exports._FieldPath=function(e){w(n,ge);var t=b(n);function n(){return P(this,n),t.apply(this,arguments)}return O(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map(function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return we.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new ee($.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},u=!1;i<e.length;){var o=e[i];if("\\"===o){if(i+1===e.length)throw new ee($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new ee($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===o?(u=!u,i++):"."!==o||u?(r+=o,i++):(a(),i++)}if(a(),u)throw new ee($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(),be=exports._DocumentKey=function(){function e(t){P(this,e),this.path=t}return O(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===ke.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(ke.fromString(t))}},{key:"fromName",value:function(t){return new e(ke.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(ke.emptyPath())}},{key:"comparator",value:function(e,t){return ke.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new ke(t.slice()))}}]),e}(),Ie=O(function e(t,n,r,i){P(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i});function _e(e){return e.fields.find(function(e){return 2===e.kind})}function Ee(e){return e.fields.filter(function(e){return 2!==e.kind})}function Te(e,t){var n=de(e.collectionGroup,t.collectionGroup);if(0!==n)return n;for(var r=0;r<Math.min(e.fields.length,t.fields.length);++r)if(0!==(n=Ce(e.fields[r],t.fields[r])))return n;return de(e.fields.length,t.fields.length)}Ie.UNKNOWN_ID=-1;var Se=O(function e(t,n){P(this,e),this.fieldPath=t,this.kind=n});function Ce(e,t){var n=xe.comparator(e.fieldPath,t.fieldPath);return 0!==n?n:de(e.kind,t.kind)}var De=function(){function e(t,n){P(this,e),this.sequenceNumber=t,this.offset=n}return O(e,null,[{key:"empty",value:function(){return new e(0,Fe.min())}}]),e}();function Ae(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=me.fromTimestamp(1e9===r?new ye(n+1,0):new ye(n,r));return new Fe(i,be.empty(),t)}function Ne(e){return new Fe(e.readTime,e.key,-1)}var Fe=function(){function e(t,n,r){P(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return O(e,null,[{key:"min",value:function(){return new e(me.min(),be.empty(),-1)}},{key:"max",value:function(){return new e(me.max(),be.empty(),-1)}}]),e}();function Re(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=be.comparator(e.documentKey,t.documentKey))?n:de(e.largestBatchId,t.largestBatchId)}var Pe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Le=function(){function e(){P(this,e),this.onCommittedListeners=[]}return O(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach(function(e){return e()})}}]),e}();function Oe(e){return Me.apply(this,arguments)}function Me(){return(Me=k(m().mark(function e(t){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===$.FAILED_PRECONDITION&&t.message===Pe){e.next=2;break}throw t;case 2:j("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Ve=function(){function e(t){var n=this;P(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)},function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)})}return O(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})}},{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){e.next(t,n)})}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)}}],[{key:"resolve",value:function(t){return new e(function(e,n){e(t)})}},{key:"reject",value:function(t){return new e(function(e,n){n(t)})}},{key:"waitFor",value:function(t){return new e(function(e,n){var r=0,i=0,a=!1;t.forEach(function(t){++r,t.next(function(){++i,a&&i===r&&e()},function(e){return n(e)})}),a=!0,i===r&&e()})}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=y(t);try{var a=function(){var t=n.value;r=r.next(function(n){return n?e.resolve(n):t()})};for(i.s();!(n=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e(function(e,r){for(var i=t.length,a=new Array(i),u=0,o=function(){var o=s;n(t[o]).next(function(t){a[o]=t,++u===i&&e(a)},function(e){return r(e)})},s=0;s<i;s++)o()})}},{key:"doWhile",value:function(t,n){return new e(function(e,r){!function i(){!0===t()?n().next(function(){i()},r):e()}()})}}]),e}(),qe=function(){function e(t,n){var r=this;P(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.m=new te,this.transaction.oncomplete=function(){r.m.resolve()},this.transaction.onabort=function(){n.error?r.m.reject(new ze(t,n.error)):r.m.resolve()},this.transaction.onerror=function(e){var n=We(e.target.error);r.m.reject(new ze(t,n))}}return O(e,[{key:"g",get:function(){return this.m.promise}},{key:"abort",value:function(e){e&&this.m.reject(e),this.aborted||(j("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"p",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Ke(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new ze(n,t)}}}]),e}(),Ue=function(){function e(t,n,r){P(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D((0,a.getUA)())&&Q("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return O(e,[{key:"N",value:function(){var e=k(m().mark(function e(t){var n=this;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return j("SimpleDb","Opening database:",this.name),e.next=5,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ze(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new ee($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new ee($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new ze(t,n))},i.onupgradeneeded=function(e){j("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.B(t,i.transaction,e.oldVersion,n.version).next(function(){j("SimpleDb","Database upgrade to version "+n.version+" complete")})}});case 5:this.db=e.sent;case 6:return this.L&&(this.db.onversionchange=function(e){return n.L(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"k",value:function(e){this.L=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=k(m().mark(function e(t,n,r,i){var a,u,o,s,c=this;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,u=0,o=m().mark(function e(){var n,o,s,l;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return++u,e.prev=1,e.next=4,c.N(t);case 4:return c.db=e.sent,n=qe.open(c.db,t,a?"readonly":"readwrite",r),(o=i(n).next(function(e){return n.p(),e}).catch(function(e){return n.abort(e),Ve.reject(e)}).toPromise()).catch(function(){}),e.next=9,n.g;case 9:return e.t0=o,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&u<3,j("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}},e,null,[[1,13]])});case 3:return e.delegateYield(o(),"t0",4);case 4:if(!(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}},e)}));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return j("SimpleDb","Removing database:",e),je(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!(0,a.isIndexedDBAvailable)())return!1;if(e.v())return!0;var t=(0,a.getUA)(),n=e.D(t),r=0<n&&n<10,i=e.F(t),u=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||u)}},{key:"v",value:function(){var e;return void 0!==t&&"YES"===(null===(e=t.env)||void 0===e?void 0:e.M)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"F",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Be=function(){function e(t){P(this,e),this.q=t,this.K=!1,this.$=null}return O(e,[{key:"isDone",get:function(){return this.K}},{key:"U",get:function(){return this.$}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.K=!0}},{key:"W",value:function(e){this.$=e}},{key:"delete",value:function(){return je(this.q.delete())}}]),e}(),ze=function(e){w(n,ee);var t=b(n);function n(e,r){var i;return P(this,n),(i=t.call(this,$.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return O(n)}();function Ge(e){return"IndexedDbTransactionError"===e.name}var Ke=function(){function e(t){P(this,e),this.store=t}return O(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(j("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(j("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),je(n)}},{key:"add",value:function(e){return j("SimpleDb","ADD",this.store.name,e,e),je(this.store.add(e))}},{key:"get",value:function(e){var t=this;return je(this.store.get(e)).next(function(n){return void 0===n&&(n=null),j("SimpleDb","GET",t.store.name,e,n),n})}},{key:"delete",value:function(e){return j("SimpleDb","DELETE",this.store.name,e),je(this.store.delete(e))}},{key:"count",value:function(){return j("SimpleDb","COUNT",this.store.name),je(this.store.count())}},{key:"G",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.j(r,function(e,t){i.push(t)}).next(function(){return i})}var a=this.store.getAll(n.range);return new Ve(function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}})}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Ve(function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}})}},{key:"J",value:function(e,t){j("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.j(r,function(e,t,n){return n.delete()})}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.j(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new Ve(function(n,r){t.onerror=function(e){var t=We(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):n()}})}},{key:"j",value:function(e,t){var n=[];return new Ve(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Be(i),u=t(i.primaryKey,i.value,a);if(u instanceof Ve){var o=u.catch(function(e){return a.done(),Ve.reject(e)});n.push(o)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}}).next(function(){return Ve.waitFor(n)})}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function je(e){return new Ve(function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=We(e.target.error);n(t)}})}var Qe=!1;function We(e){var t=Ue.D((0,a.getUA)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new ee("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Qe||(Qe=!0,setTimeout(function(){throw r},0)),r}}return e}var He=function(){function e(t,n){P(this,e),this.asyncQueue=t,this.ee=n,this.task=null}return O(e,[{key:"start",value:function(){this.te(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"te",value:function(e){var t=this;j("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,k(m().mark(function e(){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=j,e.t1="Documents written: ",e.next=6,t.ee.ne();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Ge(e.t4)){e.next=17;break}j("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Oe(e.t4);case 19:return e.next=21,t.te(6e4);case 21:case"end":return e.stop()}},e,null,[[1,11]])})))}}]),e}(),Ye=function(){function e(t,n){P(this,e),this.localStore=t,this.persistence=n}return O(e,[{key:"ne",value:function(){var e=k(m().mark(function e(){var t,n=this,r=arguments;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",function(e){return n.re(e,t)}));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"re",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Ve.doWhile(function(){return!0===a&&i>0},function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(function(t){if(null!==t&&!r.has(t))return j("IndexBackiller","Processing collection: ".concat(t)),n.ie(e,t,i).next(function(e){i-=e,r.add(t)});a=!1})}).next(function(){return t-i})}},{key:"ie",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next(function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next(function(){return r.se(i,n)}).next(function(n){return j("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)}).next(function(){return a.size})})})}},{key:"se",value:function(e,t){var n=e;return t.changes.forEach(function(e,t){var r=Ne(t);Re(r,n)>0&&(n=r)}),new Fe(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Xe=function(){function e(t,n){var r=this;P(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.oe(e)},this._e=function(e){return n.writeSequenceNumber(e)})}return O(e,[{key:"oe",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this._e&&this._e(e),e}}]),e}();function Je(e){return null==e}function Ze(e){return 0===e&&1/e==-1/0}function $e(e){return"number"==typeof e&&Number.isInteger(e)&&!Ze(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function et(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=nt(t)),t=tt(e.get(n),t);return nt(t)}function tt(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="";break;case"":n+="";break;default:n+=a}}return n}function nt(e){return e+""}function rt(e){var t=e.length;if(X(t>=2),2===t)return X(""===e.charAt(0)&&""===e.charAt(1)),ke.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var u=e.indexOf("",a);switch((u<0||u>n)&&Y(),e.charAt(u+1)){case"":var o=e.substring(a,u),s=void 0;0===i.length?s=o:(s=i+=o,i=""),r.push(s);break;case"":i+=e.substring(a,u),i+="\0";break;case"":i+=e.substring(a,u+1);break;default:Y()}a=u+2}return new ke(r)}Xe.ae=-1;var it=["userId","batchId"];function at(e,t){return[e,et(t)]}function ut(e,t,n){return[e,et(t),n]}var ot={},st=["prefixPath","collectionGroup","readTime","documentId"],ct=["prefixPath","collectionGroup","documentId"],lt=["collectionGroup","readTime","prefixPath","documentId"],ft=["canonicalId","targetId"],ht=["targetId","path"],dt=["path","targetId"],vt=["collectionId","parent"],pt=["indexId","uid"],yt=["uid","sequenceNumber"],mt=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gt=["indexId","uid","orderedDocumentKey"],kt=["userId","collectionPath","documentId"],wt=["userId","collectionPath","largestBatchId"],xt=["userId","collectionGroup","largestBatchId"],bt=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),It=[].concat(S(bt),["documentOverlays"]),_t=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Et=_t,Tt=[].concat(Et,["indexConfiguration","indexState","indexEntries"]),St=function(e){w(n,Le);var t=b(n);function n(e,r){var i;return P(this,n),(i=t.call(this)).ue=e,i.currentSequenceNumber=r,i}return O(n)}();function Ct(e,t){var n=Z(e);return Ue.O(n.ue,t)}function Dt(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function At(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Nt(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Ft=function(){function e(t,n){P(this,e),this.comparator=t,this.root=n||Pt.EMPTY}return O(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Pt.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Pt.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})}},{key:"toString",value:function(){var e=[];return this.inorderTraversal(function(t,n){return e.push("".concat(t,":").concat(n)),!1}),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Rt(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Rt(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Rt(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Rt(this.root,e,this.comparator,!0)}}]),e}(),Rt=function(){function e(t,n,r,i){P(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return O(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Pt=function(){function e(t,n,r,i,a){P(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return O(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Y();if(this.right.isRed())throw Y();var e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}]),e}();Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1,Pt.EMPTY=new(function(){function e(){P(this,e),this.size=0}return O(e,[{key:"key",get:function(){throw Y()}},{key:"value",get:function(){throw Y()}},{key:"color",get:function(){throw Y()}},{key:"left",get:function(){throw Y()}},{key:"right",get:function(){throw Y()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Pt(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Lt=function(){function e(t){P(this,e),this.comparator=t,this.data=new Ft(this.comparator)}return O(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Ot(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Ot(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach(function(e){t=t.add(e)}),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Ot=function(){function e(t){P(this,e),this.iter=t}return O(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Mt(e){return e.hasNext()?e.getNext():void 0}var Vt=function(){function e(t){P(this,e),this.fields=t,t.sort(xe.comparator)}return O(e,[{key:"unionWith",value:function(t){var n,r=new Lt(xe.comparator),i=y(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var u,o=y(t);try{for(o.s();!(u=o.n()).done;){var s=u.value;r=r.add(s)}}catch(c){o.e(c)}finally{o.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=y(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return ve(this.fields,e.fields,function(e,t){return e.isEqual(t)})}}],[{key:"empty",value:function(){return new e([])}}]),e}(),qt=function(e){w(n,d(Error));var t=b(n);function n(){var e;return P(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return O(n)}();function Ut(){return"undefined"!=typeof atob}var Bt=exports._ByteString=function(e){function t(e){P(this,t),this.binaryString=e}return O(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return de(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new qt("Invalid base64 string: "+e):e}}(e))}},{key:"fromUint8Array",value:function(e){return new t(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e))}}]),t}();Bt.EMPTY_BYTE_STRING=new Bt("");var zt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gt(e){if(X(!!e),"string"==typeof e){var t=0,n=zt.exec(e);if(X(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Kt(e.seconds),nanos:Kt(e.nanos)}}function Kt(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function jt(e){return"string"==typeof e?Bt.fromBase64String(e):Bt.fromUint8Array(e)}function Qt(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Wt(e){var t=e.mapValue.fields.__previous_value__;return Qt(t)?Wt(t):t}function Ht(e){var t=Gt(e.mapValue.fields.__local_write_time__.timestampValue);return new ye(t.seconds,t.nanos)}var Yt=O(function e(t,n,r,i,a,u,o,s,c){P(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=o,this.longPollingOptions=s,this.useFetchStreams=c}),Xt=exports._DatabaseId=function(){function e(t,n){P(this,e),this.projectId=t,this.database=n||"(default)"}return O(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Jt={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Zt={nullValue:"NULL_VALUE"};function $t(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Qt(e)?4:pn(e)?9007199254740991:10:Y()}function en(e,t){if(e===t)return!0;var n=$t(e);if(n!==$t(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ht(e).isEqual(Ht(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Gt(e.timestampValue),r=Gt(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return jt(e.bytesValue).isEqual(jt(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Kt(e.geoPointValue.latitude)===Kt(t.geoPointValue.latitude)&&Kt(e.geoPointValue.longitude)===Kt(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Kt(e.integerValue)===Kt(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Kt(e.doubleValue),r=Kt(t.doubleValue);return n===r?Ze(n)===Ze(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ve(e.arrayValue.values||[],t.arrayValue.values||[],en);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Dt(n)!==Dt(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!en(n[i],r[i])))return!1;return!0}(e,t);default:return Y()}}function tn(e,t){return void 0!==(e.values||[]).find(function(e){return en(e,t)})}function nn(e,t){if(e===t)return 0;var n=$t(e),r=$t(t);if(n!==r)return de(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Kt(e.integerValue||e.doubleValue),r=Kt(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return rn(e.timestampValue,t.timestampValue);case 4:return rn(Ht(e),Ht(t));case 5:return de(e.stringValue,t.stringValue);case 6:return function(e,t){var n=jt(e),r=jt(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=de(n[i],r[i]);if(0!==a)return a}return de(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=de(Kt(e.latitude),Kt(t.latitude));return 0!==n?n:de(Kt(e.longitude),Kt(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=nn(n[i],r[i]);if(a)return a}return de(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Jt.mapValue&&t===Jt.mapValue)return 0;if(e===Jt.mapValue)return 1;if(t===Jt.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var u=0;u<r.length&&u<a.length;++u){var o=de(r[u],a[u]);if(0!==o)return o;var s=nn(n[r[u]],i[a[u]]);if(0!==s)return s}return de(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Y()}}function rn(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return de(e,t);var n=Gt(e),r=Gt(t),i=de(n.seconds,r.seconds);return 0!==i?i:de(n.nanos,r.nanos)}function an(e){return un(e)}function un(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Gt(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return jt(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return be.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=y(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=un(a)}}catch(u){i.e(u)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=y(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(un(e.fields[a]))}}catch(u){i.e(u)}finally{i.f()}return n+"}"}(e.mapValue):Y()}function on(e){switch($t(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:var t=Wt(e);return t?16+on(t):16;case 5:return 2*e.stringValue.length;case 6:return jt(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(function(e,t){return e+on(t)},0)}(e.arrayValue);case 10:return function(e){var t=0;return At(e.fields,function(e,n){t+=e.length+on(n)}),t}(e.mapValue);default:throw Y()}}function sn(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function cn(e){return!!e&&"integerValue"in e}function ln(e){return!!e&&"arrayValue"in e}function fn(e){return!!e&&"nullValue"in e}function hn(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function dn(e){return!!e&&"mapValue"in e}function vn(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==R(e.timestampValue))return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return At(e.mapValue.fields,function(e,n){return t.mapValue.fields[e]=vn(n)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=vn(e.arrayValue.values[r]);return n}return Object.assign({},e)}function pn(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function yn(e){return"nullValue"in e?Zt:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?sn(Xt.empty(),be.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Y()}function mn(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?sn(Xt.empty(),be.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Jt:Y()}function gn(e,t){var n=nn(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function kn(e,t){var n=nn(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var wn=function(){function e(t){P(this,e),this.value=t}return O(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!dn(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vn(t)}},{key:"setAll",value:function(e){var t=this,n=xe.emptyPath(),r={},i=[];e.forEach(function(e,a){if(!n.isImmediateParentOf(a)){var u=t.getFieldsMap(n);t.applyChanges(u,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=vn(e):i.push(a.lastSegment())});var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());dn(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return en(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];dn(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){At(t,function(t,n){return e[t]=n});var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(u){i.e(u)}finally{i.f()}}},{key:"clone",value:function(){return new e(vn(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function xn(e){var t=[];return At(e.fields,function(e,n){var r=new xe([e]);if(dn(n)){var i=xn(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,u=y(i);try{for(u.s();!(a=u.n()).done;){var o=a.value;t.push(r.child(o))}}catch(s){u.e(s)}finally{u.f()}}}else t.push(r)}),new Vt(t)}var bn=function(){function e(t,n,r,i,a,u,o){P(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=u,this.documentState=o}return O(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(me.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=me.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,me.min(),me.min(),me.min(),wn.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,me.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,me.min(),me.min(),wn.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,me.min(),me.min(),wn.empty(),2)}}]),e}(),In=O(function e(t,n){P(this,e),this.position=t,this.inclusive=n});function _n(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],u=e.position[i];if(r=a.field.isKeyField()?be.comparator(be.fromName(u.referenceValue),n.key):nn(u,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function En(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!en(e.position[n],t.position[n]))return!1;return!0}var Tn=O(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";P(this,e),this.field=t,this.dir=n});function Sn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Cn=O(function e(){P(this,e)}),Dn=function(e){w(n,Cn);var t=b(n);function n(e,r,i){var a;return P(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return O(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(nn(t,this.value)):null!==t&&$t(this.value)===$t(t)&&this.matchesComparison(nn(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Y()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new qn(e,t,r):"array-contains"===t?new Gn(e,r):"in"===t?new Kn(e,r):"not-in"===t?new jn(e,r):"array-contains-any"===t?new Qn(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Un(e,n):new Bn(e,n)}}]),n}(),An=function(e){w(n,Cn);var t=b(n);function n(e,r){var i;return P(this,n),(i=t.call(this)).filters=e,i.op=r,i.ce=null,i}return O(n,[{key:"matches",value:function(e){return Nn(this)?void 0===this.filters.find(function(t){return!t.matches(e)}):void 0!==this.filters.find(function(t){return t.matches(e)})}},{key:"getFlattenedFilters",value:function(){return null!==this.ce||(this.ce=this.filters.reduce(function(e,t){return e.concat(t.getFlattenedFilters())},[])),this.ce}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.le(function(e){return e.isInequality()});return null!==e?e.field:null}},{key:"le",value:function(e){var t,n=y(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}();function Nn(e){return"and"===e.op}function Fn(e){return"or"===e.op}function Rn(e){return Pn(e)&&Nn(e)}function Pn(e){var t,n=y(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof An)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Ln(e){if(e instanceof Dn)return e.field.canonicalString()+e.op.toString()+an(e.value);if(Rn(e))return e.filters.map(function(e){return Ln(e)}).join(",");var t=e.filters.map(function(e){return Ln(e)}).join(",");return"".concat(e.op,"(").concat(t,")")}function On(e,t){return e instanceof Dn?function(e,t){return t instanceof Dn&&e.op===t.op&&e.field.isEqual(t.field)&&en(e.value,t.value)}(e,t):e instanceof An?function(e,t){return t instanceof An&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(function(e,n,r){return e&&On(n,t.filters[r])},!0)}(e,t):void Y()}function Mn(e,t){var n=e.filters.concat(t);return An.create(n,e.op)}function Vn(e){return e instanceof Dn?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(an(e.value))}(e):e instanceof An?function(e){return e.op.toString()+" {"+e.getFilters().map(Vn).join(" ,")+"}"}(e):"Filter"}var qn=function(e){w(n,Dn);var t=b(n);function n(e,r,i){var a;return P(this,n),(a=t.call(this,e,r,i)).key=be.fromName(i.referenceValue),a}return O(n,[{key:"matches",value:function(e){var t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(),Un=function(e){w(n,Dn);var t=b(n);function n(e,r){var i;return P(this,n),(i=t.call(this,e,"in",r)).keys=zn("in",r),i}return O(n,[{key:"matches",value:function(e){return this.keys.some(function(t){return t.isEqual(e.key)})}}]),n}(),Bn=function(e){w(n,Dn);var t=b(n);function n(e,r){var i;return P(this,n),(i=t.call(this,e,"not-in",r)).keys=zn("not-in",r),i}return O(n,[{key:"matches",value:function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})}}]),n}();function zn(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(e){return be.fromName(e.referenceValue)})}var Gn=function(e){w(n,Dn);var t=b(n);function n(e,r){return P(this,n),t.call(this,e,"array-contains",r)}return O(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return ln(t)&&tn(t.arrayValue,this.value)}}]),n}(),Kn=function(e){w(n,Dn);var t=b(n);function n(e,r){return P(this,n),t.call(this,e,"in",r)}return O(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&tn(this.value.arrayValue,t)}}]),n}(),jn=function(e){w(n,Dn);var t=b(n);function n(e,r){return P(this,n),t.call(this,e,"not-in",r)}return O(n,[{key:"matches",value:function(e){if(tn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!tn(this.value.arrayValue,t)}}]),n}(),Qn=function(e){w(n,Dn);var t=b(n);function n(e,r){return P(this,n),t.call(this,e,"array-contains-any",r)}return O(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!ln(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(e){return tn(t.value.arrayValue,e)})}}]),n}(),Wn=O(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;P(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=o,this.he=null});function Hn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Wn(e,t,n,r,i,a,u)}function Yn(e){var t=Z(e);if(null===t.he){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(e){return Ln(e)}).join(","),n+="|ob:",n+=t.orderBy.map(function(e){return function(e){return e.field.canonicalString()+e.dir}(e)}).join(","),Je(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(function(e){return an(e)}).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(function(e){return an(e)}).join(",")),t.he=n}return t.he}function Xn(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Sn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!On(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!En(e.startAt,t.startAt)&&En(e.endAt,t.endAt)}function Jn(e){return be.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Zn(e,t){return e.filters.filter(function(e){return e instanceof Dn&&e.field.isEqual(t)})}function $n(e,t,n){var r,i=Zt,a=!0,u=y(Zn(e,t));try{for(u.s();!(r=u.n()).done;){var o=r.value,s=Zt,c=!0;switch(o.op){case"<":case"<=":s=yn(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,c=!1;break;case"!=":case"not-in":s=Zt}gn({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){u.e(h)}finally{u.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];gn({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function er(e,t,n){var r,i=Jt,a=!0,u=y(Zn(e,t));try{for(u.s();!(r=u.n()).done;){var o=r.value,s=Jt,c=!0;switch(o.op){case">=":case">":s=mn(o.value),c=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,c=!1;break;case"!=":case"not-in":s=Jt}kn({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){u.e(h)}finally{u.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];kn({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var tr=O(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;P(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=o,this.endAt=s,this.Pe=null,this.Ie=null,this.de=null,this.startAt,this.endAt});function nr(e,t,n,r,i,a,u,o){return new tr(e,t,n,r,i,a,u,o)}function rr(e){return new tr(e)}function ir(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ar(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ur(e){var t,n=y(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function or(e){return null!==e.collectionGroup}function sr(e){var t=Z(e);if(null===t.Pe){t.Pe=[];var n=ur(t),r=ar(t);if(null!==n&&null===r)n.isKeyField()||t.Pe.push(new Tn(n)),t.Pe.push(new Tn(xe.keyField(),"asc"));else{var i,a=!1,u=y(t.explicitOrderBy);try{for(u.s();!(i=u.n()).done;){var o=i.value;t.Pe.push(o),o.field.isKeyField()&&(a=!0)}}catch(c){u.e(c)}finally{u.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.Pe.push(new Tn(xe.keyField(),s))}}}return t.Pe}function cr(e){var t=Z(e);return t.Ie||(t.Ie=lr(t,sr(e))),t.Ie}function lr(e,t){if("F"===e.limitType)return Hn(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);t=t.map(function(e){var t="desc"===e.dir?"asc":"desc";return new Tn(e.field,t)});var n=e.endAt?new In(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new In(e.startAt.position,e.startAt.inclusive):null;return Hn(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}function fr(e,t){t.getFirstInequalityField(),ur(e);var n=e.filters.concat([t]);return new tr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function hr(e,t,n){return new tr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function dr(e,t){return Xn(cr(e),cr(t))&&e.limitType===t.limitType}function vr(e){return"".concat(Yn(cr(e)),"|lt:").concat(e.limitType)}function pr(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(function(e){return Vn(e)}).join(", "),"]")),Je(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)}).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(function(e){return an(e)}).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(function(e){return an(e)}).join(",")),"Target(".concat(t,")")}(cr(e)),"; limitType=").concat(e.limitType,")")}function yr(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):be.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=y(sr(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=y(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=_n(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,sr(e),t))&&!(e.endAt&&!function(e,t,n){var r=_n(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,sr(e),t))}(e,t)}function mr(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function gr(e){return function(t,n){var r,i=!1,a=y(sr(e));try{for(a.s();!(r=a.n()).done;){var u=r.value,o=kr(u,t,n);if(0!==o)return o;i=i||u.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function kr(e,t,n){var r=e.field.isKeyField()?be.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?nn(r,i):Y()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}var wr=function(){function e(t,n){P(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return O(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),u=a[0],o=a[1];if(this.equalsFn(u,e))return o}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){At(this.inner,function(t,n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),u=a[0],o=a[1];e(u,o)}}catch(s){i.e(s)}finally{i.f()}})}},{key:"isEmpty",value:function(){return Nt(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),xr=new Ft(be.comparator);function br(){return xr}var Ir=new Ft(be.comparator);function _r(){for(var e=Ir,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var u=a[i];e=e.insert(u.key,u)}return e}function Er(e){var t=Ir;return e.forEach(function(e,n){return t=t.insert(e,n.overlayedDocument)}),t}function Tr(){return Cr()}function Sr(){return Cr()}function Cr(){return new wr(function(e){return e.toString()},function(e,t){return e.isEqual(t)})}var Dr=new Ft(be.comparator),Ar=new Lt(be.comparator);function Nr(){for(var e=Ar,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var u=a[i];e=e.add(u)}return e}var Fr=new Lt(de);function Rr(){return Fr}function Pr(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ze(t)?"-0":t}}function Lr(e){return{integerValue:""+e}}function Or(e,t){return $e(t)?Lr(t):Pr(e,t)}var Mr=O(function e(){P(this,e),this._=void 0});function Vr(e,t,n){return e instanceof Br?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Qt(t)&&(t=Wt(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof zr?Gr(e,t):e instanceof Kr?jr(e,t):function(e,t){var n=Ur(e,t),r=Wr(n)+Wr(e.Te);return cn(n)&&cn(e.Te)?Lr(r):Pr(e.serializer,r)}(e,t)}function qr(e,t,n){return e instanceof zr?Gr(e,t):e instanceof Kr?jr(e,t):n}function Ur(e,t){return e instanceof Qr?function(e){return cn(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var Br=function(e){w(n,Mr);var t=b(n);function n(){return P(this,n),t.apply(this,arguments)}return O(n)}(),zr=function(e){w(n,Mr);var t=b(n);function n(e){var r;return P(this,n),(r=t.call(this)).elements=e,r}return O(n)}();function Gr(e,t){var n,r=Hr(t),i=y(e.elements);try{var a=function(){var e=n.value;r.some(function(t){return en(t,e)})||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}return{arrayValue:{values:r}}}var Kr=function(e){w(n,Mr);var t=b(n);function n(e){var r;return P(this,n),(r=t.call(this)).elements=e,r}return O(n)}();function jr(e,t){var n,r=Hr(t),i=y(e.elements);try{var a=function(){var e=n.value;r=r.filter(function(t){return!en(t,e)})};for(i.s();!(n=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}return{arrayValue:{values:r}}}var Qr=function(e){w(n,Mr);var t=b(n);function n(e,r){var i;return P(this,n),(i=t.call(this)).serializer=e,i.Te=r,i}return O(n)}();function Wr(e){return Kt(e.integerValue||e.doubleValue)}function Hr(e){return ln(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Yr=O(function e(t,n){P(this,e),this.field=t,this.transform=n});function Xr(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof zr&&t instanceof zr||e instanceof Kr&&t instanceof Kr?ve(e.elements,t.elements,en):e instanceof Qr&&t instanceof Qr?en(e.Te,t.Te):e instanceof Br&&t instanceof Br}(e.transform,t.transform)}var Jr=O(function e(t,n){P(this,e),this.version=t,this.transformResults=n}),Zr=function(){function e(t,n){P(this,e),this.updateTime=t,this.exists=n}return O(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function $r(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var ei=O(function e(){P(this,e)});function ti(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new di(e.key,Zr.none()):new ui(e.key,e.data,Zr.none());var n,r=e.data,i=wn.empty(),a=new Lt(xe.comparator),u=y(t.fields);try{for(u.s();!(n=u.n()).done;){var o=n.value;if(!a.has(o)){var s=r.field(o);null===s&&o.length>1&&(o=o.popLast(),s=r.field(o)),null===s?i.delete(o):i.set(o,s),a=a.add(o)}}}catch(c){u.e(c)}finally{u.f()}return new oi(e.key,i,new Vt(a.toArray()),Zr.none())}function ni(e,t,n){e instanceof ui?function(e,t,n){var r=e.value.clone(),i=ci(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof oi?function(e,t,n){if($r(e.precondition,t)){var r=ci(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(si(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ri(e,t,n,r){return e instanceof ui?function(e,t,n,r){if(!$r(e.precondition,t))return n;var i=e.value.clone(),a=li(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof oi?function(e,t,n,r){if(!$r(e.precondition,t))return n;var i=li(e.fieldTransforms,r,t),a=t.data;return a.setAll(si(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(function(e){return e.field}))}(e,t,n,r):function(e,t,n){return $r(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ii(e,t){var n,r=null,i=y(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,u=t.data.field(a.field),o=Ur(a.transform,u||null);null!=o&&(null===r&&(r=wn.empty()),r.set(a.field,o))}}catch(s){i.e(s)}finally{i.f()}return r||null}function ai(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ve(e,t,function(e,t){return Xr(e,t)})}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var ui=function(e){w(n,ei);var t=b(n);function n(e,r,i){var a,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return P(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=u,a.type=0,a}return O(n,[{key:"getFieldMask",value:function(){return null}}]),n}(),oi=function(e){w(n,ei);var t=b(n);function n(e,r,i,a){var u,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return P(this,n),(u=t.call(this)).key=e,u.data=r,u.fieldMask=i,u.precondition=a,u.fieldTransforms=o,u.type=1,u}return O(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}();function si(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function ci(e,t,n){var r=new Map;X(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],u=a.transform,o=t.data.field(a.field);r.set(a.field,qr(u,o,n[i]))}return r}function li(e,t,n){var r,i=new Map,a=y(e);try{for(a.s();!(r=a.n()).done;){var u=r.value,o=u.transform,s=n.data.field(u.field);i.set(u.field,Vr(o,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var fi,hi,di=function(e){w(n,ei);var t=b(n);function n(e,r){var i;return P(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return O(n,[{key:"getFieldMask",value:function(){return null}}]),n}(),vi=function(e){w(n,ei);var t=b(n);function n(e,r){var i;return P(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return O(n,[{key:"getFieldMask",value:function(){return null}}]),n}(),pi=function(){function e(t,n,r,i){P(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return O(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&ni(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=y(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=ri(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,u=y(this.mutations);try{for(u.s();!(a=u.n()).done;){var o=a.value;o.key.isEqual(e.key)&&(t=ri(o,e,t,this.localWriteTime))}}catch(s){u.e(s)}finally{u.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Sr();return this.mutations.forEach(function(i){var a=e.get(i.key),u=a.overlayedDocument,o=n.applyToLocalView(u,a.mutatedFields),s=ti(u,o=t.has(i.key)?null:o);null!==s&&r.set(i.key,s),u.isValidDocument()||u.convertToNoDocument(me.min())}),r}},{key:"keys",value:function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},Nr())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&ve(this.mutations,e.mutations,function(e,t){return ai(e,t)})&&ve(this.baseMutations,e.baseMutations,function(e,t){return ai(e,t)})}}]),e}(),yi=function(){function e(t,n,r,i){P(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return O(e,null,[{key:"from",value:function(t,n,r){X(t.mutations.length===r.length);for(var i=Dr,a=t.mutations,u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new e(t,n,r,i)}}]),e}(),mi=function(){function e(t,n){P(this,e),this.largestBatchId=t,this.mutation=n}return O(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),gi=O(function e(t,n,r){P(this,e),this.alias=t,this.Ee=n,this.fieldPath=r}),ki=O(function e(t,n){P(this,e),this.count=t,this.unchangedNames=n});function wi(e){switch(e){default:return Y();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function xi(e){if(void 0===e)return Q("GRPC error has no .code"),$.UNKNOWN;switch(e){case fi.OK:return $.OK;case fi.CANCELLED:return $.CANCELLED;case fi.UNKNOWN:return $.UNKNOWN;case fi.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case fi.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case fi.INTERNAL:return $.INTERNAL;case fi.UNAVAILABLE:return $.UNAVAILABLE;case fi.UNAUTHENTICATED:return $.UNAUTHENTICATED;case fi.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case fi.NOT_FOUND:return $.NOT_FOUND;case fi.ALREADY_EXISTS:return $.ALREADY_EXISTS;case fi.PERMISSION_DENIED:return $.PERMISSION_DENIED;case fi.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case fi.ABORTED:return $.ABORTED;case fi.OUT_OF_RANGE:return $.OUT_OF_RANGE;case fi.UNIMPLEMENTED:return $.UNIMPLEMENTED;case fi.DATA_LOSS:return $.DATA_LOSS;default:return Y()}}(hi=fi||(fi={}))[hi.OK=0]="OK",hi[hi.CANCELLED=1]="CANCELLED",hi[hi.UNKNOWN=2]="UNKNOWN",hi[hi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hi[hi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hi[hi.NOT_FOUND=5]="NOT_FOUND",hi[hi.ALREADY_EXISTS=6]="ALREADY_EXISTS",hi[hi.PERMISSION_DENIED=7]="PERMISSION_DENIED",hi[hi.UNAUTHENTICATED=16]="UNAUTHENTICATED",hi[hi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hi[hi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hi[hi.ABORTED=10]="ABORTED",hi[hi.OUT_OF_RANGE=11]="OUT_OF_RANGE",hi[hi.UNIMPLEMENTED=12]="UNIMPLEMENTED",hi[hi.INTERNAL=13]="INTERNAL",hi[hi.UNAVAILABLE=14]="UNAVAILABLE",hi[hi.DATA_LOSS=15]="DATA_LOSS";var bi=null;function Ii(){return new TextEncoder}var _i=new u.Integer([4294967295,4294967295],0);function Ei(e){var t=Ii().encode(e),n=new u.Md5;return n.update(t),new Uint8Array(n.digest())}function Ti(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new u.Integer([n,r],0),new u.Integer([i,a],0)]}var Si=function(){function e(t,n,r){if(P(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ci("Invalid padding: ".concat(n));if(r<0)throw new Ci("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new Ci("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new Ci("Invalid padding when bitmap length is 0: ".concat(n));this.Ae=8*t.length-n,this.Re=u.Integer.fromNumber(this.Ae)}return O(e,[{key:"Ve",value:function(e,t,n){var r=e.add(t.multiply(u.Integer.fromNumber(n)));return 1===r.compare(_i)&&(r=new u.Integer([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Re).toNumber()}},{key:"me",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.Ae)return!1;for(var t=c(Ti(Ei(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ve(n,r,i);if(!this.me(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.Ae)for(var t=c(Ti(Ei(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ve(n,r,i);this.fe(a)}}},{key:"fe",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach(function(e){return a.insert(e)}),a}}]),e}(),Ci=function(e){w(n,d(Error));var t=b(n);function n(){var e;return P(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return O(n)}(),Di=function(){function e(t,n,r,i,a){P(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return O(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Ai.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(me.min(),i,new Ft(de),br(),Nr())}}]),e}(),Ai=function(){function e(t,n,r,i,a){P(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return O(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Nr(),Nr(),Nr())}}]),e}(),Ni=O(function e(t,n,r,i){P(this,e),this.ge=t,this.removedTargetIds=n,this.key=r,this.pe=i}),Fi=O(function e(t,n){P(this,e),this.targetId=t,this.ye=n}),Ri=O(function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bt.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;P(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}),Pi=function(){function e(){P(this,e),this.we=0,this.Se=Mi(),this.be=Bt.EMPTY_BYTE_STRING,this.De=!1,this.Ce=!0}return O(e,[{key:"current",get:function(){return this.De}},{key:"resumeToken",get:function(){return this.be}},{key:"ve",get:function(){return 0!==this.we}},{key:"Fe",get:function(){return this.Ce}},{key:"Me",value:function(e){e.approximateByteSize()>0&&(this.Ce=!0,this.be=e)}},{key:"xe",value:function(){var e=Nr(),t=Nr(),n=Nr();return this.Se.forEach(function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Y()}}),new Ai(this.be,this.De,e,t,n)}},{key:"Oe",value:function(){this.Ce=!1,this.Se=Mi()}},{key:"Ne",value:function(e,t){this.Ce=!0,this.Se=this.Se.insert(e,t)}},{key:"Be",value:function(e){this.Ce=!0,this.Se=this.Se.remove(e)}},{key:"Le",value:function(){this.we+=1}},{key:"ke",value:function(){this.we-=1}},{key:"qe",value:function(){this.Ce=!0,this.De=!0}}]),e}(),Li=function(){function e(t){P(this,e),this.Qe=t,this.Ke=new Map,this.$e=br(),this.Ue=Oi(),this.We=new Ft(de)}return O(e,[{key:"Ge",value:function(e){var t,n=y(e.ge);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.pe&&e.pe.isFoundDocument()?this.ze(r,e.pe):this.je(r,e.key,e.pe)}}catch(o){n.e(o)}finally{n.f()}var i,a=y(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var u=i.value;this.je(u,e.key,e.pe)}}catch(o){a.e(o)}finally{a.f()}}},{key:"He",value:function(e){var t=this;this.forEachTarget(e,function(n){var r=t.Je(n);switch(e.state){case 0:t.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.ve||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.ve||t.removeTarget(n);break;case 3:t.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:t.Ye(n)&&(t.Ze(n),r.Me(e.resumeToken));break;default:Y()}})}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ke.forEach(function(e,r){n.Ye(r)&&t(r)})}},{key:"Xe",value:function(e){var t=e.targetId,n=e.ye.count,r=this.et(t);if(r){var i=r.target;if(Jn(i))if(0===n){var a=new be(i.path);this.je(t,a,bn.newNoDocument(a,me.min()))}else X(1===n);else{var u=this.tt(t);if(u!==n){var o=this.nt(e),s=o?this.rt(o,e,u):1;if(0!==s){this.Ze(t);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(t,c)}null==bi||bi.it(function(e,t,n,r,i){var a,u,o,s,c,l,f={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(f.bloomFilter={applied:0===i,hashCount:null!==(a=null==h?void 0:h.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(s=null===(o=null===(u=null==h?void 0:h.bits)||void 0===u?void 0:u.bitmap)||void 0===o?void 0:o.length)&&void 0!==s?s:0,padding:null!==(l=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:function(e){var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),f}(u,e.ye,this.Qe.st(),o,s))}}}}},{key:"nt",value:function(e){var t=e.ye.unchangedNames;if(!t||!t.bits)return null;var n,r,i=t.bits,a=i.bitmap,u=void 0===a?"":a,o=i.padding,s=void 0===o?0:o,c=t.hashCount,l=void 0===c?0:c;try{n=jt(u).toUint8Array()}catch(e){if(e instanceof qt)return W("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new Si(n,s,l)}catch(e){return W(e instanceof Ci?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.Ae?null:r}},{key:"rt",value:function(e,t,n){return t.ye.count===n-this.ot(e,t.targetId)?0:2}},{key:"ot",value:function(e,t){var n=this,r=this.Qe.getRemoteKeysForTarget(t),i=0;return r.forEach(function(r){var a=n.Qe.st(),u="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());e.mightContain(u)||(n.je(t,r,null),i++)}),i}},{key:"_t",value:function(e){var t=this,n=new Map;this.Ke.forEach(function(r,i){var a=t.et(i);if(a){if(r.current&&Jn(a.target)){var u=new be(a.target.path);null!==t.$e.get(u)||t.ut(i,u)||t.je(i,u,bn.newNoDocument(u,e))}r.Fe&&(n.set(i,r.xe()),r.Oe())}});var r=Nr();this.Ue.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.et(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)}),i&&(r=r.add(e))}),this.$e.forEach(function(t,n){return n.setReadTime(e)});var i=new Di(e,n,this.We,this.$e,r);return this.$e=br(),this.Ue=Oi(),this.We=new Ft(de),i}},{key:"ze",value:function(e,t){if(this.Ye(e)){var n=this.ut(e,t.key)?2:0;this.Je(e).Ne(t.key,n),this.$e=this.$e.insert(t.key,t),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}}},{key:"je",value:function(e,t,n){if(this.Ye(e)){var r=this.Je(e);this.ut(e,t)?r.Ne(t,1):r.Be(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),n&&(this.$e=this.$e.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ke.delete(e)}},{key:"tt",value:function(e){var t=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Le",value:function(e){this.Je(e).Le()}},{key:"Je",value:function(e){var t=this.Ke.get(e);return t||(t=new Pi,this.Ke.set(e,t)),t}},{key:"ct",value:function(e){var t=this.Ue.get(e);return t||(t=new Lt(de),this.Ue=this.Ue.insert(e,t)),t}},{key:"Ye",value:function(e){var t=null!==this.et(e);return t||j("WatchChangeAggregator","Detected inactive target",e),t}},{key:"et",value:function(e){var t=this.Ke.get(e);return t&&t.ve?null:this.Qe.lt(e)}},{key:"Ze",value:function(e){var t=this;this.Ke.set(e,new Pi),this.Qe.getRemoteKeysForTarget(e).forEach(function(n){t.je(e,n,null)})}},{key:"ut",value:function(e,t){return this.Qe.getRemoteKeysForTarget(e).has(t)}}]),e}();function Oi(){return new Ft(be.comparator)}function Mi(){return new Ft(be.comparator)}var Vi={asc:"ASCENDING",desc:"DESCENDING"},qi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ui={and:"AND",or:"OR"},Bi=O(function e(t,n){P(this,e),this.databaseId=t,this.useProto3Json=n});function zi(e,t){return e.useProto3Json||Je(t)?t:{value:t}}function Gi(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ki(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ji(e,t){return Gi(e,t.toTimestamp())}function Qi(e){return X(!!e),me.fromTimestamp(function(e){var t=Gt(e);return new ye(t.seconds,t.nanos)}(e))}function Wi(e,t){return function(e){return new ke(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Hi(e){var t=ke.fromString(e);return X(wa(t)),t}function Yi(e,t){return Wi(e.databaseId,t.path)}function Xi(e,t){var n=Hi(t);if(n.get(1)!==e.databaseId.projectId)throw new ee($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ee($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new be(ea(n))}function Ji(e,t){return Wi(e.databaseId,t)}function Zi(e){var t=Hi(e);return 4===t.length?ke.emptyPath():ea(t)}function $i(e){return new ke(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ea(e){return X(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ta(e,t,n){return{name:Yi(e,t),fields:n.value.mapValue.fields}}function na(e,t,n){var r=Xi(e,t.name),i=Qi(t.updateTime),a=t.createTime?Qi(t.createTime):me.min(),u=new wn({mapValue:{fields:t.fields}}),o=bn.newFoundDocument(r,i,a,u);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function ra(e,t){return"found"in t?function(e,t){X(!!t.found),t.found.name,t.found.updateTime;var n=Xi(e,t.found.name),r=Qi(t.found.updateTime),i=t.found.createTime?Qi(t.found.createTime):me.min(),a=new wn({mapValue:{fields:t.found.fields}});return bn.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){X(!!t.missing),X(!!t.readTime);var n=Xi(e,t.missing),r=Qi(t.readTime);return bn.newNoDocument(n,r)}(e,t):Y()}function ia(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Y()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(X(void 0===t||"string"==typeof t),Bt.fromBase64String(t||"")):(X(void 0===t||t instanceof Uint8Array),Bt.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),u=t.targetChange.cause,o=u&&function(e){var t=void 0===e.code?$.UNKNOWN:xi(e.code);return new ee(t,e.message||"")}(u);n=new Ri(r,i,a,o||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Xi(e,s.document.name),l=Qi(s.document.updateTime),f=s.document.createTime?Qi(s.document.createTime):me.min(),h=new wn({mapValue:{fields:s.document.fields}}),d=bn.newFoundDocument(c,l,f,h),v=s.targetIds||[],p=s.removedTargetIds||[];n=new Ni(v,p,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=Xi(e,y.document),g=y.readTime?Qi(y.readTime):me.min(),k=bn.newNoDocument(m,g),w=y.removedTargetIds||[];n=new Ni([],w,k.key,k)}else if("documentRemove"in t){t.documentRemove;var x=t.documentRemove;x.document;var b=Xi(e,x.document),I=x.removedTargetIds||[];n=new Ni([],I,b,null)}else{if(!("filter"in t))return Y();t.filter;var _=t.filter;_.targetId;var E=_.count,T=void 0===E?0:E,S=_.unchangedNames,C=new ki(T,S),D=_.targetId;n=new Fi(D,C)}return n}function aa(e,t){var n;if(t instanceof ui)n={update:ta(e,t.key,t.value)};else if(t instanceof di)n={delete:Yi(e,t.key)};else if(t instanceof oi)n={update:ta(e,t.key,t.data),updateMask:ka(t.fieldMask)};else{if(!(t instanceof vi))return Y();n={verify:Yi(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(e){return function(e,t){var n=t.transform;if(n instanceof Br)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof zr)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Kr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Qr)return{fieldPath:t.field.canonicalString(),increment:n.Te};throw Y()}(0,e)})),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ji(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Y()}(e,t.precondition)),n}function ua(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Zr.updateTime(Qi(e.updateTime)):void 0!==e.exists?Zr.exists(e.exists):Zr.none()}(t.currentDocument):Zr.none(),r=t.updateTransforms?t.updateTransforms.map(function(t){return function(e,t){var n=null;if("setToServerValue"in t)X("REQUEST_TIME"===t.setToServerValue),n=new Br;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new zr(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Kr(i)}else"increment"in t?n=new Qr(e,t.increment):Y();var a=xe.fromServerFormat(t.fieldPath);return new Yr(a,n)}(e,t)}):[];if(t.update){t.update.name;var i=Xi(e,t.update.name),a=new wn({mapValue:{fields:t.update.fields}});if(t.updateMask){var u=function(e){var t=e.fieldPaths||[];return new Vt(t.map(function(e){return xe.fromServerFormat(e)}))}(t.updateMask);return new oi(i,a,u,n,r)}return new ui(i,a,n,r)}if(t.delete){var o=Xi(e,t.delete);return new di(o,n)}if(t.verify){var s=Xi(e,t.verify);return new vi(s,n)}return Y()}function oa(e,t){return e&&e.length>0?(X(void 0!==t),e.map(function(e){return function(e,t){var n=e.updateTime?Qi(e.updateTime):Qi(t);return n.isEqual(me.min())&&(n=Qi(t)),new Jr(n,e.transformResults||[])}(e,t)})):[]}function sa(e,t){return{documents:[Ji(e,t.path)]}}function ca(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Ji(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Ji(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return ga(An.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map(function(e){return function(e){return{field:ya(e.field),direction:da(e.dir)}}(e)})}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var u=zi(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function la(e){var t=Zi(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){X(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var u=[];n.where&&(u=function(e){var t=ha(e);return t instanceof An&&Rn(t)?t.getFilters():[t]}(n.where));var o=[];n.orderBy&&(o=function(e){return e.map(function(e){return function(e){return new Tn(ma(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})}(n.orderBy));var s=null;n.limit&&(s=function(e){var t;return Je(t="object"==R(e)?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new In(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new In(n,t)}(n.endAt)),nr(t,i,o,u,s,"F",c,l)}function fa(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}function ha(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=ma(e.unaryFilter.field);return Dn.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=ma(e.unaryFilter.field);return Dn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ma(e.unaryFilter.field);return Dn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ma(e.unaryFilter.field);return Dn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(e):void 0!==e.fieldFilter?function(e){return Dn.create(ma(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return An.create(e.compositeFilter.filters.map(function(e){return ha(e)}),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Y()}}(e.compositeFilter.op))}(e):Y()}function da(e){return Vi[e]}function va(e){return qi[e]}function pa(e){return Ui[e]}function ya(e){return{fieldPath:e.canonicalString()}}function ma(e){return xe.fromServerFormat(e.fieldPath)}function ga(e){return e instanceof Dn?function(e){if("=="===e.op){if(hn(e.value))return{unaryFilter:{field:ya(e.field),op:"IS_NAN"}};if(fn(e.value))return{unaryFilter:{field:ya(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(hn(e.value))return{unaryFilter:{field:ya(e.field),op:"IS_NOT_NAN"}};if(fn(e.value))return{unaryFilter:{field:ya(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ya(e.field),op:va(e.op),value:e.value}}}(e):e instanceof An?function(e){var t=e.getFilters().map(function(e){return ga(e)});return 1===t.length?t[0]:{compositeFilter:{op:pa(e.op),filters:t}}}(e):Y()}function ka(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}}function wa(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var xa=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:me.min(),u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:me.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Bt.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;P(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=o,this.expectedCount=s}return O(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),ba=O(function e(t){P(this,e),this.ht=t});function Ia(e,t){var n;if(t.document)n=na(e.ht,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=be.fromSegments(t.noDocument.path),i=Sa(t.noDocument.readTime);n=bn.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Y();var a=be.fromSegments(t.unknownDocument.path),u=Sa(t.unknownDocument.version);n=bn.newUnknownDocument(a,u)}return t.readTime&&n.setReadTime(function(e){var t=new ye(e[0],e[1]);return me.fromTimestamp(t)}(t.readTime)),n}function _a(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ea(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Yi(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Gi(e,t.version.toTimestamp()),createTime:Gi(e,t.createTime.toTimestamp())}}(e.ht,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ta(t.version)};else{if(!t.isUnknownDocument())return Y();r.unknownDocument={path:n.path.toArray(),version:Ta(t.version)}}return r}function Ea(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Ta(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Sa(e){var t=new ye(e.seconds,e.nanoseconds);return me.fromTimestamp(t)}function Ca(e,t){for(var n=(t.baseMutations||[]).map(function(t){return ua(e.ht,t)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var u=t.mutations.map(function(t){return ua(e.ht,t)}),o=ye.fromMillis(t.localWriteTimeMs);return new pi(t.batchId,o,n,u)}function Da(e){var t,n=Sa(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?Sa(e.lastLimboFreeSnapshotVersion):me.min();return t=function(e){return void 0!==e.documents}(e.query)?function(e){return X(1===e.documents.length),cr(rr(Zi(e.documents[0])))}(e.query):function(e){return cr(la(e))}(e.query),new xa(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,n,r,Bt.fromBase64String(e.resumeToken))}function Aa(e,t){var n,r=Ta(t.snapshotVersion),i=Ta(t.lastLimboFreeSnapshotVersion);n=Jn(t.target)?sa(e.ht,t.target):ca(e.ht,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Yn(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Na(e){var t=la({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?hr(t,t.limit,"L"):t}function Fa(e,t){return new mi(t.largestBatchId,ua(e.ht,t.overlayMutation))}function Ra(e,t){var n=t.path.lastSegment();return[e,et(t.path.popLast()),n]}function Pa(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Ta(r.readTime),documentKey:et(r.documentKey.path),largestBatchId:r.largestBatchId}}var La=function(){function e(){P(this,e)}return O(e,[{key:"getBundleMetadata",value:function(e,t){return Oa(e).get(t).next(function(e){if(e)return function(e){return{id:e.bundleId,createTime:Sa(e.createTime),version:e.version}}(e)})}},{key:"saveBundleMetadata",value:function(e,t){return Oa(e).put(function(e){return{bundleId:e.id,createTime:Ta(Qi(e.createTime)),version:e.version}}(t))}},{key:"getNamedQuery",value:function(e,t){return Ma(e).get(t).next(function(e){if(e)return function(e){return{name:e.name,query:Na(e.bundledQuery),readTime:Sa(e.readTime)}}(e)})}},{key:"saveNamedQuery",value:function(e,t){return Ma(e).put(function(e){return{name:e.name,readTime:Ta(Qi(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Oa(e){return Ct(e,"bundles")}function Ma(e){return Ct(e,"namedQueries")}var Va=function(){function e(t,n){P(this,e),this.serializer=t,this.userId=n}return O(e,[{key:"getOverlay",value:function(e,t){var n=this;return qa(e).get(Ra(this.userId,t)).next(function(e){return e?Fa(n.serializer,e):null})}},{key:"getOverlays",value:function(e,t){var n=this,r=Tr();return Ve.forEach(t,function(t){return n.getOverlay(e,t).next(function(e){null!==e&&r.set(t,e)})}).next(function(){return r})}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach(function(n,a){var u=new mi(t,a);i.push(r.It(e,u))}),Ve.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach(function(e){return i.add(et(e.getCollectionPath()))});var a=[];return i.forEach(function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(qa(e).J("collectionPathOverlayIndex",i))}),Ve.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Tr(),a=et(t),u=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return qa(e).G("collectionPathOverlayIndex",u).next(function(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,u=Fa(r.serializer,a);i.set(u.getKey(),u)}}catch(o){n.e(o)}finally{n.f()}return i})}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,u=Tr(),o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qa(e).Z({index:"collectionGroupOverlayIndex",range:o},function(e,t,n){var o=Fa(a.serializer,t);u.size()<r||o.largestBatchId===i?(u.set(o.getKey(),o),i=o.largestBatchId):n.done()}).next(function(){return u})}},{key:"It",value:function(e,t){return qa(e).put(function(e,t,n){var r=c(Ra(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:aa(e.ht,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"Pt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function qa(e){return Ct(e,"documentOverlays")}var Ua=function(){function e(){P(this,e)}return O(e,[{key:"dt",value:function(e,t){this.Tt(e,t),t.Et()}},{key:"Tt",value:function(e,t){if("nullValue"in e)this.At(t,5);else if("booleanValue"in e)this.At(t,10),t.Rt(e.booleanValue?1:0);else if("integerValue"in e)this.At(t,15),t.Rt(Kt(e.integerValue));else if("doubleValue"in e){var n=Kt(e.doubleValue);isNaN(n)?this.At(t,13):(this.At(t,15),Ze(n)?t.Rt(0):t.Rt(n))}else if("timestampValue"in e){var r=e.timestampValue;this.At(t,20),"string"==typeof r?t.Vt(r):(t.Vt("".concat(r.seconds||"")),t.Rt(r.nanos||0))}else if("stringValue"in e)this.ft(e.stringValue,t),this.gt(t);else if("bytesValue"in e)this.At(t,30),t.yt(jt(e.bytesValue)),this.gt(t);else if("referenceValue"in e)this.wt(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.At(t,45),t.Rt(i.latitude||0),t.Rt(i.longitude||0)}else"mapValue"in e?pn(e)?this.At(t,Number.MAX_SAFE_INTEGER):(this.St(e.mapValue,t),this.gt(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.gt(t)):Y()}},{key:"ft",value:function(e,t){this.At(t,25),this.Dt(e,t)}},{key:"Dt",value:function(e,t){t.Vt(e)}},{key:"St",value:function(e,t){var n=e.fields||{};this.At(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.ft(a,t),this.Tt(n[a],t)}}},{key:"bt",value:function(e,t){var n=e.values||[];this.At(t,50);var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.Tt(a,t)}}catch(u){i.e(u)}finally{i.f()}}},{key:"wt",value:function(e,t){var n=this;this.At(t,37),be.fromName(e).path.forEach(function(e){n.At(t,60),n.Dt(e,t)})}},{key:"At",value:function(e,t){e.Rt(t)}},{key:"gt",value:function(e){e.Rt(2)}}]),e}();function Ba(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function za(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Ba(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Ua.Ct=new Ua;var Ga=function(){function e(){P(this,e),this.buffer=new Uint8Array(1024),this.position=0}return O(e,[{key:"vt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ft(n.value),n=t.next();this.Mt()}},{key:"xt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ot(n.value),n=t.next();this.Nt()}},{key:"Bt",value:function(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{var a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}}catch(u){n.e(u)}finally{n.f()}this.Mt()}},{key:"Lt",value:function(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{var a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}}catch(u){n.e(u)}finally{n.f()}this.Nt()}},{key:"kt",value:function(e){var t=this.qt(e),n=za(t);this.Qt(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Kt",value:function(e){var t=this.qt(e),n=za(t);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"$t",value:function(){this.Ut(255),this.Ut(255)}},{key:"Wt",value:function(){this.Gt(255),this.Gt(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"zt",value:function(){return this.buffer.slice(0,this.position)}},{key:"qt",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ft",value:function(e){var t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}},{key:"Ot",value:function(e){var t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}},{key:"Mt",value:function(){this.Ut(0),this.Ut(1)}},{key:"Nt",value:function(){this.Gt(0),this.Gt(1)}},{key:"Ut",value:function(e){this.Qt(1),this.buffer[this.position++]=e}},{key:"Gt",value:function(e){this.Qt(1),this.buffer[this.position++]=~e}},{key:"Qt",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Ka=function(){function e(t){P(this,e),this.jt=t}return O(e,[{key:"yt",value:function(e){this.jt.vt(e)}},{key:"Vt",value:function(e){this.jt.Bt(e)}},{key:"Rt",value:function(e){this.jt.kt(e)}},{key:"Et",value:function(){this.jt.$t()}}]),e}(),ja=function(){function e(t){P(this,e),this.jt=t}return O(e,[{key:"yt",value:function(e){this.jt.xt(e)}},{key:"Vt",value:function(e){this.jt.Lt(e)}},{key:"Rt",value:function(e){this.jt.Kt(e)}},{key:"Et",value:function(){this.jt.Wt()}}]),e}(),Qa=function(){function e(){P(this,e),this.jt=new Ga,this.Ht=new Ka(this.jt),this.Jt=new ja(this.jt)}return O(e,[{key:"seed",value:function(e){this.jt.seed(e)}},{key:"Yt",value:function(e){return 0===e?this.Ht:this.Jt}},{key:"zt",value:function(){return this.jt.zt()}},{key:"reset",value:function(){this.jt.reset()}}]),e}(),Wa=function(){function e(t,n,r,i){P(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return O(e,[{key:"Zt",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Ha(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Ya(e.arrayValue,t.arrayValue))?n:0!==(n=Ya(e.directionalValue,t.directionalValue))?n:be.comparator(e.documentKey,t.documentKey)}function Ya(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Xa=function(){function e(t){P(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Xt=t.orderBy,this.en=[];var n,r=y(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.tn=i:this.en.push(i)}}catch(a){r.e(a)}finally{r.f()}}return O(e,[{key:"nn",value:function(e){X(e.collectionGroup===this.collectionId);var t=_e(e);if(void 0!==t&&!this.rn(t))return!1;for(var n=Ee(e),r=new Set,i=0,a=0;i<n.length&&this.rn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.tn){if(!r.has(this.tn.field.canonicalString())){var u=n[i];if(!this.sn(this.tn,u)||!this.on(this.Xt[a++],u))return!1}++i}for(;i<n.length;++i){var o=n[i];if(a>=this.Xt.length||!this.on(this.Xt[a++],o))return!1}return!0}},{key:"_n",value:function(){var e,t=new Lt(xe.comparator),n=[],r=y(this.en);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)n.push(new Se(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),n.push(new Se(i.field,0))}}}catch(s){r.e(s)}finally{r.f()}var a,u=y(this.Xt);try{for(u.s();!(a=u.n()).done;){var o=a.value;o.field.isKeyField()||t.has(o.field)||(t=t.add(o.field),n.push(new Se(o.field,"asc"===o.dir?0:1)))}}catch(s){u.e(s)}finally{u.f()}return new Ie(Ie.UNKNOWN_ID,this.collectionId,n,De.empty())}},{key:"rn",value:function(e){var t,n=y(this.en);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.sn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"sn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"on",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Ja(e){var t,n;if(X(e instanceof Dn||e instanceof An),e instanceof Dn){if(e instanceof Kn){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map(function(t){return Dn.create(e.field,"==",t)}))||[];return An.create(r,"or")}return e}var i=e.filters.map(function(e){return Ja(e)});return An.create(i,e.op)}function Za(e){if(0===e.getFilters().length)return[];var t=nu(Ja(e));return X(tu(t)),$a(t)||eu(t)?[t]:t.getFilters()}function $a(e){return e instanceof Dn}function eu(e){return e instanceof An&&Rn(e)}function tu(e){return $a(e)||eu(e)||function(e){if(e instanceof An&&Fn(e)){var t,n=y(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!$a(r)&&!eu(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function nu(e){if(X(e instanceof Dn||e instanceof An),e instanceof Dn)return e;if(1===e.filters.length)return nu(e.filters[0]);var t=e.filters.map(function(e){return nu(e)}),n=An.create(t,e.op);return tu(n=au(n))?n:(X(n instanceof An),X(Nn(n)),X(n.filters.length>1),n.filters.reduce(function(e,t){return ru(e,t)}))}function ru(e,t){return X(e instanceof Dn||e instanceof An),X(t instanceof Dn||t instanceof An),au(e instanceof Dn?t instanceof Dn?function(e,t){return An.create([e,t],"and")}(e,t):iu(e,t):t instanceof Dn?iu(t,e):function(e,t){if(X(e.filters.length>0&&t.filters.length>0),Nn(e)&&Nn(t))return Mn(e,t.getFilters());var n=Fn(e)?e:t,r=Fn(e)?t:e,i=n.filters.map(function(e){return ru(e,r)});return An.create(i,"or")}(e,t))}function iu(e,t){if(Nn(t))return Mn(t,e.getFilters());var n=t.filters.map(function(t){return ru(e,t)});return An.create(n,"or")}function au(e){if(X(e instanceof Dn||e instanceof An),e instanceof Dn)return e;var t=e.getFilters();if(1===t.length)return au(t[0]);if(Pn(e))return e;var n=t.map(function(e){return au(e)}),r=[];return n.forEach(function(t){t instanceof Dn?r.push(t):t instanceof An&&(t.op===e.op?r.push.apply(r,S(t.filters)):r.push(t))}),1===r.length?r[0]:An.create(r,e.op)}var uu=function(){function e(){P(this,e),this.an=new ou}return O(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.an.add(t),Ve.resolve()}},{key:"getCollectionParents",value:function(e,t){return Ve.resolve(this.an.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Ve.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Ve.resolve()}},{key:"deleteAllFieldIndexes",value:function(e){return Ve.resolve()}},{key:"createTargetIndexes",value:function(e,t){return Ve.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Ve.resolve(null)}},{key:"getIndexType",value:function(e,t){return Ve.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Ve.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Ve.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Ve.resolve(Fe.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Ve.resolve(Fe.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Ve.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Ve.resolve()}}]),e}(),ou=function(){function e(){P(this,e),this.index={}}return O(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Lt(ke.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Lt(ke.comparator)).toArray()}}]),e}(),su=new Uint8Array(0),cu=function(){function e(t,n){P(this,e),this.user=t,this.databaseId=n,this.un=new ou,this.cn=new wr(function(e){return Yn(e)},function(e,t){return Xn(e,t)}),this.uid=t.uid||""}return O(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.un.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(function(){n.un.add(t)});var a={collectionId:r,parent:et(i)};return lu(e).put(a)}return Ve.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[pe(t),""],!1,!0);return lu(e).G(r).next(function(e){var r,i=y(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(rt(a.parent))}}catch(u){i.e(u)}finally{i.f()}return n})}},{key:"addFieldIndex",value:function(e,t){var n=this,r=hu(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(function(e){return[e.fieldPath.canonicalString(),e.kind]})}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var u=du(e);return a.next(function(e){u.put(Pa(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=hu(e),r=du(e),i=fu(e);return n.delete(t.indexId).next(function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}).next(function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})}},{key:"deleteAllFieldIndexes",value:function(e){var t=hu(e),n=fu(e),r=du(e);return t.J().next(function(){return n.J()}).next(function(){return r.J()})}},{key:"createTargetIndexes",value:function(e,t){var n=this;return Ve.forEach(this.ln(t),function(t){return n.getIndexType(e,t).next(function(r){if(0===r||1===r){var i=new Xa(t);return n.addFieldIndex(e,i._n())}})})}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=fu(e),i=!0,a=new Map;return Ve.forEach(this.ln(t),function(t){return n.hn(e,t).next(function(e){i&&(i=!!e),a.set(t,e)})}).next(function(){if(i){var e=Nr(),u=[];return Ve.forEach(a,function(i,a){var o;j("IndexedDbIndexManager","Using index ".concat((o=i,"id=".concat(o.indexId,"|cg=").concat(o.collectionGroup,"|f=").concat(o.fields.map(function(e){return"".concat(e.fieldPath,":").concat(e.kind)}).join(",")))," to execute ").concat(Yn(t)));var s=function(e,t){var n=_e(t);if(void 0===n)return null;var r,i=y(Zn(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(u){i.e(u)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=y(Ee(t));try{for(i.s();!(n=i.n()).done;){var a,u=n.value,o=y(Zn(e,u.fieldPath));try{for(o.s();!(a=o.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(u.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(u.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){o.e(c)}finally{o.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=y(Ee(t));try{for(a.s();!(n=a.n()).done;){var u=n.value,o=0===u.kind?$n(e,u.fieldPath,e.startAt):er(e,u.fieldPath,e.startAt);r.push(o.value),i&&(i=o.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new In(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=y(Ee(t));try{for(a.s();!(n=a.n()).done;){var u=n.value,o=0===u.kind?er(e,u.fieldPath,e.endAt):$n(e,u.fieldPath,e.endAt);r.push(o.value),i&&(i=o.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new In(r,i)}(a,i),h=n.Pn(i,a,l),d=n.Pn(i,a,f),v=n.In(i,a,c),p=n.dn(i.indexId,s,h,l.inclusive,d,f.inclusive,v);return Ve.forEach(p,function(n){return r.H(n,t.limit).next(function(t){t.forEach(function(t){var n=be.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),u.push(n))})})})}).next(function(){return u})}return Ve.resolve(null)})}},{key:"ln",value:function(e){var t=this.cn.get(e);return t||(t=0===e.filters.length?[e]:Za(An.create(e.filters,"and")).map(function(t){return Hn(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)}),this.cn.set(e,t),t)}},{key:"dn",value:function(e,t,n,r,i,a,u){for(var o=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?o.Tn(t[h/c]):su,f=o.En(e,s,n[h%c],r),d=o.An(e,s,i[h%c],a),v=u.map(function(t){return o.En(e,s,t,!0)});l.push.apply(l,S(o.createRange(f,d,v)))},h=0;h<s;++h)f();return l}},{key:"En",value:function(e,t,n,r){var i=new Wa(e,be.empty(),t,n);return r?i:i.Zt()}},{key:"An",value:function(e,t,n,r){var i=new Wa(e,be.empty(),t,n);return r?i.Zt():i}},{key:"hn",value:function(e,t){var n=new Xa(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(function(e){var t,r=null,i=y(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.nn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(u){i.e(u)}finally{i.f()}return r})}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.ln(t);return Ve.forEach(i,function(t){return n.hn(e,t).next(function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Lt(xe.comparator),r=!1,i=y(e.filters);try{for(i.s();!(t=i.n()).done;){var a,u=y(t.value.getFlattenedFilters());try{for(u.s();!(a=u.n()).done;){var o=a.value;o.field.isKeyField()||("array-contains"===o.op||"array-contains-any"===o.op?r=!0:n=n.add(o.field))}}catch(f){u.e(f)}finally{u.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=y(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0})}).next(function(){return null!==t.limit&&i.length>1&&2===r?1:r})}},{key:"Rn",value:function(e,t){var n,r=new Qa,i=y(Ee(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,u=t.data.field(a.fieldPath);if(null==u)return null;var o=r.Yt(a.kind);Ua.Ct.dt(u,o)}}catch(s){i.e(s)}finally{i.f()}return r.zt()}},{key:"Tn",value:function(e){var t=new Qa;return Ua.Ct.dt(e,t.Yt(0)),t.zt()}},{key:"Vn",value:function(e,t){var n=new Qa;return Ua.Ct.dt(sn(this.databaseId,t),n.Yt(function(e){var t=Ee(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.zt()}},{key:"In",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Qa);var i,a=0,u=y(Ee(e));try{for(u.s();!(i=u.n()).done;){var o,s=i.value,c=n[a++],l=y(r);try{for(l.s();!(o=l.n()).done;){var f=o.value;if(this.mn(t,s.fieldPath)&&ln(c))r=this.fn(r,s,c);else{var h=f.Yt(s.kind);Ua.Ct.dt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){u.e(d)}finally{u.f()}return this.gn(r)}},{key:"Pn",value:function(e,t,n){return this.In(e,t,n.position)}},{key:"gn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].zt();return t}},{key:"fn",value:function(e,t,n){var r,i=S(e),a=[],u=y(n.arrayValue.values||[]);try{for(u.s();!(r=u.n()).done;){var o,s=r.value,c=y(i);try{for(c.s();!(o=c.n()).done;){var l=o.value,f=new Qa;f.seed(l.zt()),Ua.Ct.dt(s,f.Yt(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){u.e(h)}finally{u.f()}return a}},{key:"mn",value:function(e,t){return!!e.filters.find(function(e){return e instanceof Dn&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)})}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=hu(e),i=du(e);return(t?r.G("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.G()).next(function(e){var t=[];return Ve.forEach(e,function(e){return i.get([e.indexId,n.uid]).next(function(n){t.push(function(e,t){var n=t?new De(t.sequenceNumber,new Fe(Sa(t.readTime),new be(rt(t.documentKey)),t.largestBatchId)):De.empty(),r=e.fields.map(function(e){var t=c(e,2),n=t[0],r=t[1];return new Se(xe.fromServerFormat(n),r)});return new Ie(e.indexId,e.collectionGroup,r,n)}(e,n))})}).next(function(){return t})})}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next(function(e){return 0===e.length?null:(e.sort(function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:de(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup)})}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=hu(e),a=du(e);return this.pn(e).next(function(e){return i.G("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(function(t){return Ve.forEach(t,function(t){return a.put(Pa(t.indexId,r.user,e,n))})})})}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Ve.forEach(t,function(t,i){var a=r.get(t.collectionGroup);return(a?Ve.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next(function(a){return r.set(t.collectionGroup,a),Ve.forEach(a,function(r){return n.yn(e,t,r).next(function(t){var a=n.wn(i,r);return t.isEqual(a)?Ve.resolve():n.Sn(e,i,r,t,a)})})})})}},{key:"bn",value:function(e,t,n,r){return fu(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Vn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Dn",value:function(e,t,n,r){return fu(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Vn(n,t.key),t.key.path.toArray()])}},{key:"yn",value:function(e,t,n){var r=fu(e),i=new Lt(Ha);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Vn(n,t)])},function(e,r){i=i.add(new Wa(n.indexId,t,r.arrayValue,r.directionalValue))}).next(function(){return i})}},{key:"wn",value:function(e,t){var n=new Lt(Ha),r=this.Rn(t,e);if(null==r)return n;var i=_e(t);if(null!=i){var a=e.data.field(i.fieldPath);if(ln(a)){var u,o=y(a.arrayValue.values||[]);try{for(o.s();!(u=o.n()).done;){var s=u.value;n=n.add(new Wa(t.indexId,e.key,this.Tn(s),r))}}catch(c){o.e(c)}finally{o.f()}}}else n=n.add(new Wa(t.indexId,e.key,su,r));return n}},{key:"Sn",value:function(e,t,n,r,i){var a=this;j("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var u=[];return function(e,t,n,r,i){for(var a=e.getIterator(),u=t.getIterator(),o=Mt(a),s=Mt(u);o||s;){var c=!1,l=!1;if(o&&s){var f=n(o,s);f<0?l=!0:f>0&&(c=!0)}else null!=o?l=!0:c=!0;c?(r(s),s=Mt(u)):l?(i(o),o=Mt(a)):(o=Mt(a),s=Mt(u))}}(r,i,Ha,function(r){u.push(a.bn(e,t,n,r))},function(r){u.push(a.Dn(e,t,n,r))}),Ve.waitFor(u)}},{key:"pn",value:function(e){var t=1;return du(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},function(e,n,r){r.done(),t=n.sequenceNumber+1}).next(function(){return t})}},{key:"createRange",value:function(e,t,n){n=n.sort(function(e,t){return Ha(e,t)}).filter(function(e,t,n){return!t||0!==Ha(e,n[t-1])});var r=[];r.push(e);var i,a=y(n);try{for(a.s();!(i=a.n()).done;){var u=i.value,o=Ha(u,e),s=Ha(u,t);if(0===o)r[0]=e.Zt();else if(o>0&&s<0)r.push(u),r.push(u.Zt());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Cn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,su,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,su,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Cn",value:function(e,t){return Ha(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(vu)}},{key:"getMinOffset",value:function(e,t){var n=this;return Ve.mapArray(this.ln(t),function(t){return n.hn(e,t).next(function(e){return e||Y()})}).next(vu)}}]),e}();function lu(e){return Ct(e,"collectionParents")}function fu(e){return Ct(e,"indexEntries")}function hu(e){return Ct(e,"indexConfiguration")}function du(e){return Ct(e,"indexState")}function vu(e){X(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Re(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Fe(t.readTime,t.documentKey,n)}var pu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yu=function(){function e(t,n,r){P(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return O(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function mu(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],u=IDBKeyRange.only(n.batchId),o=0,s=r.Z({range:u},function(e,t,n){return o++,n.delete()});a.push(s.next(function(){X(1===o)}));var c,l=[],f=y(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=ut(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(v){f.e(v)}finally{f.f()}return Ve.waitFor(a).next(function(){return l})}function gu(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Y();t=e.noDocument}return JSON.stringify(t).length}yu.DEFAULT_COLLECTION_PERCENTILE=10,yu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yu.DEFAULT=new yu(41943040,yu.DEFAULT_COLLECTION_PERCENTILE,yu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yu.DISABLED=new yu(-1,0,0);var ku=function(){function e(t,n,r,i){P(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.vn={}}return O(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xu(e).Z({index:"userMutationsIndex",range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=bu(e),u=xu(e);return u.add({}).next(function(o){X("number"==typeof o);var s,c=new pi(o,t,n,r),l=function(e,t,n){var r=n.baseMutations.map(function(t){return aa(e.ht,t)}),i=n.mutations.map(function(t){return aa(e.ht,t)});return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Lt(function(e,t){return de(e.canonicalString(),t.canonicalString())}),d=y(r);try{for(d.s();!(s=d.n()).done;){var v=s.value,p=ut(i.userId,v.key.path,o);h=h.add(v.key.path.popLast()),f.push(u.put(l)),f.push(a.put(p,ot))}}catch(m){d.e(m)}finally{d.f()}return h.forEach(function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(function(){i.vn[o]=c.keys()}),Ve.waitFor(f).next(function(){return c})})}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return xu(e).get(t).next(function(e){return e?(X(e.userId===n.userId),Ca(n.serializer,e)):null})}},{key:"Fn",value:function(e,t){var n=this;return this.vn[t]?Ve.resolve(this.vn[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.vn[t]=r,r}return null})}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return xu(e).Z({index:"userMutationsIndex",range:i},function(e,t,i){t.userId===n.userId&&(X(t.batchId>=r),a=Ca(n.serializer,t)),i.done()}).next(function(){return a})}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return xu(e).Z({index:"userMutationsIndex",range:t,reverse:!0},function(e,t,r){n=t.batchId,r.done()}).next(function(){return n})}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xu(e).G("userMutationsIndex",n).next(function(e){return e.map(function(e){return Ca(t.serializer,e)})})}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=at(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return bu(e).Z({range:i},function(r,i,u){var o=c(r,3),s=o[0],l=o[1],f=o[2],h=rt(l);if(s===n.userId&&t.path.isEqual(h))return xu(e).get(f).next(function(e){if(!e)throw Y();X(e.userId===n.userId),a.push(Ca(n.serializer,e))});u.done()}).next(function(){return a})}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Lt(de),i=[];return t.forEach(function(t){var a=at(n.userId,t.path),u=IDBKeyRange.lowerBound(a),o=bu(e).Z({range:u},function(e,i,a){var u=c(e,3),o=u[0],s=u[1],l=u[2],f=rt(s);o===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()});i.push(o)}),Ve.waitFor(i).next(function(){return n.Mn(e,r)})}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=at(this.userId,r),u=IDBKeyRange.lowerBound(a),o=new Lt(de);return bu(e).Z({range:u},function(e,t,a){var u=c(e,3),s=u[0],l=u[1],f=u[2],h=rt(l);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(o=o.add(f)):a.done()}).next(function(){return n.Mn(e,o)})}},{key:"Mn",value:function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(xu(e).get(t).next(function(e){if(null===e)throw Y();X(e.userId===n.userId),r.push(Ca(n.serializer,e))}))}),Ve.waitFor(i).next(function(){return r})}},{key:"removeMutationBatch",value:function(e,t){var n=this;return mu(e.ue,this.userId,t).next(function(r){return e.addOnCommittedListener(function(){n.xn(t.batchId)}),Ve.forEach(r,function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)})})}},{key:"xn",value:function(e){delete this.vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return Ve.resolve();var r=IDBKeyRange.lowerBound(function(e){return[e]}(t.userId)),i=[];return bu(e).Z({range:r},function(e,n,r){if(e[0]===t.userId){var a=rt(e[1]);i.push(a)}else r.done()}).next(function(){X(0===i.length)})})}},{key:"containsKey",value:function(e,t){return wu(e,this.userId,t)}},{key:"On",value:function(e){var t=this;return Iu(e).get(this.userId).next(function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}})}}],[{key:"Pt",value:function(t,n,r,i){return X(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function wu(e,t,n){var r=at(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),u=!1;return bu(e).Z({range:a,Y:!0},function(e,n,r){var a=c(e,3),o=a[0],s=a[1];a[2];o===t&&s===i&&(u=!0),r.done()}).next(function(){return u})}function xu(e){return Ct(e,"mutations")}function bu(e){return Ct(e,"documentMutations")}function Iu(e){return Ct(e,"mutationQueues")}var _u=function(){function e(t){P(this,e),this.Nn=t}return O(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"Bn",value:function(){return new e(0)}},{key:"Ln",value:function(){return new e(-1)}}]),e}(),Eu=function(){function e(t,n){P(this,e),this.referenceDelegate=t,this.serializer=n}return O(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.kn(e).next(function(n){var r=new _u(n.highestTargetId);return n.highestTargetId=r.next(),t.qn(e,n).next(function(){return n.highestTargetId})})}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.kn(e).next(function(e){return me.fromTimestamp(new ye(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})}},{key:"getHighestSequenceNumber",value:function(e){return this.kn(e).next(function(e){return e.highestListenSequenceNumber})}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.kn(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.qn(e,i)})}},{key:"addTargetData",value:function(e,t){var n=this;return this.Qn(e,t).next(function(){return n.kn(e).next(function(r){return r.targetCount+=1,n.Kn(t,r),n.qn(e,r)})})}},{key:"updateTargetData",value:function(e,t){return this.Qn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return Tu(e).delete(t.targetId)}).next(function(){return n.kn(e)}).next(function(t){return X(t.targetCount>0),t.targetCount-=1,n.qn(e,t)})}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Tu(e).Z(function(u,o){var s=Da(o);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))}).next(function(){return Ve.waitFor(a)}).next(function(){return i})}},{key:"forEachTarget",value:function(e,t){return Tu(e).Z(function(e,n){var r=Da(n);t(r)})}},{key:"kn",value:function(e){return Su(e).get("targetGlobalKey").next(function(e){return X(null!==e),e})}},{key:"qn",value:function(e,t){return Su(e).put("targetGlobalKey",t)}},{key:"Qn",value:function(e,t){return Tu(e).put(Aa(this.serializer,t))}},{key:"Kn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.kn(e).next(function(e){return e.targetCount})}},{key:"getTargetData",value:function(e,t){var n=Yn(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Tu(e).Z({range:r,index:"queryTargetsIndex"},function(e,n,r){var a=Da(n);Xn(t,a.target)&&(i=a,r.done())}).next(function(){return i})}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Cu(e);return t.forEach(function(t){var u=et(t.path);i.push(a.put({targetId:n,path:u})),i.push(r.referenceDelegate.addReference(e,n,t))}),Ve.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Cu(e);return Ve.forEach(t,function(t){var a=et(t.path);return Ve.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])})}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Cu(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Cu(e),i=Nr();return r.Z({range:n,Y:!0},function(e,t,n){var r=rt(e[1]),a=new be(r);i=i.add(a)}).next(function(){return i})}},{key:"containsKey",value:function(e,t){var n=et(t.path),r=IDBKeyRange.bound([n],[pe(n)],!1,!0),i=0;return Cu(e).Z({index:"documentTargetsIndex",Y:!0,range:r},function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())}).next(function(){return i>0})}},{key:"lt",value:function(e,t){return Tu(e).get(t).next(function(e){return e?Da(e):null})}}]),e}();function Tu(e){return Ct(e,"targets")}function Su(e){return Ct(e,"targetGlobal")}function Cu(e){return Ct(e,"targetDocuments")}function Du(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),u=a[0],o=a[1],s=de(r,u);return 0===s?de(i,o):s}var Au=function(){function e(t){P(this,e),this.$n=t,this.buffer=new Lt(Du),this.Un=0}return O(e,[{key:"Wn",value:function(){return++this.Un}},{key:"Gn",value:function(e){var t=[e,this.Wn()];if(this.buffer.size<this.$n)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Du(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Nu=function(){function e(t,n,r){P(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.zn=null}return O(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.jn(6e4)}},{key:"stop",value:function(){this.zn&&(this.zn.cancel(),this.zn=null)}},{key:"started",get:function(){return null!==this.zn}},{key:"jn",value:function(e){var t=this;j("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.zn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,k(m().mark(function e(){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.zn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Ge(e.t0)){e.next=12;break}j("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Oe(e.t0);case 14:return e.next=16,t.jn(3e5);case 16:case"end":return e.stop()}},e,null,[[1,6]])})))}}]),e}(),Fu=function(){function e(t,n){P(this,e),this.Hn=t,this.params=n}return O(e,[{key:"calculateTargetCount",value:function(e,t){return this.Hn.Jn(e).next(function(e){return Math.floor(t/100*e)})}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Ve.resolve(Xe.ae);var r=new Au(t);return this.Hn.forEachTarget(e,function(e){return r.Gn(e.sequenceNumber)}).next(function(){return n.Hn.Yn(e,function(e){return r.Gn(e)})}).next(function(){return r.maxValue})}},{key:"removeTargets",value:function(e,t,n){return this.Hn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Hn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector","Garbage collection skipped; disabled"),Ve.resolve(pu)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),pu):n.Zn(e,t)})}},{key:"getCacheSize",value:function(e){return this.Hn.getCacheSize(e)}},{key:"Zn",value:function(e,t){var n,r,a,u,o,s,c,l=this,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return t>l.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(l.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=l.params.maximumSequenceNumbersToCollect):r=t,u=Date.now(),l.nthSequenceNumber(e,r)}).next(function(r){return n=r,o=Date.now(),l.removeTargets(e,n,t)}).next(function(t){return a=t,s=Date.now(),l.removeOrphanedDocuments(e,n)}).next(function(e){return c=Date.now(),G()<=i.LogLevel.DEBUG&&j("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(u-f,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-u)+"ms\n"+"\tRemoved ".concat(a," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-s)+"ms\n"+"Total Duration: ".concat(c-f,"ms")),Ve.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:e})})}}]),e}();function Ru(e,t){return new Fu(e,t)}var Pu=function(){function e(t,n){P(this,e),this.db=t,this.garbageCollector=Ru(this,n)}return O(e,[{key:"Jn",value:function(e){var t=this.Xn(e);return this.db.getTargetCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})}},{key:"Xn",value:function(e){var t=0;return this.Yn(e,function(e){t++}).next(function(){return t})}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Yn",value:function(e,t){return this.er(e,function(e,n){return t(n)})}},{key:"addReference",value:function(e,t,n){return Lu(e,n)}},{key:"removeReference",value:function(e,t,n){return Lu(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Lu(e,t)}},{key:"tr",value:function(e,t){return function(e,t){var n=!1;return Iu(e).X(function(r){return wu(e,r,t).next(function(e){return e&&(n=!0),Ve.resolve(!e)})}).next(function(){return n})}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.er(e,function(u,o){if(o<=t){var s=n.tr(e,u).next(function(t){if(!t)return a++,r.getEntry(e,u).next(function(){return r.removeEntry(u,me.min()),Cu(e).delete(function(e){return[0,et(e.path)]}(u))})});i.push(s)}}).next(function(){return Ve.waitFor(i)}).next(function(){return r.apply(e)}).next(function(){return a})}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Lu(e,t)}},{key:"er",value:function(e,t){var n,r=Cu(e),i=Xe.ae;return r.Z({index:"documentTargetsIndex"},function(e,r){var a=c(e,2),u=a[0],o=(a[1],r.path),s=r.sequenceNumber;0===u?(i!==Xe.ae&&t(new be(rt(n)),i),i=s,n=o):i=Xe.ae}).next(function(){i!==Xe.ae&&t(new be(rt(n)),i)})}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Lu(e,t){return Cu(e).put(function(e,t){return{targetId:0,path:et(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Ou=function(){function e(){P(this,e),this.changes=new wr(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),this.changesApplied=!1}return O(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ve.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Mu=function(){function e(t){P(this,e),this.serializer=t}return O(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Bu(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Bu(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Ea(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next(function(r){return r.byteSize+=t,n.nr(e,r)})}},{key:"getEntry",value:function(e,t){var n=this,r=bn.newInvalidDocument(t);return Bu(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(zu(t))},function(e,i){r=n.rr(t,i)}).next(function(){return r})}},{key:"ir",value:function(e,t){var n=this,r={size:0,document:bn.newInvalidDocument(t)};return Bu(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(zu(t))},function(e,i){r={document:n.rr(t,i),size:gu(i)}}).next(function(){return r})}},{key:"getEntries",value:function(e,t){var n=this,r=br();return this.sr(e,t,function(e,t){var i=n.rr(e,t);r=r.insert(e,i)}).next(function(){return r})}},{key:"_r",value:function(e,t){var n=this,r=br(),i=new Ft(be.comparator);return this.sr(e,t,function(e,t){var a=n.rr(e,t);r=r.insert(e,a),i=i.insert(e,gu(t))}).next(function(){return{documents:r,ar:i}})}},{key:"sr",value:function(e,t,n){if(t.isEmpty())return Ve.resolve();var r=new Lt(Ku);t.forEach(function(e){return r=r.add(e)});var i=IDBKeyRange.bound(zu(r.first()),zu(r.last())),a=r.getIterator(),u=a.getNext();return Bu(e).Z({index:"documentKeyIndex",range:i},function(e,t,r){for(var i=be.fromSegments([].concat(S(t.prefixPath),[t.collectionGroup,t.documentId]));u&&Ku(u,i)<0;)n(u,null),u=a.getNext();u&&u.isEqual(i)&&(n(u,t),u=a.hasNext()?a.getNext():null),u?r.W(zu(u)):r.done()}).next(function(){for(;u;)n(u,null),u=a.hasNext()?a.getNext():null})}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r,i){var a=this,u=t.path,o=[u.popLast().toArray(),u.lastSegment(),Ea(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bu(e).G(IDBKeyRange.bound(o,s,!0)).next(function(e){null==i||i.incrementDocumentReadCount(e.length);var n,u=br(),o=y(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,c=a.rr(be.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);c.isFoundDocument()&&(yr(t,c)||r.has(c.key))&&(u=u.insert(c.key,c))}}catch(l){o.e(l)}finally{o.f()}return u})}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=br(),u=Gu(t,n),o=Gu(t,Fe.max());return Bu(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,o,!0)},function(e,t,n){var u=i.rr(be.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(u.key,u)).size===r&&n.done()}).next(function(){return a})}},{key:"newChangeBuffer",value:function(e){return new qu(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next(function(e){return e.byteSize})}},{key:"getMetadata",value:function(e){return Uu(e).get("remoteDocumentGlobalKey").next(function(e){return X(!!e),e})}},{key:"nr",value:function(e,t){return Uu(e).put("remoteDocumentGlobalKey",t)}},{key:"rr",value:function(e,t){if(t){var n=Ia(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(me.min()))return n}return bn.newInvalidDocument(e)}}]),e}();function Vu(e){return new Mu(e)}var qu=function(e){w(n,Ou);var t=b(n);function n(e,r){var i;return P(this,n),(i=t.call(this)).ur=e,i.trackRemovals=r,i.cr=new wr(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),i}return O(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Lt(function(e,t){return de(e.canonicalString(),t.canonicalString())});return this.changes.forEach(function(a,u){var o=t.cr.get(a);if(n.push(t.ur.removeEntry(e,a,o.readTime)),u.isValidDocument()){var s=_a(t.ur.serializer,u);i=i.add(a.path.popLast());var c=gu(s);r+=c-o.size,n.push(t.ur.addEntry(e,a,s))}else if(r-=o.size,t.trackRemovals){var l=_a(t.ur.serializer,u.convertToNoDocument(me.min()));n.push(t.ur.addEntry(e,a,l))}}),i.forEach(function(r){n.push(t.ur.indexManager.addToCollectionParentIndex(e,r))}),n.push(this.ur.updateMetadata(e,r)),Ve.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.ur.ir(e,t).next(function(e){return n.cr.set(t,{size:e.size,readTime:e.document.readTime}),e.document})}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.ur._r(e,t).next(function(e){var t=e.documents;return e.ar.forEach(function(e,r){n.cr.set(e,{size:r,readTime:t.get(e).readTime})}),t})}}]),n}();function Uu(e){return Ct(e,"remoteDocumentGlobal")}function Bu(e){return Ct(e,"remoteDocumentsV14")}function zu(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Gu(e,t){var n=t.documentKey.path.toArray();return[e,Ea(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ku(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=de(n[a],r[a]))return i;return(i=de(n.length,r.length))||((i=de(n[n.length-2],r[r.length-2]))||de(n[n.length-1],r[r.length-1]))}var ju=O(function e(t,n){P(this,e),this.overlayedDocument=t,this.mutatedFields=n}),Qu=function(){function e(t,n,r,i){P(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return O(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next(function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)}).next(function(e){return null!==r&&ri(r.mutation,e,Vt.empty(),ye.now()),e})}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next(function(t){return n.getLocalViewOfDocuments(e,t,Nr()).next(function(){return t})})}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nr(),i=Tr();return this.populateOverlays(e,i,t).next(function(){return n.computeViews(e,t,i,r).next(function(e){var t=_r();return e.forEach(function(e,n){t=t.insert(e,n.overlayedDocument)}),t})})}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Tr();return this.populateOverlays(e,r,t).next(function(){return n.computeViews(e,t,r,Nr())})}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach(function(e){t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(function(e){e.forEach(function(e,n){t.set(e,n)})})}},{key:"computeViews",value:function(e,t,n,r){var i=br(),a=Cr(),u=Cr();return t.forEach(function(e,t){var u=n.get(t.key);r.has(t.key)&&(void 0===u||u.mutation instanceof oi)?i=i.insert(t.key,t):void 0!==u?(a.set(t.key,u.mutation.getFieldMask()),ri(u.mutation,t,u.mutation.getFieldMask(),ye.now())):a.set(t.key,Vt.empty())}),this.recalculateAndSaveOverlays(e,i).next(function(e){return e.forEach(function(e,t){return a.set(e,t)}),t.forEach(function(e,t){var n;return u.set(e,new ju(t,null!==(n=a.get(e))&&void 0!==n?n:null))}),u})}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Cr(),i=new Ft(function(e,t){return e-t}),a=Nr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(e){var n,a=y(e);try{var u=function(){var e=n.value;e.keys().forEach(function(n){var a=t.get(n);if(null!==a){var u=r.get(n)||Vt.empty();u=e.applyToLocalView(a,u),r.set(n,u);var o=(i.get(e.batchId)||Nr()).add(n);i=i.insert(e.batchId,o)}})};for(a.s();!(n=a.n()).done;)u()}catch(o){a.e(o)}finally{a.f()}}).next(function(){for(var u=[],o=i.getReverseIterator(),s=function(){var i=o.getNext(),s=i.key,c=i.value,l=Sr();c.forEach(function(e){if(!a.has(e)){var n=ti(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}}),u.push(n.documentOverlayCache.saveOverlays(e,s,l))};o.hasNext();)s();return Ve.waitFor(u)}).next(function(){return r})}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next(function(t){return n.recalculateAndSaveOverlays(e,t)})}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){return function(e){return be.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):or(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(function(a){var u=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Ve.resolve(Tr()),o=-1,s=a;return u.next(function(t){return Ve.forEach(t,function(t,n){return o<n.largestBatchId&&(o=n.largestBatchId),a.get(t)?Ve.resolve():i.remoteDocumentCache.getEntry(e,t).next(function(e){s=s.insert(t,e)})}).next(function(){return i.populateOverlays(e,t,a)}).next(function(){return i.computeViews(e,s,t,Nr())}).next(function(e){return{batchId:o,changes:Er(e)}})})})}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new be(t)).next(function(e){var t=_r();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n,r){var i=this,a=t.collectionGroup,u=_r();return this.indexManager.getCollectionParents(e,a).next(function(o){return Ve.forEach(o,function(o){var s=function(e,t){return new tr(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(a));return i.getDocumentsMatchingCollectionQuery(e,s,n,r).next(function(e){e.forEach(function(e,t){u=u.insert(e,t)})})}).next(function(){return u})})}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n,r){var i,a=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(function(u){return i=u,a.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)}).next(function(e){i.forEach(function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,bn.newInvalidDocument(r)))});var n=_r();return e.forEach(function(e,r){var a=i.get(e);void 0!==a&&ri(a.mutation,r,Vt.empty(),ye.now()),yr(t,r)&&(n=n.insert(e,r))}),n})}}]),e}(),Wu=function(){function e(t){P(this,e),this.serializer=t,this.lr=new Map,this.hr=new Map}return O(e,[{key:"getBundleMetadata",value:function(e,t){return Ve.resolve(this.lr.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Qi(e.createTime)}}(t)),Ve.resolve()}},{key:"getNamedQuery",value:function(e,t){return Ve.resolve(this.hr.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hr.set(t.name,function(e){return{name:e.name,query:Na(e.bundledQuery),readTime:Qi(e.readTime)}}(t)),Ve.resolve()}}]),e}(),Hu=function(){function e(){P(this,e),this.overlays=new Ft(be.comparator),this.Pr=new Map}return O(e,[{key:"getOverlay",value:function(e,t){return Ve.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Tr();return Ve.forEach(t,function(t){return n.getOverlay(e,t).next(function(e){null!==e&&r.set(t,e)})}).next(function(){return r})}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach(function(n,i){r.It(e,t,i)}),Ve.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Pr.get(n);return void 0!==i&&(i.forEach(function(e){return r.overlays=r.overlays.remove(e)}),this.Pr.delete(n)),Ve.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Tr(),i=t.length+1,a=new be(t.child("")),u=this.overlays.getIteratorFrom(a);u.hasNext();){var o=u.getNext().value,s=o.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&o.largestBatchId>n&&r.set(o.getKey(),o)}return Ve.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Ft(function(e,t){return e-t}),a=this.overlays.getIterator();a.hasNext();){var u=a.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>n){var o=i.get(u.largestBatchId);null===o&&(o=Tr(),i=i.insert(u.largestBatchId,o)),o.set(u.getKey(),u)}}for(var s=Tr(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach(function(e,t){return s.set(e,t)}),!(s.size()>=r)););return Ve.resolve(s)}},{key:"It",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Pr.get(r.largestBatchId).delete(n.key);this.Pr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new mi(t,n));var a=this.Pr.get(t);void 0===a&&(a=Nr(),this.Pr.set(t,a)),this.Pr.set(t,a.add(n.key))}}]),e}(),Yu=function(){function e(){P(this,e),this.Ir=new Lt(Xu.dr),this.Tr=new Lt(Xu.Er)}return O(e,[{key:"isEmpty",value:function(){return this.Ir.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Xu(e,t);this.Ir=this.Ir.add(n),this.Tr=this.Tr.add(n)}},{key:"Ar",value:function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})}},{key:"removeReference",value:function(e,t){this.Rr(new Xu(e,t))}},{key:"Vr",value:function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})}},{key:"mr",value:function(e){var t=this,n=new be(new ke([])),r=new Xu(n,e),i=new Xu(n,e+1),a=[];return this.Tr.forEachInRange([r,i],function(e){t.Rr(e),a.push(e.key)}),a}},{key:"gr",value:function(){var e=this;this.Ir.forEach(function(t){return e.Rr(t)})}},{key:"Rr",value:function(e){this.Ir=this.Ir.delete(e),this.Tr=this.Tr.delete(e)}},{key:"pr",value:function(e){var t=new be(new ke([])),n=new Xu(t,e),r=new Xu(t,e+1),i=Nr();return this.Tr.forEachInRange([n,r],function(e){i=i.add(e.key)}),i}},{key:"containsKey",value:function(e){var t=new Xu(e,0),n=this.Ir.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Xu=function(){function e(t,n){P(this,e),this.key=t,this.yr=n}return O(e,null,[{key:"dr",value:function(e,t){return be.comparator(e.key,t.key)||de(e.yr,t.yr)}},{key:"Er",value:function(e,t){return de(e.yr,t.yr)||be.comparator(e.key,t.key)}}]),e}(),Ju=function(){function e(t,n){P(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new Lt(Xu.dr)}return O(e,[{key:"checkEmpty",value:function(e){return Ve.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new pi(i,t,n,r);this.mutationQueue.push(a);var u,o=y(r);try{for(o.s();!(u=o.n()).done;){var s=u.value;this.Sr=this.Sr.add(new Xu(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){o.e(c)}finally{o.f()}return Ve.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Ve.resolve(this.br(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Dr(n),i=r<0?0:r;return Ve.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Ve.resolve(0===this.mutationQueue.length?-1:this.wr-1)}},{key:"getAllMutationBatches",value:function(e){return Ve.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Xu(t,0),i=new Xu(t,Number.POSITIVE_INFINITY),a=[];return this.Sr.forEachInRange([r,i],function(e){var t=n.br(e.yr);a.push(t)}),Ve.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Lt(de);return t.forEach(function(e){var t=new Xu(e,0),i=new Xu(e,Number.POSITIVE_INFINITY);n.Sr.forEachInRange([t,i],function(e){r=r.add(e.yr)})}),Ve.resolve(this.Cr(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;be.isDocumentKey(i)||(i=i.child(""));var a=new Xu(new be(i),0),u=new Lt(de);return this.Sr.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(u=u.add(e.yr)),!0)},a),Ve.resolve(this.Cr(u))}},{key:"Cr",value:function(e){var t=this,n=[];return e.forEach(function(e){var r=t.br(e);null!==r&&n.push(r)}),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;X(0===this.vr(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Sr;return Ve.forEach(t.mutations,function(i){var a=new Xu(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(function(){n.Sr=r})}},{key:"xn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Xu(t,0),r=this.Sr.firstAfterOrEqual(n);return Ve.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Ve.resolve()}},{key:"vr",value:function(e,t){return this.Dr(e)}},{key:"Dr",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"br",value:function(e){var t=this.Dr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Zu=function(){function e(t){P(this,e),this.Fr=t,this.docs=new Ft(be.comparator),this.size=0}return O(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Fr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Ve.resolve(n?n.document.mutableCopy():bn.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=br();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():bn.newInvalidDocument(e))}),Ve.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=br(),a=t.path,u=new be(a.child("")),o=this.docs.getIteratorFrom(u);o.hasNext();){var s=o.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Re(Ne(l),n)<=0||(r.has(l.key)||yr(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Ve.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Y()}},{key:"Mr",value:function(e,t){return Ve.forEach(this.docs,function(e){return t(e)})}},{key:"newChangeBuffer",value:function(e){return new $u(this)}},{key:"getSize",value:function(e){return Ve.resolve(this.size)}}]),e}(),$u=function(e){w(n,Ou);var t=b(n);function n(e){var r;return P(this,n),(r=t.call(this)).ur=e,r}return O(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach(function(r,i){i.isValidDocument()?n.push(t.ur.addEntry(e,i)):t.ur.removeEntry(r)}),Ve.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.ur.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.ur.getEntries(e,t)}}]),n}(),eo=function(){function e(t){P(this,e),this.persistence=t,this.Or=new wr(function(e){return Yn(e)},Xn),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.Nr=0,this.Br=new Yu,this.targetCount=0,this.Lr=_u.Bn()}return O(e,[{key:"forEachTarget",value:function(e,t){return this.Or.forEach(function(e,n){return t(n)}),Ve.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Ve.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Ve.resolve(this.Nr)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Lr.next(),Ve.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Nr&&(this.Nr=t),Ve.resolve()}},{key:"Qn",value:function(e){this.Or.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Lr=new _u(t),this.highestTargetId=t),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Qn(t),this.targetCount+=1,Ve.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Qn(t),Ve.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Or.delete(t.target),this.Br.mr(t.targetId),this.targetCount-=1,Ve.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Or.forEach(function(u,o){o.sequenceNumber<=t&&null===n.get(o.targetId)&&(r.Or.delete(u),a.push(r.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Ve.waitFor(a).next(function(){return i})}},{key:"getTargetCount",value:function(e){return Ve.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Or.get(t)||null;return Ve.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Br.Ar(t,n),Ve.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Br.Vr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.markPotentiallyOrphaned(e,t))}),Ve.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Br.mr(t),Ve.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Br.pr(t);return Ve.resolve(n)}},{key:"containsKey",value:function(e,t){return Ve.resolve(this.Br.containsKey(t))}}]),e}(),to=function(){function e(t,n){var r=this;P(this,e),this.kr={},this.overlays={},this.qr=new Xe(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=t(this),this.Kr=new eo(this),this.indexManager=new uu,this.remoteDocumentCache=function(e){return new Zu(e)}(function(e){return r.referenceDelegate.$r(e)}),this.serializer=new ba(n),this.Ur=new Wu(this.serializer)}return O(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Qr=!1,Promise.resolve()}},{key:"started",get:function(){return this.Qr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Hu,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.kr[e.toKey()];return n||(n=new Ju(t,this.referenceDelegate),this.kr[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ur}},{key:"runTransaction",value:function(e,t,n){var r=this;j("MemoryPersistence","Starting transaction:",e);var i=new no(this.qr.next());return this.referenceDelegate.Wr(),n(i).next(function(e){return r.referenceDelegate.Gr(i).next(function(){return e})}).toPromise().then(function(e){return i.raiseOnCommittedEvent(),e})}},{key:"zr",value:function(e,t){return Ve.or(Object.values(this.kr).map(function(n){return function(){return n.containsKey(e,t)}}))}}]),e}(),no=function(e){w(n,Le);var t=b(n);function n(e){var r;return P(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return O(n)}(),ro=function(){function e(t){P(this,e),this.persistence=t,this.jr=new Yu,this.Hr=null}return O(e,[{key:"Yr",get:function(){if(this.Hr)return this.Hr;throw Y()}},{key:"addReference",value:function(e,t,n){return this.jr.addReference(n,t),this.Yr.delete(n.toString()),Ve.resolve()}},{key:"removeReference",value:function(e,t,n){return this.jr.removeReference(n,t),this.Yr.add(n.toString()),Ve.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Yr.add(t.toString()),Ve.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.jr.mr(t.targetId).forEach(function(e){return n.Yr.add(e.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.Yr.add(e.toString())})}).next(function(){return r.removeTargetData(e,t)})}},{key:"Wr",value:function(){this.Hr=new Set}},{key:"Gr",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ve.forEach(this.Yr,function(r){var i=be.fromPath(r);return t.Zr(e,i).next(function(e){e||n.removeEntry(i,me.min())})}).next(function(){return t.Hr=null,n.apply(e)})}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zr(e,t).next(function(e){e?n.Yr.delete(t.toString()):n.Yr.add(t.toString())})}},{key:"$r",value:function(e){return 0}},{key:"Zr",value:function(e,t){var n=this;return Ve.or([function(){return Ve.resolve(n.jr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zr(e,t)}])}}],[{key:"Jr",value:function(t){return new e(t)}}]),e}(),io=function(){function e(t,n){P(this,e),this.persistence=t,this.Xr=new wr(function(e){return et(e.path)},function(e,t){return e.isEqual(t)}),this.garbageCollector=Ru(this,n)}return O(e,[{key:"Wr",value:function(){}},{key:"Gr",value:function(e){return Ve.resolve()}},{key:"forEachTarget",value:function(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}},{key:"Jn",value:function(e){var t=this.Xn(e);return this.persistence.getTargetCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})}},{key:"Xn",value:function(e){var t=0;return this.Yn(e,function(e){t++}).next(function(){return t})}},{key:"Yn",value:function(e,t){var n=this;return Ve.forEach(this.Xr,function(r,i){return n.tr(e,r,i).next(function(e){return e?Ve.resolve():t(i)})})}},{key:"removeTargets",value:function(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.Mr(e,function(i){return n.tr(e,i,t).next(function(e){e||(r++,a.removeEntry(i,me.min()))})}).next(function(){return a.apply(e)}).next(function(){return r})}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Xr.set(t,e.currentSequenceNumber),Ve.resolve()}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}},{key:"addReference",value:function(e,t,n){return this.Xr.set(n,e.currentSequenceNumber),Ve.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Xr.set(n,e.currentSequenceNumber),Ve.resolve()}},{key:"updateLimboDocument",value:function(e,t){return this.Xr.set(t,e.currentSequenceNumber),Ve.resolve()}},{key:"$r",value:function(e){var t=e.key.toString().length;return e.isFoundDocument()&&(t+=on(e.data.value)),t}},{key:"tr",value:function(e,t,n){var r=this;return Ve.or([function(){return r.persistence.zr(e,t)},function(){return r.persistence.getTargetCache().containsKey(e,t)},function(){var e=r.Xr.get(t);return Ve.resolve(void 0!==e&&e>n)}])}},{key:"getCacheSize",value:function(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}],[{key:"Jr",value:function(t,n){return new e(t,n)}}]),e}(),ao=function(){function e(t){P(this,e),this.serializer=t}return O(e,[{key:"B",value:function(e,t,n,r){var i=this,a=new qe("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",it,{unique:!0}),e.createObjectStore("documentMutations")}(e),uo(e),function(e){e.createObjectStore("remoteDocuments")}(e));var u=Ve.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),uo(e)),u=u.next(function(){return e=a.store("targetGlobal"),t={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:me.min().toTimestamp(),targetCount:0},e.put("targetGlobalKey",t);var e,t})),n<4&&r>=4&&(0!==n&&(u=u.next(function(){return function(e,t){return t.store("mutations").G().next(function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",it,{unique:!0});var r=t.store("mutations"),i=n.map(function(e){return r.put(e)});return Ve.waitFor(i)})}(e,a)})),u=u.next(function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(u=u.next(function(){return i.ei(a)})),n<6&&r>=6&&(u=u.next(function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.ti(a)})),n<7&&r>=7&&(u=u.next(function(){return i.ni(a)})),n<8&&r>=8&&(u=u.next(function(){return i.ri(e,a)})),n<9&&r>=9&&(u=u.next(function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(u=u.next(function(){return i.ii(a)})),n<11&&r>=11&&(u=u.next(function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&r>=12&&(u=u.next(function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:kt});t.createIndex("collectionPathOverlayIndex",wt,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",xt,{unique:!1})}(e)})),n<13&&r>=13&&(u=u.next(function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:st});t.createIndex("documentKeyIndex",ct),t.createIndex("collectionGroupIndex",lt)}(e)}).next(function(){return i.si(e,a)}).next(function(){return e.deleteObjectStore("remoteDocuments")})),n<14&&r>=14&&(u=u.next(function(){return i.oi(e,a)})),n<15&&r>=15&&(u=u.next(function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:pt}).createIndex("sequenceNumberIndex",yt,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:mt}).createIndex("documentKeyIndex",gt,{unique:!1})}(e)})),u}},{key:"ti",value:function(e){var t=0;return e.store("remoteDocuments").Z(function(e,n){t+=gu(n)}).next(function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}},{key:"ei",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.G().next(function(n){return Ve.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",i).next(function(r){return Ve.forEach(r,function(r){X(r.userId===n.userId);var i=Ca(t.serializer,r);return mu(e,n.userId,i).next(function(){})})})})})}},{key:"ni",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(function(e){var r=[];return n.Z(function(n,i){var a=new ke(n),u=function(e){return[0,et(e)]}(a);r.push(t.get(u).next(function(n){return n?Ve.resolve():function(n){return t.put({targetId:0,path:et(n),sequenceNumber:e.highestListenSequenceNumber})}(a)}))}).next(function(){return Ve.waitFor(r)})})}},{key:"ri",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:vt});var n=t.store("collectionParents"),r=new ou,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:et(i)})}};return t.store("remoteDocuments").Z({Y:!0},function(e,t){var n=new ke(e);return i(n.popLast())}).next(function(){return t.store("documentMutations").Z({Y:!0},function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],rt(r));return i(a.popLast())})})}},{key:"ii",value:function(e){var t=this,n=e.store("targets");return n.Z(function(e,r){var i=Da(r),a=Aa(t.serializer,i);return n.put(a)})}},{key:"si",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z(function(e,n){var i=t.store("remoteDocumentsV14"),a=function(e){return e.document?new be(ke.fromString(e.document.name).popFirst(5)):e.noDocument?be.fromSegments(e.noDocument.path):e.unknownDocument?be.fromSegments(e.unknownDocument.path):Y()}(n).path.toArray(),u={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(u))}).next(function(){return Ve.waitFor(r)})}},{key:"oi",value:function(e,t){var n=this,r=t.store("mutations"),i=Vu(this.serializer),a=new to(ro.Jr,this.serializer.ht);return r.G().next(function(e){var r=new Map;return e.forEach(function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Nr();Ca(n.serializer,e).keys().forEach(function(e){return i=i.add(e)}),r.set(e.userId,i)}),Ve.forEach(r,function(e,r){var u=new U(r),o=Va.Pt(n.serializer,u),s=a.getIndexManager(u),c=ku.Pt(u,n.serializer,s,a.referenceDelegate);return new Qu(i,c,o,s).recalculateAndSaveOverlaysForDocumentKeys(new St(t,Xe.ae),e).next()})})}}]),e}();function uo(e){e.createObjectStore("targetDocuments",{keyPath:ht}).createIndex("documentTargetsIndex",dt,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ft,{unique:!0}),e.createObjectStore("targetGlobal")}var oo="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",so=function(){function e(t,n,r,i,a,u,o,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(P(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this._i=a,this.window=u,this.document=o,this.ai=c,this.ui=l,this.ci=f,this.qr=null,this.Qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.li=null,this.inForeground=!1,this.hi=null,this.Pi=null,this.Ii=Number.NEGATIVE_INFINITY,this.di=function(e){return Promise.resolve()},!e.C())throw new ee($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Pu(this,i),this.Ti=n+"main",this.serializer=new ba(s),this.Ei=new Ue(this.Ti,this.ci,new ao(this.serializer)),this.Kr=new Eu(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Vu(this.serializer),this.Ur=new La,this.window&&this.window.localStorage?this.Ai=this.window.localStorage:(this.Ai=null,!1===l&&Q("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return O(e,[{key:"start",value:function(){var e=this;return this.Ri().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new ee($.FAILED_PRECONDITION,oo);return e.Vi(),e.mi(),e.fi(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.Kr.getHighestSequenceNumber(t)})}).then(function(t){e.qr=new Xe(t,e.ai)}).then(function(){e.Qr=!0}).catch(function(t){return e.Ei&&e.Ei.close(),Promise.reject(t)})}},{key:"gi",value:function(e){var t=this;return this.di=function(){var n=k(m().mark(function n(r){return m().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ei.k(function(){var t=k(m().mark(function t(n){return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this._i.enqueueAndForget(k(m().mark(function e(){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ri();case 4:case"end":return e.stop()}},e)}))))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(t){return lo(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next(function(){if(e.isPrimary)return e.pi(t).next(function(t){t||(e.isPrimary=!1,e._i.enqueueRetryable(function(){return e.di(!1)}))})}).next(function(){return e.yi(t)}).next(function(n){return e.isPrimary&&!n?e.wi(t).next(function(){return!1}):!!n&&e.Si(t).next(function(){return!0})})}).catch(function(t){if(Ge(t))return j("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return j("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){e.isPrimary!==t&&e._i.enqueueRetryable(function(){return e.di(t)}),e.isPrimary=t})}},{key:"pi",value:function(e){var t=this;return co(e).get("owner").next(function(e){return Ve.resolve(t.bi(e))})}},{key:"Di",value:function(e){return lo(e).delete(this.clientId)}},{key:"Ci",value:function(){var e=k(m().mark(function e(){var t,n,r,i,a=this;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.vi(this.Ii,18e5)){e.next=6;break}return this.Ii=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(e){var t=Ct(e,"clientMetadata");return t.G().next(function(e){var n=a.Fi(e,18e5),r=e.filter(function(e){return-1===n.indexOf(e)});return Ve.forEach(r,function(e){return t.delete(e.clientId)}).next(function(){return r})})}).catch(function(){return[]});case 4:if(t=e.sent,this.Ai){n=y(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Ai.removeItem(this.Mi(i.clientId))}catch(u){n.e(u)}finally{n.f()}}case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fi",value:function(){var e=this;this.Pi=this._i.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.Ri().then(function(){return e.Ci()}).then(function(){return e.fi()})})}},{key:"bi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"yi",value:function(e){var t=this;return this.ui?Ve.resolve(!0):co(e).get("owner").next(function(n){if(null!==n&&t.vi(n.leaseTimestampMs,5e3)&&!t.xi(n.ownerId)){if(t.bi(n)&&t.networkEnabled)return!0;if(!t.bi(n)){if(!n.allowTabSynchronization)throw new ee($.FAILED_PRECONDITION,oo);return!1}}return!(!t.networkEnabled||!t.inForeground)||lo(e).G().next(function(e){return void 0===t.Fi(e,5e3).find(function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1})})}).next(function(e){return t.isPrimary!==e&&j("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e})}},{key:"shutdown",value:function(){var e=k(m().mark(function e(){var t=this;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.Qr=!1,this.Oi(),this.Pi&&(this.Pi.cancel(),this.Pi=null),this.Ni(),this.Bi(),e.next=7,this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],function(e){var n=new St(e,Xe.ae);return t.wi(n).next(function(){return t.Di(n)})});case 7:this.Ei.close(),this.Li();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Fi",value:function(e,t){var n=this;return e.filter(function(e){return n.vi(e.updateTimeMs,t)&&!n.xi(e.clientId)})}},{key:"ki",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return lo(t).G().next(function(t){return e.Fi(t,18e5).map(function(e){return e.clientId})})})}},{key:"started",get:function(){return this.Qr}},{key:"getMutationQueue",value:function(e,t){return ku.Pt(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new cu(e,this.serializer.ht.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Va.Pt(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.Ur}},{key:"runTransaction",value:function(e,t,n){var r=this;j("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite",u=function(e){return 15===e?Tt:14===e?Et:13===e?_t:12===e?It:11===e?bt:void Y()}(this.ci);return this.Ei.runTransaction(e,a,u,function(a){return i=new St(a,r.qr?r.qr.next():Xe.ae),"readwrite-primary"===t?r.pi(i).next(function(e){return!!e||r.yi(i)}).next(function(t){if(!t)throw Q("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r._i.enqueueRetryable(function(){return r.di(!1)}),new ee($.FAILED_PRECONDITION,Pe);return n(i)}).next(function(e){return r.Si(i).next(function(){return e})}):r.qi(i).next(function(){return n(i)})}).then(function(e){return i.raiseOnCommittedEvent(),e})}},{key:"qi",value:function(e){var t=this;return co(e).get("owner").next(function(e){if(null!==e&&t.vi(e.leaseTimestampMs,5e3)&&!t.xi(e.ownerId)&&!t.bi(e)&&!(t.ui||t.allowTabSynchronization&&e.allowTabSynchronization))throw new ee($.FAILED_PRECONDITION,oo)})}},{key:"Si",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return co(e).put("owner",t)}},{key:"wi",value:function(e){var t=this,n=co(e);return n.get("owner").next(function(e){return t.bi(e)?(j("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Ve.resolve()})}},{key:"vi",value:function(e,t){var n=Date.now();return!(e<n-t||e>n&&(Q("Detected an update time that is in the future: ".concat(e," > ").concat(n)),1))}},{key:"Vi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.hi=function(){e._i.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.Ri()})},this.document.addEventListener("visibilitychange",this.hi),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.hi&&(this.document.removeEventListener("visibilitychange",this.hi),this.hi=null)}},{key:"mi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.li=function(){t.Oi();var e=/(?:Version|Mobile)\/1[456]/;(0,a.isSafari)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t._i.enterRestrictedMode(!0),t._i.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("pagehide",this.li))}},{key:"Bi",value:function(){this.li&&(this.window.removeEventListener("pagehide",this.li),this.li=null)}},{key:"xi",value:function(e){var t;try{var n=null!==(null===(t=this.Ai)||void 0===t?void 0:t.getItem(this.Mi(e)));return j("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Q("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Oi",value:function(){if(this.Ai)try{this.Ai.setItem(this.Mi(this.clientId),String(Date.now()))}catch(e){Q("Failed to set zombie client id.",e)}}},{key:"Li",value:function(){if(this.Ai)try{this.Ai.removeItem(this.Mi(this.clientId))}catch(e){}}},{key:"Mi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return Ue.C()}}]),e}();function co(e){return Ct(e,"owner")}function lo(e){return Ct(e,"clientMetadata")}function fo(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var ho=function(){function e(t,n,r,i){P(this,e),this.targetId=t,this.fromCache=n,this.Qi=r,this.Ki=i}return O(e,null,[{key:"$i",value:function(t,n){var r,i=Nr(),a=Nr(),u=y(n.docChanges);try{for(u.s();!(r=u.n()).done;){var o=r.value;switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}}}catch(s){u.e(s)}finally{u.f()}return new e(t,n.fromCache,i,a)}}]),e}(),vo=function(){function e(){P(this,e),this._documentReadCount=0}return O(e,[{key:"documentReadCount",get:function(){return this._documentReadCount}},{key:"incrementDocumentReadCount",value:function(e){this._documentReadCount+=e}}]),e}(),po=function(){function e(){P(this,e),this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=8}return O(e,[{key:"initialize",value:function(e,t){this.ji=e,this.indexManager=t,this.Ui=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a={result:null};return this.Hi(e,t).next(function(e){a.result=e}).next(function(){if(!a.result)return i.Ji(e,t,r,n).next(function(e){a.result=e})}).next(function(){if(!a.result){var n=new vo;return i.Yi(e,t,n).next(function(r){if(a.result=r,i.Wi)return i.Zi(e,t,n,r.size)})}}).next(function(){return a.result})}},{key:"Zi",value:function(e,t,n,r){return n.documentReadCount<this.Gi?(G()<=i.LogLevel.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",pr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),Ve.resolve()):(G()<=i.LogLevel.DEBUG&&j("QueryEngine","Query:",pr(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.zi*r?(G()<=i.LogLevel.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",pr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cr(t))):Ve.resolve())}},{key:"Hi",value:function(e,t){var n=this;if(ir(t))return Ve.resolve(null);var r=cr(t);return this.indexManager.getIndexType(e,r).next(function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=hr(t,null,"F"),r=cr(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next(function(i){var a=Nr.apply(void 0,S(i));return n.ji.getDocuments(e,a).next(function(i){return n.indexManager.getMinOffset(e,r).next(function(r){var u=n.Xi(t,i);return n.es(t,u,a,r.readTime)?n.Hi(e,hr(t,null,"F")):n.ts(e,u,t,r)})})}))})}},{key:"Ji",value:function(e,t,n,r){var a=this;return ir(t)||r.isEqual(me.min())?Ve.resolve(null):this.ji.getDocuments(e,n).next(function(u){var o=a.Xi(t,u);return a.es(t,o,n,r)?Ve.resolve(null):(G()<=i.LogLevel.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),pr(t)),a.ts(e,o,t,Ae(r,-1)).next(function(e){return e}))})}},{key:"Xi",value:function(e,t){var n=new Lt(gr(e));return t.forEach(function(t,r){yr(e,r)&&(n=n.add(r))}),n}},{key:"es",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Yi",value:function(e,t,n){return G()<=i.LogLevel.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",pr(t)),this.ji.getDocumentsMatchingQuery(e,t,Fe.min(),n)}},{key:"ts",value:function(e,t,n,r){return this.ji.getDocumentsMatchingQuery(e,n,r).next(function(e){return t.forEach(function(t){e=e.insert(t.key,t)}),e})}}]),e}(),yo=function(){function e(t,n,r,i){P(this,e),this.persistence=t,this.ns=n,this.serializer=i,this.rs=new Ft(de),this.ss=new wr(function(e){return Yn(e)},Xn),this.os=new Map,this._s=t.getRemoteDocumentCache(),this.Kr=t.getTargetCache(),this.Ur=t.getBundleCache(),this.us(r)}return O(e,[{key:"us",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qu(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.rs)})}}]),e}();function mo(e,t,n,r){return new yo(e,t,n,r)}function go(e,t){return ko.apply(this,arguments)}function ko(){return(ko=k(m().mark(function e(t,n){var r;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Z(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next(function(i){return t=i,r.us(n),r.mutationQueue.getAllMutationBatches(e)}).next(function(n){var i,a=[],u=[],o=Nr(),s=y(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=y(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;o=o.add(h.key)}}catch(w){f.e(w)}finally{f.f()}}}catch(w){s.e(w)}finally{s.f()}var d,v=y(n);try{for(v.s();!(d=v.n()).done;){var p=d.value;u.push(p.batchId);var m,g=y(p.mutations);try{for(g.s();!(m=g.n()).done;){var k=m.value;o=o.add(k.key)}}catch(w){g.e(w)}finally{g.f()}}}catch(w){v.e(w)}finally{v.f()}return r.localDocuments.getDocuments(e,o).next(function(e){return{cs:e,removedBatchIds:a,addedBatchIds:u}})})});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function wo(e,t){var n=Z(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(e){var r=t.batch.keys(),i=n._s.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),u=Ve.resolve();return a.forEach(function(e){u=u.next(function(){return r.getEntry(t,e)}).next(function(t){var a=n.docVersions.get(e);X(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),u.next(function(){return e.mutationQueue.removeMutationBatch(t,i)})}(n,e,t,i).next(function(){return i.apply(e)}).next(function(){return n.mutationQueue.performConsistencyCheck(e)}).next(function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)}).next(function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Nr(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))}).next(function(){return n.localDocuments.getDocuments(e,r)})})}function xo(e){var t=Z(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.Kr.getLastRemoteSnapshotVersion(e)})}function bo(e,t){var n=Z(e),r=t.snapshotVersion,i=n.rs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(e){var a=n._s.newChangeBuffer({trackRemovals:!0});i=n.rs;var u=[];t.targetChanges.forEach(function(a,o){var s=i.get(o);if(s){u.push(n.Kr.removeMatchingKeys(e,a.removedDocuments,o).next(function(){return n.Kr.addMatchingKeys(e,a.addedDocuments,o)}));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Bt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&u.push(n.Kr.updateTargetData(e,c))}});var o=br(),s=Nr();if(t.documentUpdates.forEach(function(r){t.resolvedLimboDocuments.has(r)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),u.push(Io(e,a,t.documentUpdates).next(function(e){o=e.ls,s=e.hs})),!r.isEqual(me.min())){var c=n.Kr.getLastRemoteSnapshotVersion(e).next(function(t){return n.Kr.setTargetsMetadata(e,e.currentSequenceNumber,r)});u.push(c)}return Ve.waitFor(u).next(function(){return a.apply(e)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(e,o,s)}).next(function(){return o})}).then(function(e){return n.rs=i,e})}function Io(e,t,n){var r=Nr(),i=Nr();return n.forEach(function(e){return r=r.add(e)}),t.getEntries(e,r).next(function(e){var r=br();return n.forEach(function(n,a){var u=e.get(n);a.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(me.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!u.isValidDocument()||a.version.compareTo(u.version)>0||0===a.version.compareTo(u.version)&&u.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):j("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",a.version)}),{ls:r,hs:i}})}function _o(e,t){var n=Z(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)})}function Eo(e,t){var n=Z(e);return n.persistence.runTransaction("Allocate target","readwrite",function(e){var r;return n.Kr.getTargetData(e,t).next(function(i){return i?(r=i,Ve.resolve(r)):n.Kr.allocateTargetId(e).next(function(i){return r=new xa(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Kr.addTargetData(e,r).next(function(){return r})})})}).then(function(e){var r=n.rs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.rs=n.rs.insert(e.targetId,e),n.ss.set(t,e.targetId)),e})}function To(e,t,n){return So.apply(this,arguments)}function So(){return(So=k(m().mark(function e(t,n,r){var i,a,u;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Z(t),a=i.rs.get(n),u=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",u,function(e){return i.persistence.referenceDelegate.removeTarget(e,a)});case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Ge(e.t1)){e.next=12;break}throw e.t1;case 12:j("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.rs=i.rs.remove(n),i.ss.delete(a.target);case 14:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function Co(e,t,n){var r=Z(e),i=me.min(),a=Nr();return r.persistence.runTransaction("Execute query","readwrite",function(e){return function(e,t,n){var r=Z(e),i=r.ss.get(n);return void 0!==i?Ve.resolve(r.rs.get(i)):r.Kr.getTargetData(t,n)}(r,e,cr(t)).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Kr.getMatchingKeysForTargetId(e,t.targetId).next(function(e){a=e})}).next(function(){return r.ns.getDocumentsMatchingQuery(e,t,n?i:me.min(),n?a:Nr())}).next(function(e){return No(r,mr(t),e),{documents:e,Ps:a}})})}function Do(e,t){var n=Z(e),r=Z(n.Kr),i=n.rs.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(e){return r.lt(e,t).next(function(e){return e?e.target:null})})}function Ao(e,t){var n=Z(e),r=n.os.get(t)||me.min();return n.persistence.runTransaction("Get new document changes","readonly",function(e){return n._s.getAllFromCollectionGroup(e,t,Ae(r,-1),Number.MAX_SAFE_INTEGER)}).then(function(e){return No(n,t,e),e})}function No(e,t,n){var r=e.os.get(t)||me.min();n.forEach(function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.os.set(t,r)}function Fo(e,t,n,r){return Ro.apply(this,arguments)}function Ro(){return(Ro=k(m().mark(function e(t,n,r,i){var a,u,o,s,c,l,f,h,d,v;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=Z(t),u=Nr(),o=br(),s=y(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Is(l.metadata.name),l.document&&(u=u.add(f)),(h=n.ds(l)).setReadTime(n.Ts(l.metadata.readTime)),o=o.insert(f,h)}catch(p){s.e(p)}finally{s.f()}return d=a._s.newChangeBuffer({trackRemovals:!0}),e.next=7,Eo(a,function(e){return cr(rr(ke.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return Io(e,d,o).next(function(t){return d.apply(e),t}).next(function(t){return a.Kr.removeMatchingKeysForTargetId(e,v.targetId).next(function(){return a.Kr.addMatchingKeys(e,u,v.targetId)}).next(function(){return a.localDocuments.getLocalViewOfDocuments(e,t.ls,t.hs)}).next(function(){return t.ls})})}));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Po(e,t){return Lo.apply(this,arguments)}function Lo(){return(Lo=k(m().mark(function e(t,n){var r,i,a,u=arguments;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:Nr(),e.next=3,Eo(t,cr(Na(n.bundledQuery)));case 3:return i=e.sent,a=Z(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",function(e){var t=Qi(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ur.saveNamedQuery(e,n);var u=i.withResumeToken(Bt.EMPTY_BYTE_STRING,t);return a.rs=a.rs.insert(u.targetId,u),a.Kr.updateTargetData(e,u).next(function(){return a.Kr.removeMatchingKeysForTargetId(e,i.targetId)}).next(function(){return a.Kr.addMatchingKeys(e,r,i.targetId)}).next(function(){return a.Ur.saveNamedQuery(e,n)})}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Oo(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Mo(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Vo(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var qo=function(){function e(t,n,r,i){P(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return O(e,[{key:"As",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Es",value:function(t,n,r){var i,a=JSON.parse(r),u="object"==R(a)&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==R(a.error));return u&&a.error&&((u="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new ee(a.error.code,a.error.message))),u?new e(t,n,a.state,i):(Q("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Uo=function(){function e(t,n,r){P(this,e),this.targetId=t,this.state=n,this.error=r}return O(e,[{key:"As",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Es",value:function(t,n){var r,i=JSON.parse(n),a="object"==R(i)&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==R(i.error));return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ee(i.error.code,i.error.message))),a?new e(t,i.state,r):(Q("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Bo=function(){function e(t,n){P(this,e),this.clientId=t,this.activeTargetIds=n}return O(e,null,[{key:"Es",value:function(t,n){for(var r=JSON.parse(n),i="object"==R(r)&&r.activeTargetIds instanceof Array,a=Rr(),u=0;i&&u<r.activeTargetIds.length;++u)i=$e(r.activeTargetIds[u]),a=a.add(r.activeTargetIds[u]);return i?new e(t,a):(Q("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),zo=function(){function e(t,n){P(this,e),this.clientId=t,this.onlineState=n}return O(e,null,[{key:"Es",value:function(t){var n=JSON.parse(t);return"object"==R(n)&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Q("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Go=function(){function e(){P(this,e),this.activeTargetIds=Rr()}return O(e,[{key:"Rs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Vs",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"As",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Ko=function(){function e(t,n,r,i,a){P(this,e),this.window=t,this._i=n,this.persistenceKey=r,this.fs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.gs=this.ps.bind(this),this.ys=new Ft(de),this.started=!1,this.ws=[];var u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Ss=Oo(this.persistenceKey,this.fs),this.bs=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ys=this.ys.insert(this.fs,new Go),this.Ds=new RegExp("^firestore_clients_".concat(u,"_([^_]*)$")),this.Cs=new RegExp("^firestore_mutations_".concat(u,"_(\\d+)(?:_(.*))?$")),this.vs=new RegExp("^firestore_targets_".concat(u,"_(\\d+)$")),this.Fs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Ms=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.gs)}return O(e,[{key:"start",value:function(){var e=k(m().mark(function e(){var t,n,r,i,a,u,o,s,c,l,f,h=this;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.ki();case 2:t=e.sent,n=y(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.fs){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Oo(this.persistenceKey,i)))&&(u=Bo.Es(i,a))&&(this.ys=this.ys.insert(u.clientId,u));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.xs(),(o=this.storage.getItem(this.Fs))&&(s=this.Os(o))&&this.Ns(s),c=y(this.ws);try{for(c.s();!(l=c.n()).done;)f=l.value,this.ps(f)}catch(d){c.e(d)}finally{c.f()}this.ws=[],this.window.addEventListener("pagehide",function(){return h.shutdown()}),this.started=!0;case 28:case"end":return e.stop()}},e,this,[[4,16,19,22]])}));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.bs,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Bs(this.ys)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ys.forEach(function(n,r){r.activeTargetIds.has(e)&&(t=!0)}),t}},{key:"addPendingMutation",value:function(e){this.Ls(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ls(e,t,n),this.ks(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Vo(this.persistenceKey,e));if(n){var r=Uo.Es(e,n);r&&(t=r.state)}}return this.qs.Rs(e),this.xs(),t}},{key:"removeLocalQueryTarget",value:function(e){this.qs.Vs(e),this.xs()}},{key:"isLocalQueryTarget",value:function(e){return this.qs.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Vo(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Qs(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach(function(e){r.ks(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})}},{key:"setOnlineState",value:function(e){this.Ks(e)}},{key:"notifyBundleLoaded",value:function(e){this.$s(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.gs),this.removeItem(this.Ss),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return j("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){j("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){j("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ps",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(j("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ss)return void Q("Received WebStorage notification for local change. Another client might have garbage-collected our state");this._i.enqueueRetryable(k(m().mark(function e(){var r,i,a,u,o,s,c;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Ds.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Us(n.key),e.abrupt("return",t.Ws(r,null));case 6:if(!(i=t.Gs(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Ws(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Cs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.zs(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.js(a));case 16:e.next=41;break;case 18:if(!t.vs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(u=t.Hs(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Js(u));case 23:e.next=41;break;case 25:if(n.key!==t.Fs){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(o=t.Os(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ns(o));case 30:e.next=41;break;case 32:if(n.key!==t.bs){e.next=37;break}(s=function(e){var t=Xe.ae;if(null!=e)try{var n=JSON.parse(e);X("number"==typeof n),t=n}catch(e){Q("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==Xe.ae&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.Ms){e.next=41;break}return c=t.Ys(n.newValue),e.next=41,Promise.all(c.map(function(e){return t.syncEngine.Zs(e)}));case 41:e.next=44;break;case 43:t.ws.push(n);case 44:case"end":return e.stop()}},e)})))}}},{key:"qs",get:function(){return this.ys.get(this.fs)}},{key:"xs",value:function(){this.setItem(this.Ss,this.qs.As())}},{key:"Ls",value:function(e,t,n){var r=new qo(this.currentUser,e,t,n),i=Mo(this.persistenceKey,this.currentUser,e);this.setItem(i,r.As())}},{key:"ks",value:function(e){var t=Mo(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Ks",value:function(e){var t={clientId:this.fs,onlineState:e};this.storage.setItem(this.Fs,JSON.stringify(t))}},{key:"Qs",value:function(e,t,n){var r=Vo(this.persistenceKey,e),i=new Uo(e,t,n);this.setItem(r,i.As())}},{key:"$s",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Ms,t)}},{key:"Us",value:function(e){var t=this.Ds.exec(e);return t?t[1]:null}},{key:"Gs",value:function(e,t){var n=this.Us(e);return Bo.Es(n,t)}},{key:"zs",value:function(e,t){var n=this.Cs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return qo.Es(new U(i),r,t)}},{key:"Hs",value:function(e,t){var n=this.vs.exec(e),r=Number(n[1]);return Uo.Es(r,t)}},{key:"Os",value:function(e){return zo.Es(e)}},{key:"Ys",value:function(e){return JSON.parse(e)}},{key:"js",value:function(){var e=k(m().mark(function e(t){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Xs(t.batchId,t.state,t.error));case 2:j("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"Js",value:function(e){return this.syncEngine.eo(e.targetId,e.state,e.error)}},{key:"Ws",value:function(e,t){var n=this,r=t?this.ys.insert(e,t):this.ys.remove(e),i=this.Bs(this.ys),a=this.Bs(r),u=[],o=[];return a.forEach(function(e){i.has(e)||u.push(e)}),i.forEach(function(e){a.has(e)||o.push(e)}),this.syncEngine.no(u,o).then(function(){n.ys=r})}},{key:"Ns",value:function(e){this.ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Bs",value:function(e){var t=Rr();return e.forEach(function(e,n){t=t.unionWith(n.activeTargetIds)}),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),jo=function(){function e(){P(this,e),this.ro=new Go,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return O(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.ro.Rs(e),this.io[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.io[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.ro.Vs(e)}},{key:"isLocalQueryTarget",value:function(e){return this.ro.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.io[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.ro.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.ro.activeTargetIds.has(e)}},{key:"start",value:function(){return this.ro=new Go,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Qo=function(){function e(){P(this,e)}return O(e,[{key:"so",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Wo=function(){function e(){var t=this;P(this,e),this.oo=function(){return t._o()},this.ao=function(){return t.uo()},this.co=[],this.lo()}return O(e,[{key:"so",value:function(e){this.co.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}},{key:"lo",value:function(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}},{key:"_o",value:function(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=y(this.co);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"uo",value:function(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=y(this.co);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Ho=null;function Yo(){return null===Ho?Ho=268435456+Math.round(2147483648*Math.random()):Ho++,"0x"+Ho.toString(16)}var Xo={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Jo=function(){function e(t){P(this,e),this.ho=t.ho,this.Po=t.Po}return O(e,[{key:"Io",value:function(e){this.To=e}},{key:"Eo",value:function(e){this.Ao=e}},{key:"onMessage",value:function(e){this.Ro=e}},{key:"close",value:function(){this.Po()}},{key:"send",value:function(e){this.ho(e)}},{key:"Vo",value:function(){this.To()}},{key:"mo",value:function(e){this.Ao(e)}},{key:"fo",value:function(e){this.Ro(e)}}]),e}(),Zo="WebChannelConnection",$o=function(e){w(n,function(){function e(t){P(this,e);this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo="projects/".concat(r,"/databases/").concat(i),this.wo="(default)"===this.databaseId.database?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}O(e,[{key:"So",get:function e(){return!1}},{key:"bo",value:function e(t,n,r,i,a){var u=Yo(),o=this.Do(t,n);j("RestConnection","Sending RPC '".concat(t,"' ").concat(u,":"),o,r);var s={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(s,i,a),this.vo(t,o,s,r).then(function(e){return j("RestConnection","Received RPC '".concat(t,"' ").concat(u,": "),e),e},function(e){throw W("RestConnection","RPC '".concat(t,"' ").concat(u," failed with error: "),e,"url: ",o,"request:",r),e})}},{key:"Fo",value:function e(t,n,r,i,a,u){return this.bo(t,n,r,i,a)}},{key:"Co",value:function e(t,n,r){t["X-Goog-Api-Client"]=function e(){return"gl-js/ fire/"+B}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(function(e,n){return t[n]=e}),r&&r.headers.forEach(function(e,n){return t[n]=e})}},{key:"Do",value:function e(t,n){var r=Xo[t];return"".concat(this.po,"/v1/").concat(n,":").concat(r)}}]);return e}());var t=b(n);function n(e){var r;return P(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return O(n,[{key:"vo",value:function(e,t,n,r){var i=Yo();return new Promise(function(a,o){var s=new u.XhrIo;s.setWithCredentials(!0),s.listenOnce(u.EventType.COMPLETE,function(){try{switch(s.getLastErrorCode()){case u.ErrorCode.NO_ERROR:var t=s.getResponseJson();j(Zo,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case u.ErrorCode.TIMEOUT:j(Zo,"RPC '".concat(e,"' ").concat(i," timed out")),o(new ee($.DEADLINE_EXCEEDED,"Request time out"));break;case u.ErrorCode.HTTP_ERROR:var n=s.getStatus();if(j(Zo,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var c=null==r?void 0:r.error;if(c&&c.status&&c.message){var l=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(t)>=0?t:$.UNKNOWN}(c.status);o(new ee(l,c.message))}else o(new ee($.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new ee($.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{j(Zo,"RPC '".concat(e,"' ").concat(i," completed."))}});var c=JSON.stringify(r);j(Zo,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",c,n,15)})}},{key:"Mo",value:function(e,t,n){var r=Yo(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=(0,u.createWebChannelTransport)(),o=(0,u.getStatEventTarget)(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Co(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var l=i.join("");j(Zo,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),s);var f=a.createWebChannel(l,s),h=!1,d=!1,v=new Jo({ho:function(t){d?j(Zo,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(j(Zo,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),f.open(),h=!0),j(Zo,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),f.send(t))},Po:function(){return f.close()}}),p=function(e,t,n){e.listen(t,function(e){try{n(e)}catch(e){setTimeout(function(){throw e},0)}})};return p(f,u.WebChannel.EventType.OPEN,function(){d||j(Zo,"RPC '".concat(e,"' stream ").concat(r," transport opened."))}),p(f,u.WebChannel.EventType.CLOSE,function(){d||(d=!0,j(Zo,"RPC '".concat(e,"' stream ").concat(r," transport closed")),v.mo())}),p(f,u.WebChannel.EventType.ERROR,function(t){d||(d=!0,W(Zo,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),v.mo(new ee($.UNAVAILABLE,"The operation could not be completed")))}),p(f,u.WebChannel.EventType.MESSAGE,function(t){var n;if(!d){var i=t.data[0];X(!!i);var a=i,u=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(u){j(Zo,"RPC '".concat(e,"' stream ").concat(r," received error:"),u);var o=u.status,s=function(e){var t=fi[e];if(void 0!==t)return xi(t)}(o),c=u.message;void 0===s&&(s=$.INTERNAL,c="Unknown error status: "+o+" with message "+u.message),d=!0,v.mo(new ee(s,c)),f.close()}else j(Zo,"RPC '".concat(e,"' stream ").concat(r," received:"),i),v.fo(i)}}),p(o,u.Event.STAT_EVENT,function(t){t.stat===u.Stat.PROXY?j(Zo,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===u.Stat.NOPROXY&&j(Zo,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(function(){v.Vo()},0),v}}]),n}();function es(){return"undefined"!=typeof window?window:null}function ts(){return"undefined"!=typeof document?document:null}function ns(e){return new Bi(e,!0)}var rs=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;P(this,e),this._i=t,this.timerId=n,this.xo=r,this.Oo=i,this.No=a,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}return O(e,[{key:"reset",value:function(){this.Bo=0}},{key:"qo",value:function(){this.Bo=this.No}},{key:"Qo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Bo+this.Ko()),r=Math.max(0,Date.now()-this.ko),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Bo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Lo=this._i.enqueueAfterDelay(this.timerId,i,function(){return t.ko=Date.now(),e()}),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}},{key:"$o",value:function(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}},{key:"cancel",value:function(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"Ko",value:function(){return(Math.random()-.5)*this.Bo}}]),e}(),is=function(){function e(t,n,r,i,a,u,o,s){P(this,e),this._i=t,this.Uo=r,this.Wo=i,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=o,this.listener=s,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new rs(t,n)}return O(e,[{key:"Jo",value:function(){return 1===this.state||5===this.state||this.Yo()}},{key:"Yo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Zo()}},{key:"stop",value:function(){var e=k(m().mark(function e(){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Jo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Xo",value:function(){this.state=0,this.Ho.reset()}},{key:"e_",value:function(){var e=this;this.Yo()&&null===this.zo&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,function(){return e.t_()}))}},{key:"n_",value:function(e){this.r_(),this.stream.send(e)}},{key:"t_",value:function(){var e=k(m().mark(function e(){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Yo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"r_",value:function(){this.zo&&(this.zo.cancel(),this.zo=null)}},{key:"i_",value:function(){this.jo&&(this.jo.cancel(),this.jo=null)}},{key:"close",value:function(){var e=k(m().mark(function e(t,n){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.r_(),this.i_(),this.Ho.cancel(),this.Go++,4!==t?this.Ho.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Q(n.toString()),Q("Using maximum backoff delay to prevent overloading the backend."),this.Ho.qo()):n&&n.code===$.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.s_(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Eo(n);case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"s_",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.o_(this.Go),n=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(function(t){var r=c(t,2),i=r[0],a=r[1];e.Go===n&&e.__(i,a)},function(n){t(function(){var t=new ee($.UNKNOWN,"Fetching auth token failed: "+n.message);return e.a_(t)})})}},{key:"__",value:function(e,t){var n=this,r=this.o_(this.Go);this.stream=this.u_(e,t),this.stream.Io(function(){r(function(){return n.state=2,n.jo=n._i.enqueueAfterDelay(n.Wo,1e4,function(){return n.Yo()&&(n.state=3),Promise.resolve()}),n.listener.Io()})}),this.stream.Eo(function(e){r(function(){return n.a_(e)})}),this.stream.onMessage(function(e){r(function(){return n.onMessage(e)})})}},{key:"Zo",value:function(){var e=this;this.state=5,this.Ho.Qo(k(m().mark(function t(){return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}},t)})))}},{key:"a_",value:function(e){return j("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"o_",value:function(e){var t=this;return function(n){t._i.enqueueAndForget(function(){return t.Go===e?n():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}}}]),e}(),as=function(e){w(n,is);var t=b(n);function n(e,r,i,a,u,o){var s;return P(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,o)).serializer=u,s}return O(n,[{key:"u_",value:function(e,t){return this.connection.Mo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Ho.reset();var t=ia(this.serializer,e),n=function(e){if(!("targetChange"in e))return me.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?me.min():t.readTime?Qi(t.readTime):me.min()}(e);return this.listener.c_(t,n)}},{key:"l_",value:function(e){var t={};t.database=$i(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=Jn(r)?{documents:sa(e,r)}:{query:ca(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ki(e,t.resumeToken);var i=zi(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(me.min())>0){n.readTime=Gi(e,t.snapshotVersion.toTimestamp());var a=zi(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=fa(this.serializer,e);n&&(t.labels=n),this.n_(t)}},{key:"h_",value:function(e){var t={};t.database=$i(this.serializer),t.removeTarget=e,this.n_(t)}}]),n}(),us=function(e){w(n,is);var t=b(n);function n(e,r,i,a,u,o){var s;return P(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,o)).serializer=u,s.P_=!1,s}return O(n,[{key:"I_",get:function(){return this.P_}},{key:"start",value:function(){this.P_=!1,this.lastStreamToken=void 0,o(T(n.prototype),"start",this).call(this)}},{key:"s_",value:function(){this.P_&&this.d_([])}},{key:"u_",value:function(e,t){return this.connection.Mo("Write",e,t)}},{key:"onMessage",value:function(e){if(X(!!e.streamToken),this.lastStreamToken=e.streamToken,this.P_){this.Ho.reset();var t=oa(e.writeResults,e.commitTime),n=Qi(e.commitTime);return this.listener.T_(n,t)}return X(!e.writeResults||0===e.writeResults.length),this.P_=!0,this.listener.E_()}},{key:"A_",value:function(){var e={};e.database=$i(this.serializer),this.n_(e)}},{key:"d_",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map(function(e){return aa(t.serializer,e)})};this.n_(n)}}]),n}(),os=function(e){w(n,O(function e(){P(this,e)}));var t=b(n);function n(e,r,i,a){var u;return P(this,n),(u=t.call(this)).authCredentials=e,u.appCheckCredentials=r,u.connection=i,u.serializer=a,u.R_=!1,u}return O(n,[{key:"V_",value:function(){if(this.R_)throw new ee($.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"bo",value:function(e,t,n){var r=this;return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(function(i){var a=c(i,2),u=a[0],o=a[1];return r.connection.bo(e,t,n,u,o)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===$.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new ee($.UNKNOWN,e.toString())})}},{key:"Fo",value:function(e,t,n,r){var i=this;return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(function(a){var u=c(a,2),o=u[0],s=u[1];return i.connection.Fo(e,t,n,o,s,r)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===$.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new ee($.UNKNOWN,e.toString())})}},{key:"terminate",value:function(){this.R_=!0}}]),n}();function ss(e,t,n){return cs.apply(this,arguments)}function cs(){return(cs=k(m().mark(function e(t,n,r){var i,a,u,o,s,c,l,f;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Z(t),u=function(e,t,n){var r=ca(e,t),i={},a=[],u=0;return n.forEach(function(e){var t="aggregate_"+u++;i[t]=e.alias,"count"===e.Ee?a.push({alias:t,count:{}}):"avg"===e.Ee?a.push({alias:t,avg:{field:ya(e.fieldPath)}}):"sum"===e.Ee&&a.push({alias:t,sum:{field:ya(e.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:r.structuredQuery},parent:r.parent},m_:i}}(a.serializer,function(e){var t=Z(e);return t.de||(t.de=lr(t,e.explicitOrderBy)),t.de}(n),r),o=u.request,s=u.m_,c=o.parent,a.connection.So||delete o.parent,e.next=4,a.Fo("RunAggregationQuery",c,o,1);case 4:return X(1===(l=e.sent.filter(function(e){return!!e.result})).length),f=null===(i=l[0].result)||void 0===i?void 0:i.aggregateFields,e.abrupt("return",Object.keys(f).reduce(function(e,t){return e[s[t]]=f[t],e},{}));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ls=function(){function e(t,n){P(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}return O(e,[{key:"y_",value:function(){var e=this;0===this.f_&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.g_=null,e.S_("Backend didn't respond within 10 seconds."),e.w_("Offline"),Promise.resolve()}))}},{key:"b_",value:function(e){"Online"===this.state?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.w_("Offline")))}},{key:"set",value:function(e){this.D_(),this.f_=0,"Online"===e&&(this.p_=!1),this.w_(e)}},{key:"w_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"S_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.p_?(Q(t),this.p_=!1):j("OnlineStateTracker",t)}},{key:"D_",value:function(){null!==this.g_&&(this.g_.cancel(),this.g_=null)}}]),e}(),fs=O(function e(t,n,r,i,a){var u=this;P(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=a,this.x_.so(function(e){r.enqueueAndForget(k(m().mark(function e(){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=bs(u),!e.t0){e.next=5;break}return j("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=k(m().mark(function e(t){var n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Z(t)).F_.add(4),e.next=4,vs(n);case 4:return n.O_.set("Unknown"),n.F_.delete(4),e.next=8,hs(n);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(u);case 5:case"end":return e.stop()}},e)})))}),this.O_=new ls(r,i)});function hs(e){return ds.apply(this,arguments)}function ds(){return(ds=k(m().mark(function e(t){var n,r,i;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!bs(t)){e.next=18;break}n=y(t.M_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[2,12,15,18]])}))).apply(this,arguments)}function vs(e){return ps.apply(this,arguments)}function ps(){return(ps=k(m().mark(function e(t){var n,r,i;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=y(t.M_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[1,11,14,17]])}))).apply(this,arguments)}function ys(e,t){var n=Z(e);n.v_.has(t.targetId)||(n.v_.set(t.targetId,t),xs(n)?ws(n):Js(n).Yo()&&gs(n,t))}function ms(e,t){var n=Z(e),r=Js(n);n.v_.delete(t),r.Yo()&&ks(n,t),0===n.v_.size&&(r.Yo()?r.e_():bs(n)&&n.O_.set("Unknown"))}function gs(e,t){if(e.N_.Le(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(me.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Js(e).l_(t)}function ks(e,t){e.N_.Le(t),Js(e).h_(t)}function ws(e){e.N_=new Li({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.v_.get(t)||null},st:function(){return e.datastore.serializer.databaseId}}),Js(e).start(),e.O_.y_()}function xs(e){return bs(e)&&!Js(e).Jo()&&e.v_.size>0}function bs(e){return 0===Z(e).F_.size}function Is(e){e.N_=void 0}function _s(e){return Es.apply(this,arguments)}function Es(){return(Es=k(m().mark(function e(t){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.v_.forEach(function(e,n){gs(t,e)});case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ts(e,t){return Ss.apply(this,arguments)}function Ss(){return(Ss=k(m().mark(function e(t,n){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Is(t),xs(t)?(t.O_.b_(n),ws(t)):t.O_.set("Unknown");case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Cs(e,t,n){return Ds.apply(this,arguments)}function Ds(){return(Ds=k(m().mark(function e(t,n,r){var i;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.O_.set("Online"),!(n instanceof Ri&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=k(m().mark(function e(t,n){var r,i,a,u;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=y(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(u=a.value,e.t0=t.v_.has(u),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(u,r);case 10:t.v_.delete(u),t.N_.removeTarget(u);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[2,16,19,22]])}));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),j("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,As(t,e.t0);case 11:e.next=29;break;case 13:if(n instanceof Ni?t.N_.Ge(n):n instanceof Fi?t.N_.Xe(n):t.N_.He(n),r.isEqual(me.min())){e.next=29;break}return e.prev=14,e.next=17,xo(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.N_._t(t);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.v_.get(r);i&&e.v_.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(function(t,n){var r=e.v_.get(t);if(r){e.v_.set(t,r.withResumeToken(Bt.EMPTY_BYTE_STRING,r.snapshotVersion)),ks(e,t);var i=new xa(r.target,t,n,r.sequenceNumber);gs(e,i)}}),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 22:e.next=29;break;case 24:return e.prev=24,e.t2=e.catch(14),j("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,As(t,e.t2);case 29:case"end":return e.stop()}},e,null,[[1,6],[14,24]])}))).apply(this,arguments)}function As(e,t,n){return Ns.apply(this,arguments)}function Ns(){return(Ns=k(m().mark(function e(t,n,r){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Ge(n)){e.next=2;break}throw n;case 2:return t.F_.add(1),e.next=5,vs(t);case 5:t.O_.set("Offline"),r||(r=function(){return xo(t.localStore)}),t.asyncQueue.enqueueRetryable(k(m().mark(function e(){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return j("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.F_.delete(1),e.next=6,hs(t);case 6:case"end":return e.stop()}},e)})));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Fs(e,t){return t().catch(function(n){return As(e,n,t)})}function Rs(e){return Ps.apply(this,arguments)}function Ps(){return(Ps=k(m().mark(function e(t){var n,r,i,a;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=Z(t),r=Zs(n),i=n.C_.length>0?n.C_[n.C_.length-1].batchId:-1;case 2:if(!Ls(n)){e.next=19;break}return e.prev=3,e.next=6,_o(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.C_.length&&r.e_(),e.abrupt("break",19);case 10:i=a.batchId,Os(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,As(n,e.t0);case 17:e.next=2;break;case 19:Ms(n)&&Vs(n);case 20:case"end":return e.stop()}},e,null,[[3,13]])}))).apply(this,arguments)}function Ls(e){return bs(e)&&e.C_.length<10}function Os(e,t){e.C_.push(t);var n=Zs(e);n.Yo()&&n.I_&&n.d_(t.mutations)}function Ms(e){return bs(e)&&!Zs(e).Jo()&&e.C_.length>0}function Vs(e){Zs(e).start()}function qs(e){return Us.apply(this,arguments)}function Us(){return(Us=k(m().mark(function e(t){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Zs(t).A_();case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Bs(e){return zs.apply(this,arguments)}function zs(){return(zs=k(m().mark(function e(t){var n,r,i,a;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=Zs(t),r=y(t.C_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.d_(a.mutations)}catch(u){r.e(u)}finally{r.f()}case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Gs(e,t,n){return Ks.apply(this,arguments)}function Ks(){return(Ks=k(m().mark(function e(t,n,r){var i,a;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.C_.shift(),a=yi.from(i,n,r),e.next=3,Fs(t,function(){return t.remoteSyncer.applySuccessfulWrite(a)});case 3:return e.next=5,Rs(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function js(e,t){return Qs.apply(this,arguments)}function Qs(){return(Qs=k(m().mark(function e(t,n){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Zs(t).I_,!e.t0){e.next=4;break}return e.next=4,function(){var e=k(m().mark(function e(t,n){var r;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return wi(e)&&e!==$.ABORTED}(n.code)){e.next=7;break}return r=t.C_.shift(),Zs(t).Xo(),e.next=5,Fs(t,function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)});case 5:return e.next=7,Rs(t);case 7:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Ms(t)&&Vs(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ws(e,t){return Hs.apply(this,arguments)}function Hs(){return(Hs=k(m().mark(function e(t,n){var r,i;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Z(t)).asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials"),i=bs(r),r.F_.add(3),e.next=6,vs(r);case 6:return i&&r.O_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.F_.delete(3),e.next=12,hs(r);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ys(e,t){return Xs.apply(this,arguments)}function Xs(){return(Xs=k(m().mark(function e(t,n){var r;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Z(t),!n){e.next=7;break}return r.F_.delete(2),e.next=5,hs(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.F_.add(2),e.next=12,vs(r);case 12:r.O_.set("Unknown");case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Js(e){return e.B_||(e.B_=function(e,t,n){var r=Z(e);return r.V_(),new as(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Io:_s.bind(null,e),Eo:Ts.bind(null,e),c_:Cs.bind(null,e)}),e.M_.push(function(){var t=k(m().mark(function t(n){return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.B_.Xo(),xs(e)?ws(e):e.O_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.B_.stop();case 6:Is(e);case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())),e.B_}function Zs(e){return e.L_||(e.L_=function(e,t,n){var r=Z(e);return r.V_(),new us(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Io:qs.bind(null,e),Eo:js.bind(null,e),E_:Bs.bind(null,e),T_:Gs.bind(null,e)}),e.M_.push(function(){var t=k(m().mark(function t(n){return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.L_.Xo(),t.next=4,Rs(e);case 4:t.next=9;break;case 6:return t.next=8,e.L_.stop();case 8:e.C_.length>0&&(j("RemoteStore","Stopping write stream with ".concat(e.C_.length," pending writes")),e.C_=[]);case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())),e.L_}var $s=function(){function e(t,n,r,i,a){P(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new te,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return O(e,[{key:"promise",get:function(){return this.deferred.promise}},{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ee($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)})}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var u=new e(t,n,Date.now()+r,i,a);return u.start(r),u}}]),e}();function ec(e,t){if(Q("AsyncQueue","".concat(t,": ").concat(e)),Ge(e))return new ee($.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var tc=function(){function e(t){P(this,e),this.comparator=t?function(e,n){return t(e,n)||be.comparator(e.key,n.key)}:function(e,t){return be.comparator(e.key,t.key)},this.keyedMap=_r(),this.sortedSet=new Ft(this.comparator)}return O(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),nc=function(){function e(){P(this,e),this.k_=new Ft(be.comparator)}return O(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.k_.get(t);n?0!==e.type&&3===n.type?this.k_=this.k_.insert(t,e):3===e.type&&1!==n.type?this.k_=this.k_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.k_=this.k_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.k_=this.k_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.k_=this.k_.remove(t):1===e.type&&2===n.type?this.k_=this.k_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.k_=this.k_.insert(t,{type:2,doc:e.doc}):Y():this.k_=this.k_.insert(t,e)}},{key:"q_",value:function(){var e=[];return this.k_.inorderTraversal(function(t,n){e.push(n)}),e}}]),e}(),rc=function(){function e(t,n,r,i,a,u,o,s,c){P(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=o,this.excludesMetadataChanges=s,this.hasCachedResults=c}return O(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dr(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var u=[];return n.forEach(function(e){u.push({type:0,doc:e})}),new e(t,n,tc.emptySet(n),u,r,i,!0,!1,a)}}]),e}(),ic=O(function e(){P(this,e),this.Q_=void 0,this.listeners=[]}),ac=O(function e(){P(this,e),this.queries=new wr(function(e){return vr(e)},dr),this.onlineState="Unknown",this.K_=new Set});function uc(e,t){return oc.apply(this,arguments)}function oc(){return(oc=k(m().mark(function e(t,n){var r,i,a,u,o;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Z(t),i=n.query,a=!1,(u=r.queries.get(i))||(a=!0,u=new ic),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:u.Q_=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),o=ec(e.t0,"Initialization of query '".concat(pr(n.query),"' failed")),e.abrupt("return",void n.onError(o));case 13:r.queries.set(i,u),u.listeners.push(n),n.U_(r.onlineState),u.Q_&&n.W_(u.Q_)&&hc(r);case 14:case"end":return e.stop()}},e,null,[[3,9]])}))).apply(this,arguments)}function sc(e,t){return cc.apply(this,arguments)}function cc(){return(cc=k(m().mark(function e(t,n){var r,i,a,u,o;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Z(t),i=n.query,a=!1,(u=r.queries.get(i))&&(o=u.listeners.indexOf(n))>=0&&(u.listeners.splice(o,1),a=0===u.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function lc(e,t){var n,r=Z(e),i=!1,a=y(t);try{for(a.s();!(n=a.n()).done;){var u=n.value,o=u.query,s=r.queries.get(o);if(s){var c,l=y(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.W_(u)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Q_=u}}}catch(f){a.e(f)}finally{a.f()}i&&hc(r)}function fc(e,t,n){var r=Z(e),i=r.queries.get(t);if(i){var a,u=y(i.listeners);try{for(u.s();!(a=u.n()).done;){a.value.onError(n)}}catch(o){u.e(o)}finally{u.f()}}r.queries.delete(t)}function hc(e){e.K_.forEach(function(e){e.next()})}var dc=function(){function e(t,n,r){P(this,e),this.query=t,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}return O(e,[{key:"W_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=y(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(u){r.e(u)}finally{r.f()}e=new rc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.z_?this.H_(e)&&(this.G_.next(e),a=!0):this.J_(e,this.onlineState)&&(this.Y_(e),a=!0),this.j_=e,a}},{key:"onError",value:function(e){this.G_.error(e)}},{key:"U_",value:function(e){this.onlineState=e;var t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}},{key:"J_",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"H_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Y_",value:function(e){e=rc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}]),e}(),vc=function(){function e(t,n){P(this,e),this.X_=t,this.byteLength=n}return O(e,[{key:"ea",value:function(){return"metadata"in this.X_}}]),e}(),pc=function(){function e(t){P(this,e),this.serializer=t}return O(e,[{key:"Is",value:function(e){return Xi(this.serializer,e)}},{key:"ds",value:function(e){return e.metadata.exists?na(this.serializer,e.document,!1):bn.newNoDocument(this.Is(e.metadata.name),this.Ts(e.metadata.readTime))}},{key:"Ts",value:function(e){return Qi(e)}}]),e}(),yc=function(){function e(t,n,r){P(this,e),this.ta=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mc(t)}return O(e,[{key:"na",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;var n=ke.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ra",value:function(e){var t,n=new Map,r=new pc(this.serializer),i=y(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var u,o=r.Is(a.metadata.name),s=y(a.metadata.queries);try{for(s.s();!(u=s.n()).done;){var c=u.value,l=(n.get(c)||Nr()).add(o);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=k(m().mark(function e(){var t,n,r,i,a;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fo(this.localStore,new pc(this.serializer),this.documents,this.ta.id);case 2:t=e.sent,n=this.ra(this.documents),r=y(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Po(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:t}));case 22:case"end":return e.stop()}},e,this,[[5,15,18,21]])}));return function(){return e.apply(this,arguments)}}()}]),e}();function mc(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var gc=O(function e(t){P(this,e),this.key=t}),kc=O(function e(t){P(this,e),this.key=t}),wc=function(){function e(t,n){P(this,e),this.query=t,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Nr(),this.mutatedKeys=Nr(),this.ua=gr(t),this.ca=new tc(this.ua)}return O(e,[{key:"la",get:function(){return this.oa}},{key:"ha",value:function(e,t){var n=this,r=t?t.Pa:new nc,i=t?t.ca:this.ca,a=t?t.mutatedKeys:this.mutatedKeys,u=i,o=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(function(e,t){var l=i.get(e),f=yr(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),v=!0):n.Ia(l,f)||(r.track({type:2,doc:f}),v=!0,(s&&n.ua(f,s)>0||c&&n.ua(f,c)<0)&&(o=!0)):!l&&f?(r.track({type:0,doc:f}),v=!0):l&&!f&&(r.track({type:1,doc:l}),v=!0,(s||c)&&(o=!0)),v&&(f?(u=u.add(f),a=d?a.add(e):a.delete(e)):(u=u.delete(e),a=a.delete(e)))}),null!==this.query.limit)for(;u.size>this.query.limit;){var l="F"===this.query.limitType?u.last():u.first();u=u.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ca:u,Pa:r,es:o,mutatedKeys:a}}},{key:"Ia",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;var a=e.Pa.q_();a.sort(function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return n(e)-n(t)}(e.type,t.type)||r.ua(e.doc,t.doc)}),this.da(n);var u=t?this.Ta():[],o=0===this.aa.size&&this.current?1:0,s=o!==this._a;return this._a=o,0!==a.length||s?{snapshot:new rc(this.query,e.ca,i,a,e.mutatedKeys,0===o,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ea:u}:{Ea:u}}},{key:"U_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new nc,mutatedKeys:this.mutatedKeys,es:!1},!1)):{Ea:[]}}},{key:"Aa",value:function(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}},{key:"da",value:function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t.oa=t.oa.add(e)}),e.modifiedDocuments.forEach(function(e){}),e.removedDocuments.forEach(function(e){return t.oa=t.oa.delete(e)}),this.current=e.current)}},{key:"Ta",value:function(){var e=this;if(!this.current)return[];var t=this.aa;this.aa=Nr(),this.ca.forEach(function(t){e.Aa(t.key)&&(e.aa=e.aa.add(t.key))});var n=[];return t.forEach(function(t){e.aa.has(t)||n.push(new kc(t))}),this.aa.forEach(function(e){t.has(e)||n.push(new gc(e))}),n}},{key:"Ra",value:function(e){this.oa=e.Ps,this.aa=Nr();var t=this.ha(e.documents);return this.applyChanges(t,!0)}},{key:"Va",value:function(){return rc.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}]),e}(),xc=O(function e(t,n,r){P(this,e),this.query=t,this.targetId=n,this.view=r}),bc=O(function e(t){P(this,e),this.key=t,this.ma=!1}),Ic=function(){function e(t,n,r,i,a,u){P(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.fa={},this.ga=new wr(function(e){return vr(e)},dr),this.pa=new Map,this.ya=new Set,this.wa=new Ft(be.comparator),this.Sa=new Map,this.ba=new Yu,this.Da={},this.Ca=new Map,this.va=_u.Ln(),this.onlineState="Unknown",this.Fa=void 0}return O(e,[{key:"isPrimaryClient",get:function(){return!0===this.Fa}}]),e}();function _c(e,t){return Ec.apply(this,arguments)}function Ec(){return(Ec=k(m().mark(function e(t,n){var r,i,a,u,o,s;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ml(t),!(u=r.ga.get(n))){e.next=6;break}i=u.targetId,r.sharedClientState.addLocalQueryTarget(i),a=u.view.Va(),e.next=15;break;case 6:return e.next=8,Eo(r.localStore,cr(n));case 8:return o=e.sent,s=r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.targetId,e.next=13,Tc(r,n,i,"current"===s,o.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&ys(r.remoteStore,o);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Tc(e,t,n,r,i){return Sc.apply(this,arguments)}function Sc(){return(Sc=k(m().mark(function e(t,n,r,i,a){var u,o,s,c,l,f;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.Ma=function(e,n,r){return function(){var e=k(m().mark(function e(t,n,r,i){var a,u,o;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.ha(r),e.t0=a.es,!e.t0){e.next=6;break}return e.next=5,Co(t.localStore,n.query,!1).then(function(e){var t=e.documents;return n.view.ha(t,a)});case 5:a=e.sent;case 6:return u=i&&i.targetChanges.get(n.targetId),o=n.view.applyChanges(a,t.isPrimaryClient,u),e.abrupt("return",(Wc(t,n.targetId,o.Ea),o.snapshot));case 8:case"end":return e.stop()}},e)}));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Co(t.localStore,n,!0);case 3:return u=e.sent,o=new wc(n,u.Ps),s=o.ha(u.documents),c=Ai.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=o.applyChanges(s,t.isPrimaryClient,c),Wc(t,r,l.Ea),f=new xc(n,r,o),e.abrupt("return",(t.ga.set(n,f),t.pa.has(r)?t.pa.get(r).push(n):t.pa.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Cc(e,t){return Dc.apply(this,arguments)}function Dc(){return(Dc=k(m().mark(function e(t,n){var r,i,a;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Z(t),i=r.ga.get(n),!((a=r.pa.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.pa.set(i.targetId,a.filter(function(e){return!dr(e,n)})),void r.ga.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,To(r.localStore,i.targetId,!1).then(function(){r.sharedClientState.clearQueryState(i.targetId),ms(r.remoteStore,i.targetId),jc(r,i.targetId)}).catch(Oe);case 9:e.next=14;break;case 11:return jc(r,i.targetId),e.next=14,To(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ac(e,t,n){return Nc.apply(this,arguments)}function Nc(){return(Nc=k(m().mark(function e(t,n,r){var i,a,u;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=gl(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Z(e),a=ye.now(),u=t.reduce(function(e,t){return e.add(t.key)},Nr());return i.persistence.runTransaction("Locally write mutations","readwrite",function(e){var o=br(),s=Nr();return i._s.getEntries(e,u).next(function(e){(o=e).forEach(function(e,t){t.isValidDocument()||(s=s.add(e))})}).next(function(){return i.localDocuments.getOverlayedDocuments(e,o)}).next(function(r){n=r;var u,o=[],s=y(t);try{for(s.s();!(u=s.n()).done;){var c=u.value,l=ii(c,n.get(c.key).overlayedDocument);null!=l&&o.push(new oi(c.key,l,xn(l.value.mapValue),Zr.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,o,t)}).next(function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)})}).then(function(){return{batchId:r.batchId,changes:Er(n)}})}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Da[e.currentUser.toKey()];r||(r=new Ft(de)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Xc(i,a.changes);case 9:return e.next=11,Rs(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),u=ec(e.t0,"Failed to persist write"),r.reject(u);case 17:case"end":return e.stop()}},e,null,[[1,13]])}))).apply(this,arguments)}function Fc(e,t){return Rc.apply(this,arguments)}function Rc(){return(Rc=k(m().mark(function e(t,n){var r,i;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Z(t),e.prev=1,e.next=4,bo(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach(function(e,t){var n=r.Sa.get(t);n&&(X(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ma=!0:e.modifiedDocuments.size>0?X(n.ma):e.removedDocuments.size>0&&(X(n.ma),n.ma=!1))}),e.next=8,Xc(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Oe(e.t0);case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function Pc(e,t,n){var r=Z(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ga.forEach(function(e,n){var r=n.view.U_(t);r.snapshot&&i.push(r.snapshot)}),function(e,t){var n=Z(e);n.onlineState=t;var r=!1;n.queries.forEach(function(e,n){var i,a=y(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.U_(t)&&(r=!0)}}catch(u){a.e(u)}finally{a.f()}}),r&&hc(n)}(r.eventManager,t),i.length&&r.fa.c_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Lc(e,t,n){return Oc.apply(this,arguments)}function Oc(){return(Oc=k(m().mark(function e(t,n,r){var i,a,u,o,s,c;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Z(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Sa.get(n),!(u=a&&a.key)){e.next=14;break}return o=(o=new Ft(be.comparator)).insert(u,bn.newNoDocument(u,me.min())),s=Nr().add(u),c=new Di(me.min(),new Map,new Ft(de),o,s),e.next=9,Fc(i,c);case 9:i.wa=i.wa.remove(u),i.Sa.delete(n),Yc(i),e.next=16;break;case 14:return e.next=16,To(i.localStore,n,!1).then(function(){return jc(i,n,r)}).catch(Oe);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Mc(e,t){return Vc.apply(this,arguments)}function Vc(){return(Vc=k(m().mark(function e(t,n){var r,i,a;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Z(t),i=n.batch.batchId,e.prev=1,e.next=4,wo(r.localStore,n);case 4:return a=e.sent,Kc(r,i,null),Gc(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Xc(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Oe(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function qc(e,t,n){return Uc.apply(this,arguments)}function Uc(){return(Uc=k(m().mark(function e(t,n,r){var i,a;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Z(t),e.prev=1,e.next=4,function(e,t){var n=Z(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next(function(t){return X(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)}).next(function(){return n.mutationQueue.performConsistencyCheck(e)}).next(function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)}).next(function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)}).next(function(){return n.localDocuments.getDocuments(e,r)})})}(i.localStore,n);case 4:return a=e.sent,Kc(i,n,r),Gc(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Xc(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Oe(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function Bc(e,t){return zc.apply(this,arguments)}function zc(){return(zc=k(m().mark(function e(t,n){var r,i,a,u;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return bs((r=Z(t)).remoteStore)||j("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Z(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)})}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ca.get(i)||[]).push(n),r.Ca.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),u=ec(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(u);case 16:case"end":return e.stop()}},e,null,[[2,12]])}))).apply(this,arguments)}function Gc(e,t){(e.Ca.get(t)||[]).forEach(function(e){e.resolve()}),e.Ca.delete(t)}function Kc(e,t,n){var r=Z(e),i=r.Da[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function jc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=y(e.pa.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ga.delete(a),n&&e.fa.xa(a,n)}}catch(u){i.e(u)}finally{i.f()}e.pa.delete(t),e.isPrimaryClient&&e.ba.mr(t).forEach(function(t){e.ba.containsKey(t)||Qc(e,t)})}function Qc(e,t){e.ya.delete(t.path.canonicalString());var n=e.wa.get(t);null!==n&&(ms(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),Yc(e))}function Wc(e,t,n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof gc?(e.ba.addReference(a.key,t),Hc(e,a)):a instanceof kc?(j("SyncEngine","Document no longer in limbo: "+a.key),e.ba.removeReference(a.key,t),e.ba.containsKey(a.key)||Qc(e,a.key)):Y()}}catch(u){i.e(u)}finally{i.f()}}function Hc(e,t){var n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(j("SyncEngine","New document in limbo: "+n),e.ya.add(r),Yc(e))}function Yc(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){var t=e.ya.values().next().value;e.ya.delete(t);var n=new be(ke.fromString(t)),r=e.va.next();e.Sa.set(r,new bc(n)),e.wa=e.wa.insert(n,r),ys(e.remoteStore,new xa(cr(rr(n.path)),r,"TargetPurposeLimboResolution",Xe.ae))}}function Xc(e,t,n){return Jc.apply(this,arguments)}function Jc(){return(Jc=k(m().mark(function e(t,n,r){var i,a,u,o;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Z(t),a=[],u=[],o=[],e.t0=i.ga.isEmpty(),e.t0){e.next=9;break}return i.ga.forEach(function(e,t){o.push(i.Ma(t,n,r).then(function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=ho.$i(t.targetId,e);u.push(n)}}))}),e.next=6,Promise.all(o);case 6:return i.fa.c_(a),e.next=9,function(){var e=k(m().mark(function e(t,n){var r,i,a,u,o,s,c,l;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Z(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(e){return Ve.forEach(n,function(t){return Ve.forEach(t.Qi,function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)}).next(function(){return Ve.forEach(t.Ki,function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)})})})});case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Ge(e.t0)){e.next=10;break}throw e.t0;case 10:j("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=y(n);try{for(i.s();!(a=i.n()).done;)u=a.value,o=u.targetId,u.fromCache||(s=r.rs.get(o),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.rs=r.rs.insert(o,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}},e,null,[[1,6]])}));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,u);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Zc(e,t){return $c.apply(this,arguments)}function $c(){return($c=k(m().mark(function e(t,n){var r,i;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Z(t)).currentUser.isEqual(n)){e.next=11;break}return j("SyncEngine","User change. New user:",n.toKey()),e.next=5,go(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ca.forEach(function(e){e.forEach(function(e){e.reject(new ee($.CANCELLED,t))})}),e.Ca.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Xc(r,i.cs);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function el(e,t){var n=Z(e),r=n.Sa.get(t);if(r&&r.ma)return Nr().add(r.key);var i=Nr(),a=n.pa.get(t);if(!a)return i;var u,o=y(a);try{for(o.s();!(u=o.n()).done;){var s=u.value,c=n.ga.get(s);i=i.unionWith(c.view.la)}}catch(l){o.e(l)}finally{o.f()}return i}function tl(e,t){return nl.apply(this,arguments)}function nl(){return(nl=k(m().mark(function e(t,n){var r,i,a;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Z(t),e.next=3,Co(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ra(i),e.abrupt("return",(r.isPrimaryClient&&Wc(r,n.targetId,a.Ea),a));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rl(e,t){return il.apply(this,arguments)}function il(){return(il=k(m().mark(function e(t,n){var r;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Z(t),e.abrupt("return",Ao(r.localStore,n).then(function(e){return Xc(r,e)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function al(e,t,n,r){return ul.apply(this,arguments)}function ul(){return(ul=k(m().mark(function e(t,n,r,i){var a,u;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Z(t),e.next=3,function(e,t){var n=Z(e),r=Z(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return r.Fn(e,t).next(function(t){return t?n.localDocuments.getDocuments(e,t):Ve.resolve(null)})})}(a.localStore,n);case 3:if(null===(u=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Rs(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Kc(a,n,i||null),Gc(a,n),function(e,t){Z(Z(e).mutationQueue).xn(t)}(a.localStore,n)):Y();case 11:return e.next=13,Xc(a,u);case 13:e.next=16;break;case 15:j("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ol(e,t){return sl.apply(this,arguments)}function sl(){return(sl=k(m().mark(function e(t,n){var r,i,a,u,o,s,c,l;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ml(r=Z(t)),gl(r),!0!==n||!0===r.Fa){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,cl(r,i.toArray());case 5:return a=e.sent,r.Fa=!0,e.next=9,Ys(r.remoteStore,!0);case 9:u=y(a);try{for(u.s();!(o=u.n()).done;)s=o.value,ys(r.remoteStore,s)}catch(f){u.e(f)}finally{u.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Fa){e.next=25;break}return c=[],l=Promise.resolve(),r.pa.forEach(function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then(function(){return jc(r,t),To(r.localStore,t,!0)}),ms(r.remoteStore,t)}),e.next=19,l;case 19:return e.next=21,cl(r,c);case 21:return function(e){var t=Z(e);t.Sa.forEach(function(e,n){ms(t.remoteStore,n)}),t.ba.gr(),t.Sa=new Map,t.wa=new Ft(be.comparator)}(r),r.Fa=!1,e.next=25,Ys(r.remoteStore,!1);case 25:case"end":return e.stop()}},e)}))).apply(this,arguments)}function cl(e,t,n){return ll.apply(this,arguments)}function ll(){return(ll=k(m().mark(function e(t,n,r){var i,a,u,o,s,c,l,f,h,d,v,p,g,k;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=Z(t),a=[],u=[],o=y(n),e.prev=2,o.s();case 4:if((s=o.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.pa.get(c))||0===f.length){e.next=34;break}return e.next=11,Eo(i.localStore,cr(f[0]));case 11:l=e.sent,h=y(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return v=d.value,p=i.ga.get(v),e.next=20,tl(i,p);case 20:(g=e.sent).snapshot&&u.push(g.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Do(i.localStore,c);case 36:return k=e.sent,e.next=39,Eo(i.localStore,k);case 39:return l=e.sent,e.next=42,Tc(i,fl(k),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),o.e(e.t1);case 50:return e.prev=50,o.f(),e.finish(50);case 53:return e.abrupt("return",(i.fa.c_(u),a));case 54:case"end":return e.stop()}},e,null,[[2,47,50,53],[13,26,29,32]])}))).apply(this,arguments)}function fl(e){return nr(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function hl(e){return function(e){return Z(Z(e).persistence).ki()}(Z(e).localStore)}function dl(e,t,n,r){return vl.apply(this,arguments)}function vl(){return(vl=k(m().mark(function e(t,n,r,i){var a,u,o,s;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Z(t)).Fa){e.next=3;break}return e.abrupt("return",void j("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((u=a.pa.get(n))&&u.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0?8:"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Ao(a.localStore,mr(u[0]));case 10:return o=e.sent,s=Di.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Bt.EMPTY_BYTE_STRING),e.next=14,Xc(a,o,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,To(a.localStore,n,!0);case 17:return jc(a,n,i),e.abrupt("break",20);case 19:Y();case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pl(e,t,n){return yl.apply(this,arguments)}function yl(){return(yl=k(m().mark(function e(t,n,r){var i,a,u,o,s,c,l,f,h;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=ml(t)).Fa){e.next=45;break}a=y(n),e.prev=3,a.s();case 5:if((u=a.n()).done){e.next=21;break}if(o=u.value,!i.pa.has(o)){e.next=10;break}return j("SyncEngine","Adding an already active target "+o),e.abrupt("continue",19);case 10:return e.next=12,Do(i.localStore,o);case 12:return s=e.sent,e.next=15,Eo(i.localStore,s);case 15:return c=e.sent,e.next=18,Tc(i,fl(s),c.targetId,!1,c.resumeToken);case 18:ys(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=y(r),e.prev=30,h=m().mark(function e(){var t;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.pa.has(t),!e.t0){e.next=5;break}return e.next=5,To(i.localStore,t,!1).then(function(){ms(i.remoteStore,t),jc(i,t)}).catch(Oe);case 5:case"end":return e.stop()}},e)}),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}},e,null,[[3,23,26,29],[30,39,42,45]])}))).apply(this,arguments)}function ml(e){var t=Z(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Fc.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=el.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Lc.bind(null,t),t.fa.c_=lc.bind(null,t.eventManager),t.fa.xa=fc.bind(null,t.eventManager),t}function gl(e){var t=Z(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Mc.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=qc.bind(null,t),t}function kl(e,t,n){var r=Z(e);(function(){var e=k(m().mark(function e(t,n,r){var i,a,u,o,s;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Z(e),r=Qi(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(e){return n.Ur.getBundleMetadata(e,t.id)}).then(function(e){return!!e&&e.createTime.compareTo(r)>=0})}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(mc(i)),a=new yc(i,t.localStore,n.serializer),e.next=15,n.Oa();case 15:u=e.sent;case 16:if(!u){e.next=26;break}return e.next=19,a.na(u);case 19:return(o=e.sent)&&r._updateProgress(o),e.next=23,n.Oa();case 23:u=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Xc(t,s.sa,void 0);case 31:return e.next=33,function(e,t){var n=Z(e);return n.persistence.runTransaction("Save bundle","readwrite",function(e){return n.Ur.saveBundleMetadata(e,t)})}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.ia));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(W("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}},e,null,[[0,37]])}));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then(function(e){r.sharedClientState.notifyBundleLoaded(e)})}var wl=function(){function e(){P(this,e),this.synchronizeTabs=!1}return O(e,[{key:"initialize",value:function(){var e=k(m().mark(function e(t){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=ns(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return mo(this.persistence,new po,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new to(ro.Jr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new jo}},{key:"terminate",value:function(){var e=k(m().mark(function e(){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),xl=function(e){w(n,wl);var t=b(n);function n(e){var r;return P(this,n),(r=t.call(this)).cacheSizeBytes=e,r}return O(n,[{key:"createGarbageCollectionScheduler",value:function(e,t){X(this.persistence.referenceDelegate instanceof io);var n=this.persistence.referenceDelegate.garbageCollector;return new Nu(n,e.asyncQueue,t)}},{key:"createPersistence",value:function(e){var t=void 0!==this.cacheSizeBytes?yu.withCacheSize(this.cacheSizeBytes):yu.DEFAULT;return new to(function(e){return io.Jr(e,t)},this.serializer)}}]),n}(),bl=function(e){w(n,wl);var t=b(n);function n(e,r,i){var a;return P(this,n),(a=t.call(this)).Na=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return O(n,[{key:"initialize",value:function(){var e=k(m().mark(function e(t){var r=this;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(T(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Na.initialize(this,t);case 4:return e.next=6,gl(this.Na.syncEngine);case 6:return e.next=8,Rs(this.Na.remoteStore);case 8:return e.next=10,this.persistence.gi(function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return mo(this.persistence,new po,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Nu(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new Ye(t,this.persistence);return new He(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=fo(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?yu.withCacheSize(this.cacheSizeBytes):yu.DEFAULT;return new so(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,es(),ts(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new jo}}]),n}(),Il=function(e){w(n,bl);var t=b(n);function n(e,r){var i;return P(this,n),(i=t.call(this,e,r,!1)).Na=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return O(n,[{key:"initialize",value:function(){var e=k(m().mark(function e(t){var r,i=this;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(T(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Na.syncEngine,e.t0=this.sharedClientState instanceof Ko,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Xs:al.bind(null,r),eo:dl.bind(null,r),no:pl.bind(null,r),ki:hl.bind(null,r),Zs:rl.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.gi(function(){var e=k(m().mark(function e(t){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ol(i.Na.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=es();if(!Ko.C(t))throw new ee($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=fo(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ko(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(),_l=function(){function e(){P(this,e)}return O(e,[{key:"initialize",value:function(){var e=k(m().mark(function e(t,n){var r=this;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Pc(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Zc.bind(null,this.syncEngine),e.next=12,Ys(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new ac}},{key:"createDatastore",value:function(e){var t=ns(e.databaseInfo.databaseId),n=function(e){return new $o(e)}(e.databaseInfo);return function(e,t,n,r){return new os(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new fs(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,function(e){return Pc(t.syncEngine,e,0)},Wo.C()?new Wo:new Qo)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,u){var o=new Ic(e,t,n,r,i,a);return u&&(o.Fa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=k(m().mark(function e(t){var n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Z(t),j("RemoteStore","RemoteStore shutting down."),n.F_.add(5),e.next=5,vs(n);case 5:n.x_.shutdown(),n.O_.set("Unknown");case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function El(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return k(m().mark(function r(){var i;return m().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}},r)}))()},cancel:function(){return k(m().mark(function e(){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()},releaseLock:function(){},closed:Promise.resolve()}}var Tl=function(){function e(t){P(this,e),this.observer=t,this.muted=!1}return O(e,[{key:"next",value:function(e){this.observer.next&&this.Ba(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ba(this.observer.error,e):Q("Uncaught Error in snapshot listener:",e.toString())}},{key:"La",value:function(){this.muted=!0}},{key:"Ba",value:function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)}}]),e}(),Sl=function(){function e(t,n){var r=this;P(this,e),this.ka=t,this.serializer=n,this.metadata=new te,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then(function(e){e&&e.ea()?r.metadata.resolve(e.X_.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.X_))))},function(e){return r.metadata.reject(e)})}return O(e,[{key:"close",value:function(){return this.ka.cancel()}},{key:"getMetadata",value:function(){var e=k(m().mark(function e(){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Oa",value:function(){var e=k(m().mark(function e(){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Qa());case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Qa",value:function(){var e=k(m().mark(function e(){var t,n,r,i;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ka();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.qa.decode(t),r=Number(n),isNaN(r)&&this.$a("length string (".concat(n,") is not valid number")),e.next=9,this.Ua(r);case 9:return i=e.sent,e.abrupt("return",new vc(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(){return this.buffer.findIndex(function(e){return e==="{".charCodeAt(0)})}},{key:"Ka",value:function(){var e=k(m().mark(function e(){var t,n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Wa()<0)){e.next=7;break}return e.next=3,this.Ga();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Wa())<0&&this.$a("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Ua",value:function(){var e=k(m().mark(function e(t){var n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ga();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.$a("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.qa.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"$a",value:function(e){throw this.ka.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ga",value:function(){var e=k(m().mark(function e(){var t,n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ka.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),Cl=function(){function e(t){P(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return O(e,[{key:"lookup",value:function(){var e=k(m().mark(function e(t){var n,r=this;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new ee($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=k(m().mark(function e(t,n){var r,i,a,u,o,s;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Z(t),i=$i(r.serializer)+"/documents",a={documents:n.map(function(e){return Yi(r.serializer,e)})},e.next=5,r.Fo("BatchGetDocuments",i,a,n.length);case 5:return u=e.sent,o=new Map,u.forEach(function(e){var t=ra(r.serializer,e);o.set(t.key.toString(),t)}),s=[],e.abrupt("return",(n.forEach(function(e){var t=o.get(e.toString());X(!!t),s.push(t)}),s));case 10:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach(function(e){return r.recordVersion(e)}),n));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new di(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=k(m().mark(function e(){var t,n=this;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(e,t){var r=be.fromPath(t);n.mutations.push(new vi(r,n.precondition(r)))}),e.next=7,function(){var e=k(m().mark(function e(t,n){var r,i,a;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Z(t),i=$i(r.serializer)+"/documents",a={writes:n.map(function(e){return aa(r.serializer,e)})},e.next=3,r.bo("Commit",i,a);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Y();t=me.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new ee($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(me.min())?Zr.exists(!1):Zr.updateTime(t):Zr.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(me.min()))throw new ee($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zr.updateTime(t)}return Zr.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Dl=function(){function e(t,n,r,i,a){P(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.za=r.maxAttempts,this.Ho=new rs(this.asyncQueue,"transaction_retry")}return O(e,[{key:"run",value:function(){this.za-=1,this.ja()}},{key:"ja",value:function(){var e=this;this.Ho.Qo(k(m().mark(function t(){var n,r;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=new Cl(e.datastore),(r=e.Ha(n))&&r.then(function(t){e.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){e.deferred.resolve(t)}).catch(function(t){e.Ja(t)})})}).catch(function(t){e.Ja(t)});case 2:case"end":return t.stop()}},t)})))}},{key:"Ha",value:function(e){try{var t=this.updateFunction(e);return!Je(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ja",value:function(e){var t=this;this.za>0&&this.Ya(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(function(){return t.ja(),Promise.resolve()})):this.deferred.reject(e)}},{key:"Ya",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!wi(t)}return!1}}]),e}(),Al=function(){function e(t,n,r,i){var a=this;P(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=U.UNAUTHENTICATED,this.clientId=he.V(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=k(m().mark(function e(t){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return j("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,function(e){return j("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)})}return O(e,[{key:"getConfiguration",value:function(){var e=k(m().mark(function e(){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new ee($.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new te;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(k(m().mark(function n(){var r;return m().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=ec(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}},n,null,[[0,14]])}))),t.promise}}]),e}();function Nl(e,t){return Fl.apply(this,arguments)}function Fl(){return(Fl=k(m().mark(function e(t,n){var r,i;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=k(m().mark(function e(t){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,go(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t._offlineComponents=n;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Rl(e,t){return Pl.apply(this,arguments)}function Pl(){return(Pl=k(m().mark(function e(t,n){var r,i;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Ol(t);case 3:return r=e.sent,j("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener(function(e){return Ws(n.remoteStore,e)}),t.setAppCheckTokenChangeListener(function(e,t){return Ws(n.remoteStore,t)}),t._onlineComponents=n;case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ll(e){return"FirebaseError"===e.name?e.code===$.FAILED_PRECONDITION||e.code===$.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function Ol(e){return Ml.apply(this,arguments)}function Ml(){return(Ml=k(m().mark(function e(t){var n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return j("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,Nl(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),Ll(n=e.t0)){e.next=13;break}throw n;case 13:return W("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,Nl(t,new wl);case 16:e.next=21;break;case 18:return j("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,Nl(t,new wl);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}},e,null,[[3,8]])}))).apply(this,arguments)}function Vl(e){return ql.apply(this,arguments)}function ql(){return(ql=k(m().mark(function e(t){return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return j("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,Rl(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return j("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,Rl(t,new _l);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ul(e){return Ol(e).then(function(e){return e.persistence})}function Bl(e){return Ol(e).then(function(e){return e.localStore})}function zl(e){return Vl(e).then(function(e){return e.remoteStore})}function Gl(e){return Vl(e).then(function(e){return e.syncEngine})}function Kl(e){return Vl(e).then(function(e){return e.datastore})}function jl(e){return Ql.apply(this,arguments)}function Ql(){return(Ql=k(m().mark(function e(t){var n,r;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vl(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=_c.bind(null,n.syncEngine),r.onUnlisten=Cc.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Wl(e){return e.asyncQueue.enqueue(k(m().mark(function t(){var n,r;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ul(e);case 2:return n=t.sent,t.next=5,zl(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Z(e);return t.F_.delete(0),hs(t)}(r)));case 7:case"end":return t.stop()}},t)})))}function Hl(e){return e.asyncQueue.enqueue(k(m().mark(function t(){var n,r;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ul(e);case 2:return n=t.sent,t.next=5,zl(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=k(m().mark(function e(t){var n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Z(t)).F_.add(0),e.next=4,vs(n);case 4:n.O_.set("Offline");case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}},t)})))}function Yl(e,t){var n=new te;return e.asyncQueue.enqueueAndForget(k(m().mark(function r(){return m().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=k(m().mark(function e(t,n,r){var i,a;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Z(e);return n.persistence.runTransaction("read document","readonly",function(e){return n.localDocuments.getDocument(e,t)})}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new ee($.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=ec(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Bl(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}function Xl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new te;return e.asyncQueue.enqueueAndForget(k(m().mark(function i(){return m().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Tl({next:function(a){t.enqueueAndForget(function(){return sc(e,u)});var o=a.docs.has(n);!o&&a.fromCache?i.reject(new ee($.UNAVAILABLE,"Failed to get document because the client is offline.")):o&&a.fromCache&&r&&"server"===r.source?i.reject(new ee($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),u=new dc(rr(n.path),a,{includeMetadataChanges:!0,Z_:!0});return uc(e,u)},i.next=3,jl(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}},i)}))),r.promise}function Jl(e,t){var n=new te;return e.asyncQueue.enqueueAndForget(k(m().mark(function r(){return m().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=k(m().mark(function e(t,n,r){var i,a,u,o,s;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Co(t,n,!0);case 3:i=e.sent,a=new wc(n,i.Ps),u=a.ha(i.documents),o=a.applyChanges(u,!1),r.resolve(o.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=ec(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Bl(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}function Zl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new te;return e.asyncQueue.enqueueAndForget(k(m().mark(function i(){return m().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Tl({next:function(n){t.enqueueAndForget(function(){return sc(e,u)}),n.fromCache&&"server"===r.source?i.reject(new ee($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),u=new dc(n,a,{includeMetadataChanges:!0,Z_:!0});return uc(e,u)},i.next=3,jl(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}},i)}))),r.promise}function $l(e,t){var n=new Tl(t);return e.asyncQueue.enqueueAndForget(k(m().mark(function t(){return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Z(e).K_.add(t),t.next()},t.next=3,jl(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)}))),function(){n.La(),e.asyncQueue.enqueueAndForget(k(m().mark(function t(){return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Z(e).K_.delete(t)},t.next=3,jl(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)})))}}function ef(e,t,n,r){var i=function(e,t){return function(e,t){return new Sl(e,t)}(function(e,t){if(e instanceof Uint8Array)return El(e,t);if(e instanceof ArrayBuffer)return El(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?Ii().encode(e):e),t)}(n,ns(t));e.asyncQueue.enqueueAndForget(k(m().mark(function t(){return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=kl,t.next=3,Gl(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}},t)})))}function tf(e,t){return e.asyncQueue.enqueue(k(m().mark(function n(){return m().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Z(e);return n.persistence.runTransaction("Get named query","readonly",function(e){return n.Ur.getNamedQuery(e,t)})},n.next=3,Bl(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}},n)})))}function nf(e,t){return e.asyncQueue.enqueue(k(m().mark(function n(){return m().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(){var e=k(m().mark(function e(t,n){var r,i,a;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Z(t),i=r.indexManager,a=[],e.abrupt("return",r.persistence.runTransaction("Configure indexes","readwrite",function(e){return i.getFieldIndexes(e).next(function(t){return function(e,t,n,r,i){e=S(e),t=S(t),e.sort(n),t.sort(n);for(var a=e.length,u=t.length,o=0,s=0;o<u&&s<a;){var c=n(e[s],t[o]);c<0?i(e[s++]):c>0?r(t[o++]):(o++,s++)}for(;o<u;)r(t[o++]);for(;s<a;)i(e[s++])}(t,n,Te,function(t){a.push(i.addFieldIndex(e,t))},function(t){a.push(i.deleteFieldIndex(e,t))})}).next(function(){return Ve.waitFor(a)})}));case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n.next=3,Bl(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}},n)})))}function rf(e,t){return e.asyncQueue.enqueue(k(m().mark(function n(){return m().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){Z(e).ns.Wi=t},n.next=3,Bl(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}},n)})))}function af(e){return e.asyncQueue.enqueue(k(m().mark(function t(){return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e){var t=Z(e),n=t.indexManager;return t.persistence.runTransaction("Delete All Indexes","readwrite",function(e){return n.deleteAllFieldIndexes(e)})},t.next=3,Bl(e);case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}},t)})))}function uf(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var of=new Map;function sf(e,t,n){if(!n)throw new ee($.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function cf(e,t,n,r){if(!0===t&&!0===r)throw new ee($.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function lf(e){if(!be.isDocumentKey(e))throw new ee($.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ff(e){if(be.isDocumentKey(e))throw new ee($.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function hf(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==R(e)){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Y()}function df(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ee($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=hf(e);throw new ee($.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function vf(e,t){if(t<=0)throw new ee($.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var pf=function(){function e(t){var n,r;if(P(this,e),void 0===t.host){if(void 0!==t.ssl)throw new ee($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ee($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}cf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uf(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ee($.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new ee($.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new ee($.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return O(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),yf=function(){function e(t,n,r,i){P(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pf({}),this._settingsFrozen=!1}return O(e,[{key:"app",get:function(){if(!this._app)throw new ee($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new ee($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pf(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new re;switch(e.type){case"firstParty":return new oe(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ee($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return e=this,(t=of.get(e))&&(j("ComponentProvider","Removing Datastore"),of.delete(e),t.terminate()),Promise.resolve();var e,t}}]),e}();function mf(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=(e=df(e,yf))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==u.host&&u.host!==o&&W("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},u),{host:o,ssl:!1})),i.mockUserToken){var s,c;if("string"==typeof i.mockUserToken)s=i.mockUserToken,c=U.MOCK_USER;else{s=(0,a.createMockUserToken)(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new ee($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new U(l)}e._authCredentials=new ie(new ne(s,c))}}var gf=exports.Query=function(){function e(t,n,r){P(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return O(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),kf=exports.DocumentReference=function(){function e(t,n,r){P(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return O(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new wf(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),wf=exports.CollectionReference=function(e){w(n,gf);var t=b(n);function n(e,r,i){var a;return P(this,n),(a=t.call(this,e,r,rr(i)))._path=i,a.type="collection",a}return O(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new kf(this.firestore,null,new be(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}();function xf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,a.getModularInstance)(e),sf("collection","path",t),e instanceof yf){var u=ke.fromString.apply(ke,[t].concat(r));return ff(u),new wf(e,null,u)}if(!(e instanceof kf||e instanceof wf))throw new ee($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ke.fromString.apply(ke,[t].concat(r)));return ff(o),new wf(e.firestore,null,o)}function bf(e,t){if(e=df(e,yf),sf("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ee($.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new gf(e,null,function(e){return new tr(ke.emptyPath(),e)}(t))}function If(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,a.getModularInstance)(e),1===arguments.length&&(t=he.V()),sf("doc","path",t),e instanceof yf){var u=ke.fromString.apply(ke,[t].concat(r));return lf(u),new kf(e,null,new be(u))}if(!(e instanceof kf||e instanceof wf))throw new ee($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ke.fromString.apply(ke,[t].concat(r)));return lf(o),new kf(e.firestore,e instanceof wf?e.converter:null,new be(o))}function _f(e,t){return e=(0,a.getModularInstance)(e),t=(0,a.getModularInstance)(t),(e instanceof kf||e instanceof wf)&&(t instanceof kf||t instanceof wf)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Ef(e,t){return e=(0,a.getModularInstance)(e),t=(0,a.getModularInstance)(t),e instanceof gf&&t instanceof gf&&e.firestore===t.firestore&&dr(e._query,t._query)&&e.converter===t.converter}var Tf=function(){function e(){var t=this;P(this,e),this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new rs(this,"async_queue_retry"),this.ou=function(){var e=ts();e&&j("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Ho.$o()};var n=ts();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.ou)}return O(e,[{key:"isShuttingDown",get:function(){return this.eu}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this._u(),this.au(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.eu){this.eu=!0,this.iu=e||!1;var t=ts();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ou)}}},{key:"enqueue",value:function(e){var t=this;if(this._u(),this.eu)return new Promise(function(){});var n=new te;return this.au(function(){return t.eu&&t.iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget(function(){return t.Xa.push(e),t.uu()})}},{key:"uu",value:function(){var e=k(m().mark(function e(){var t=this;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Xa.length){e.next=14;break}return e.prev=1,e.next=4,this.Xa[0]();case 4:this.Xa.shift(),this.Ho.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Ge(e.t0)){e.next=12;break}throw e.t0;case 12:j("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Xa.length>0&&this.Ho.Qo(function(){return t.uu()});case 14:case"end":return e.stop()}},e,this,[[1,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"au",value:function(e){var t=this,n=this.Za.then(function(){return t.ru=!0,e().catch(function(e){throw t.nu=e,t.ru=!1,Q("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(function(e){return t.ru=!1,e})});return this.Za=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this._u(),this.su.indexOf(e)>-1&&(t=0);var i=$s.createAndSchedule(this,e,t,n,function(e){return r.cu(e)});return this.tu.push(i),i}},{key:"_u",value:function(){this.nu&&Y()}},{key:"verifyOperationInProgress",value:function(){}},{key:"lu",value:function(){var e=k(m().mark(function e(){var t;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Za,e.next=3,t;case 3:if(t!==this.Za){e.next=0;break}case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"hu",value:function(e){var t,n=y(this.tu);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Pu",value:function(e){var t=this;return this.lu().then(function(){t.tu.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});var n,r=y(t.tu);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.lu()})}},{key:"Iu",value:function(e){this.su.push(e)}},{key:"cu",value:function(e){var t=this.tu.indexOf(e);this.tu.splice(t,1)}}]),e}();function Sf(e){return function(e,t){if("object"!=R(e)||null===e)return!1;var n,r=e,i=y(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(u){i.e(u)}finally{i.f()}return!1}(e,["next","error","complete"])}var Cf=exports.LoadBundleTask=function(){function e(){P(this,e),this._progressObserver={},this._taskCompletionResolver=new te,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return O(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Df=exports.CACHE_SIZE_UNLIMITED=-1,Af=exports.Firestore=function(e){w(n,yf);var t=b(n);function n(e,r,i,a){var u;return P(this,n),(u=t.call(this,e,r,i,a)).type="firestore",u._queue=new Tf,u._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",u}return O(n,[{key:"_terminate",value:function(){return this._firestoreClient||Pf(this),this._firestoreClient.terminate()}}]),n}();function Nf(e,t,r){r||(r="(default)");var i=(0,n._getProvider)(e,"firestore");if(i.isInitialized(r)){var u=i.getImmediate({identifier:r}),o=i.getOptions(r);if((0,a.deepEqual)(o,t))return u;throw new ee($.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new ee($.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ee($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return i.initialize({options:t,instanceIdentifier:r})}function Ff(e,t){var r="object"==R(e)?e:(0,n.getApp)(),i="string"==typeof e?e:t||"(default)",u=(0,n._getProvider)(r,"firestore").getImmediate({identifier:i});if(!u._initialized){var o=(0,a.getDefaultEmulatorHostnameAndPort)("firestore");o&&mf.apply(void 0,[u].concat(S(o)))}return u}function Rf(e){return e._firestoreClient||Pf(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Pf(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Yt(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,uf(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Al(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Lf(e,t){jf(e=df(e,Af));var n=Rf(e);if(n._uninitializedComponentsProvider)throw new ee($.FAILED_PRECONDITION,"SDK cache is already specified.");W("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new _l;return Mf(n,i,new bl(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}function Of(e){jf(e=df(e,Af));var t=Rf(e);if(t._uninitializedComponentsProvider)throw new ee($.FAILED_PRECONDITION,"SDK cache is already specified.");W("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new _l;return Mf(t,r,new Il(r,n.cacheSizeBytes))}function Mf(e,t,n){var r=new te;return e.asyncQueue.enqueue(k(m().mark(function i(){var a;return m().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Nl(e,n);case 3:return i.next=5,Rl(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),Ll(a=i.t0)){i.next=13;break}throw a;case 13:W("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}},i,null,[[0,8]])}))).then(function(){return r.promise})}function Vf(e){if(e._initialized&&!e._terminated)throw new ee($.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new te;return e._queue.enqueueAndForgetEvenWhileRestricted(k(m().mark(function n(){return m().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=k(m().mark(function e(t){var n;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Ue.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Ue.delete(n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(fo(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}},n,null,[[0,6]])}))),t.promise}function qf(e){return function(e){var t=new te;return e.asyncQueue.enqueueAndForget(k(m().mark(function n(){return m().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Bc,n.next=3,Gl(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}},n)}))),t.promise}(Rf(e=df(e,Af)))}function Uf(e){return Wl(Rf(e=df(e,Af)))}function Bf(e){return Hl(Rf(e=df(e,Af)))}function zf(e){return(0,n._removeServiceInstance)(e.app,"firestore",e._databaseId.database),e._delete()}function Gf(e,t){var n=Rf(e=df(e,Af)),r=new Cf;return ef(n,e._databaseId,t,r),r}function Kf(e,t){return tf(Rf(e=df(e,Af)),t).then(function(t){return t?new gf(e,null,t.query):null})}function jf(e){if(e._initialized||e._terminated)throw new ee($.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Qf=exports.AggregateField=O(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"count",n=arguments.length>1?arguments[1]:void 0;P(this,e),this._aggregateType=t,this._internalFieldPath=n,this.type="AggregateField"}),Wf=exports.AggregateQuerySnapshot=function(){function e(t,n,r){P(this,e),this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=t}return O(e,[{key:"data",value:function(){return this._userDataWriter.convertObjectMap(this._data)}}]),e}(),Hf=exports.Bytes=function(){function e(t){P(this,e),this._byteString=t}return O(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Bt.fromBase64String(t))}catch(t){throw new ee($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Bt.fromUint8Array(t))}}]),e}(),Yf=exports.FieldPath=function(){function e(){P(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new ee($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xe(n)}return O(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();function Xf(){return new Yf("__name__")}var Jf=exports.FieldValue=O(function e(t){P(this,e),this._methodName=t}),Zf=exports.GeoPoint=function(){function e(t,n){if(P(this,e),!isFinite(t)||t<-90||t>90)throw new ee($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ee($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return O(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return de(this._lat,e._lat)||de(this._long,e._long)}}]),e}(),$f=/^__.*__$/,eh=function(){function e(t,n,r){P(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return O(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new oi(e,this.data,this.fieldMask,t,this.fieldTransforms):new ui(e,this.data,t,this.fieldTransforms)}}]),e}(),th=function(){function e(t,n,r){P(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return O(e,[{key:"toMutation",value:function(e,t){return new oi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function nh(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}var rh=function(){function e(t,n,r,i,a,u){P(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.du(),this.fieldTransforms=a||[],this.fieldMask=u||[]}return O(e,[{key:"path",get:function(){return this.settings.path}},{key:"Tu",get:function(){return this.settings.Tu}},{key:"Eu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Au",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Eu({path:n,Ru:!1});return r.Vu(e),r}},{key:"mu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Eu({path:n,Ru:!1});return r.du(),r}},{key:"fu",value:function(e){return this.Eu({path:void 0,Ru:!0})}},{key:"gu",value:function(e){return Ih(e,this.settings.methodName,this.settings.pu||!1,this.path,this.settings.yu)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})}},{key:"du",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Vu(this.path.get(e))}},{key:"Vu",value:function(e){if(0===e.length)throw this.gu("Document fields must not be empty");if(nh(this.Tu)&&$f.test(e))throw this.gu('Document fields cannot begin and end with "__"')}}]),e}(),ih=function(){function e(t,n,r){P(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||ns(t)}return O(e,[{key:"wu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new rh({Tu:e,methodName:t,yu:n,path:xe.emptyPath(),Ru:!1,pu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function ah(e){var t=e._freezeSettings(),n=ns(e._databaseId);return new ih(e._databaseId,!!t.ignoreUndefinedProperties,n)}function uh(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=e.wu(a.merge||a.mergeFields?2:0,t,n,i);kh("Data must be an object, but it was:",u,r);var o,s,c=mh(r,u);if(a.merge)o=new Vt(u.fieldMask),s=u.fieldTransforms;else if(a.mergeFields){var l,f=[],h=y(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=wh(t,l.value,n);if(!u.contains(d))throw new ee($.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));_h(f,d)||f.push(d)}}catch(v){h.e(v)}finally{h.f()}o=new Vt(f),s=u.fieldTransforms.filter(function(e){return o.covers(e.field)})}else o=null,s=u.fieldTransforms;return new eh(new wn(c),o,s)}var oh=function(e){w(n,Jf);var t=b(n);function n(){return P(this,n),t.apply(this,arguments)}return O(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Tu)throw 1===e.Tu?e.gu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.gu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}();function sh(e,t,n){return new rh({Tu:3,yu:t.settings.yu,methodName:e._methodName,Ru:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var ch=function(e){w(n,Jf);var t=b(n);function n(){return P(this,n),t.apply(this,arguments)}return O(n,[{key:"_toFieldTransform",value:function(e){return new Yr(e.path,new Br)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(),lh=function(e){w(n,Jf);var t=b(n);function n(e,r){var i;return P(this,n),(i=t.call(this,e)).Su=r,i}return O(n,[{key:"_toFieldTransform",value:function(e){var t=sh(this,e,!0),n=this.Su.map(function(e){return yh(e,t)}),r=new zr(n);return new Yr(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(),fh=function(e){w(n,Jf);var t=b(n);function n(e,r){var i;return P(this,n),(i=t.call(this,e)).Su=r,i}return O(n,[{key:"_toFieldTransform",value:function(e){var t=sh(this,e,!0),n=this.Su.map(function(e){return yh(e,t)}),r=new Kr(n);return new Yr(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(),hh=function(e){w(n,Jf);var t=b(n);function n(e,r){var i;return P(this,n),(i=t.call(this,e)).bu=r,i}return O(n,[{key:"_toFieldTransform",value:function(e){var t=new Qr(e.serializer,Or(e.serializer,this.bu));return new Yr(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}();function dh(e,t,n,r){var i=e.wu(1,t,n);kh("Data must be an object, but it was:",i,r);var u=[],o=wn.empty();At(r,function(e,r){var s=bh(t,e,n);r=(0,a.getModularInstance)(r);var c=i.mu(s);if(r instanceof oh)u.push(s);else{var l=yh(r,c);null!=l&&(u.push(s),o.set(s,l))}});var s=new Vt(u);return new th(o,s,i.fieldTransforms)}function vh(e,t,n,r,i,u){var o=e.wu(1,t,n),s=[wh(t,r,n)],c=[i];if(u.length%2!=0)throw new ee($.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var l=0;l<u.length;l+=2)s.push(wh(t,u[l])),c.push(u[l+1]);for(var f=[],h=wn.empty(),d=s.length-1;d>=0;--d)if(!_h(f,s[d])){var v=s[d],p=c[d];p=(0,a.getModularInstance)(p);var y=o.mu(v);if(p instanceof oh)f.push(v);else{var m=yh(p,y);null!=m&&(f.push(v),h.set(v,m))}}var g=new Vt(f);return new th(h,g,o.fieldTransforms)}function ph(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return yh(n,e.wu(r?4:3,t))}function yh(e,t){if(gh(e=(0,a.getModularInstance)(e)))return kh("Unsupported field value:",t,e),mh(e,t);if(e instanceof Jf)return function(e,t){if(!nh(t.Tu))throw t.gu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.gu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Ru&&4!==t.Tu)throw t.gu("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=y(e);try{for(a.s();!(n=a.n()).done;){var u=yh(n.value,t.fu(i));null==u&&(u={nullValue:"NULL_VALUE"}),r.push(u),i++}}catch(o){a.e(o)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=(0,a.getModularInstance)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Or(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=ye.fromDate(e);return{timestampValue:Gi(t.serializer,n)}}if(e instanceof ye){var r=new ye(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Gi(t.serializer,r)}}if(e instanceof Zf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Hf)return{bytesValue:Ki(t.serializer,e._byteString)};if(e instanceof kf){var i=t.databaseId,u=e.firestore._databaseId;if(!u.isEqual(i))throw t.gu("Document reference is for database ".concat(u.projectId,"/").concat(u.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Wi(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.gu("Unsupported field value: ".concat(hf(e)))}(e,t)}function mh(e,t){var n={};return Nt(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):At(e,function(e,r){var i=yh(r,t.Au(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function gh(e){return!("object"!=R(e)||null===e||e instanceof Array||e instanceof Date||e instanceof ye||e instanceof Zf||e instanceof Hf||e instanceof kf||e instanceof Jf)}function kh(e,t,n){if(!gh(n)||!function(e){return"object"==R(e)&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=hf(n);throw"an object"===r?t.gu(e+" a custom object"):t.gu(e+" "+r)}}function wh(e,t,n){if((t=(0,a.getModularInstance)(t))instanceof Yf)return t._internalPath;if("string"==typeof t)return bh(e,t);throw Ih("Field path arguments must be of type string or ",e,!1,void 0,n)}var xh=new RegExp("[~\\*/\\[\\]]");function bh(e,t,n){if(t.search(xh)>=0)throw Ih("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return v(Yf,S(t.split(".")))._internalPath}catch(r){throw Ih("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Ih(e,t,n,r,i){var a=r&&!r.isEmpty(),u=void 0!==i,o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";var s="";return(a||u)&&(s+=" (found",a&&(s+=" in field ".concat(r)),u&&(s+=" in document ".concat(i)),s+=")"),new ee($.INVALID_ARGUMENT,o+e+s)}function _h(e,t){return e.some(function(e){return e.isEqual(t)})}var Eh=function(){function e(t,n,r,i,a){P(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return O(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new kf(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Th(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Sh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Th=function(e){w(n,Eh);var t=b(n);function n(){return P(this,n),t.apply(this,arguments)}return O(n,[{key:"data",value:function(){return o(T(n.prototype),"data",this).call(this)}}]),n}();function Sh(e,t){return"string"==typeof t?bh(e,t):t instanceof Yf?t._internalPath:t._delegate._internalPath}function Ch(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ee($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Dh=O(function e(){P(this,e)}),Ah=exports.QueryConstraint=function(e){w(n,Dh);var t=b(n);function n(){return P(this,n),t.apply(this,arguments)}return O(n)}();function Nh(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof Dh&&n.push(t),function(e){var t=e.filter(function(e){return e instanceof Ph}).length,n=e.filter(function(e){return e instanceof Fh}).length;if(t>1||t>0&&n>0)throw new ee($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var u,o=y(n);try{for(o.s();!(u=o.n()).done;){e=u.value._apply(e)}}catch(s){o.e(s)}finally{o.f()}return e}var Fh=exports.QueryFieldFilterConstraint=function(e){w(n,Ah);var t=b(n);function n(e,r,i){var a;return P(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return O(n,[{key:"_apply",value:function(e){var t=this._parse(e);return Jh(e._query,t),new gf(e.firestore,e.converter,fr(e._query,t))}},{key:"_parse",value:function(e){var t=ah(e.firestore);return function(e,t,n,r,i,a,u){var o;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new ee($.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Xh(u,a);var s,c=[],l=y(u);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(Yh(r,e,f))}}catch(h){l.e(h)}finally{l.f()}o={arrayValue:{values:c}}}else o=Yh(r,e,u)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Xh(u,a),o=ph(n,t,u,"in"===a||"not-in"===a);return Dn.create(i,a,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}();function Rh(e,t,n){var r=t,i=Sh("where",e);return Fh._create(i,r,n)}var Ph=exports.QueryCompositeFilterConstraint=function(e){w(n,Dh);var t=b(n);function n(e,r){var i;return P(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return O(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map(function(t){return t._parse(e)}).filter(function(e){return e.getFilters().length>0});return 1===t.length?t[0]:An.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=y(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;Jh(r,a),r=fr(r,a)}}catch(u){i.e(u)}finally{i.f()}}(e._query,t),new gf(e.firestore,e.converter,fr(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}();function Lh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(function(e){return $h("or",e)}),Ph._create("or",t)}function Oh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(function(e){return $h("and",e)}),Ph._create("and",t)}var Mh=exports.QueryOrderByConstraint=function(e){w(n,Ah);var t=b(n);function n(e,r){var i;return P(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return O(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new ee($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ee($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Tn(t,n);return function(e,t){if(null===ar(e)){var n=ur(e);null!==n&&Zh(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new gf(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new tr(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}();function Vh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Sh("orderBy",e);return Mh._create(n,t)}var qh=exports.QueryLimitConstraint=function(e){w(n,Ah);var t=b(n);function n(e,r,i){var a;return P(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return O(n,[{key:"_apply",value:function(e){return new gf(e.firestore,e.converter,hr(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}();function Uh(e){return vf("limit",e),qh._create("limit",e,"F")}function Bh(e){return vf("limitToLast",e),qh._create("limitToLast",e,"L")}var zh=exports.QueryStartAtConstraint=function(e){w(n,Ah);var t=b(n);function n(e,r,i){var a;return P(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return O(n,[{key:"_apply",value:function(e){var t=Hh(e,this.type,this._docOrFields,this._inclusive);return new gf(e.firestore,e.converter,function(e,t){return new tr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}();function Gh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return zh._create("startAt",t,!0)}function Kh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return zh._create("startAfter",t,!1)}var jh=exports.QueryEndAtConstraint=function(e){w(n,Ah);var t=b(n);function n(e,r,i){var a;return P(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return O(n,[{key:"_apply",value:function(e){var t=Hh(e,this.type,this._docOrFields,this._inclusive);return new gf(e.firestore,e.converter,function(e,t){return new tr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}();function Qh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jh._create("endBefore",t,!1)}function Wh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jh._create("endAt",t,!0)}function Hh(e,t,n,r){if(n[0]=(0,a.getModularInstance)(n[0]),n[0]instanceof Eh)return function(e,t,n,r,i){if(!r)throw new ee($.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,u=[],o=y(sr(e));try{for(o.s();!(a=o.n()).done;){var s=a.value;if(s.field.isKeyField())u.push(sn(t,r.key));else{var c=r.data.field(s.field);if(Qt(c))throw new ee($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new ee($.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}u.push(c)}}}catch(f){o.e(f)}finally{o.f()}return new In(u,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=ah(e.firestore);return function(e,t,n,r,i,a){var u=e.explicitOrderBy;if(i.length>u.length)throw new ee($.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var o=[],s=0;s<i.length;s++){var c=i[s];if(u[s].field.isKeyField()){if("string"!=typeof c)throw new ee($.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(R(c)));if(!or(e)&&-1!==c.indexOf("/"))throw new ee($.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(ke.fromString(c));if(!be.isDocumentKey(l))throw new ee($.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new be(l);o.push(sn(t,f))}else{var h=ph(n,r,c);o.push(h)}}return new In(o,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Yh(e,t,n){if("string"==typeof(n=(0,a.getModularInstance)(n))){if(""===n)throw new ee($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!or(t)&&-1!==n.indexOf("/"))throw new ee($.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(ke.fromString(n));if(!be.isDocumentKey(r))throw new ee($.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return sn(e,new be(r))}if(n instanceof kf)return sn(e,n._key);throw new ee($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(hf(n),"."))}function Xh(e,t){if(!Array.isArray(e)||0===e.length)throw new ee($.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Jh(e,t){if(t.isInequality()){var n=ur(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new ee($.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=ar(e);null!==i&&Zh(e,r,i)}var a=function(e,t){var n,r=y(e);try{for(r.s();!(n=r.n()).done;){var i,a=y(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var u=i.value;if(t.indexOf(u.op)>=0)return u.op}}catch(o){a.e(o)}finally{a.f()}}}catch(o){r.e(o)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new ee($.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ee($.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function Zh(e,t,n){if(!n.isEqual(t))throw new ee($.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}function $h(e,t){if(!(t instanceof Fh||t instanceof Ph))throw new ee($.INVALID_ARGUMENT,"Function ".concat(e,"() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'."))}var ed=exports.AbstractUserDataWriter=function(){function e(){P(this,e)}return O(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch($t(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Y()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return At(e,function(e,i){r[e]=t.convertValue(i,n)}),r}},{key:"convertGeoPoint",value:function(e){return new Zf(Kt(e.latitude),Kt(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map(function(e){return n.convertValue(e,t)})}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Wt(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ht(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Gt(e);return new ye(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=ke.fromString(e);X(wa(n));var r=new Xt(n.get(1),n.get(3)),i=new be(n.popFirst(5));return r.isEqual(t)||Q("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function td(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var nd=function(e){w(n,ed);var t=b(n);function n(e){var r;return P(this,n),(r=t.call(this)).firestore=e,r}return O(n,[{key:"convertBytes",value:function(e){return new Hf(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new kf(this.firestore,null,t)}}]),n}();function rd(e){return new Qf("sum",wh("sum",e))}function id(e){return new Qf("avg",wh("average",e))}function ad(){return new Qf("count")}function ud(e,t){var n,r;return e instanceof Qf&&t instanceof Qf&&e._aggregateType===t._aggregateType&&(null===(n=e._internalFieldPath)||void 0===n?void 0:n.canonicalString())===(null===(r=t._internalFieldPath)||void 0===r?void 0:r.canonicalString())}function od(e,t){return Ef(e.query,t.query)&&(0,a.deepEqual)(e.data(),t.data())}var sd=exports.SnapshotMetadata=function(){function e(t,n){P(this,e),this.hasPendingWrites=t,this.fromCache=n}return O(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),cd=exports.DocumentSnapshot=function(e){w(n,Eh);var t=b(n);function n(e,r,i,a,u,o){var s;return P(this,n),(s=t.call(this,e,r,i,a,o))._firestore=e,s._firestoreImpl=e,s.metadata=u,s}return O(n,[{key:"exists",value:function(){return o(T(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new ld(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Sh("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(),ld=exports.QueryDocumentSnapshot=function(e){w(n,cd);var t=b(n);function n(){return P(this,n),t.apply(this,arguments)}return O(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(T(n.prototype),"data",this).call(this,e)}}]),n}(),fd=exports.QuerySnapshot=function(){function e(t,n,r,i){P(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new sd(i.hasPendingWrites,i.fromCache),this.query=r}return O(e,[{key:"docs",get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach(function(r){e.call(t,new ld(n._firestore,n._userDataWriter,r.key,r,new sd(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ee($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map(function(t){var r=new ld(e._firestore,e._userDataWriter,t.doc.key,t.doc,new sd(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}})}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(function(e){return t||3!==e.type}).map(function(t){var n=new ld(e._firestore,e._userDataWriter,t.doc.key,t.doc,new sd(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:hd(t.type),doc:n,oldIndex:i,newIndex:a}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function hd(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}function dd(e,t){return e instanceof cd&&t instanceof cd?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof fd&&t instanceof fd&&e._firestore===t._firestore&&Ef(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function vd(e){e=df(e,kf);var t=df(e.firestore,Af);return Xl(Rf(t),e._key).then(function(n){return Cd(t,e,n)})}var pd=function(e){w(n,ed);var t=b(n);function n(e){var r;return P(this,n),(r=t.call(this)).firestore=e,r}return O(n,[{key:"convertBytes",value:function(e){return new Hf(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new kf(this.firestore,null,t)}}]),n}();function yd(e){e=df(e,kf);var t=df(e.firestore,Af),n=Rf(t),r=new pd(t);return Yl(n,e._key).then(function(n){return new cd(t,r,e._key,n,new sd(null!==n&&n.hasLocalMutations,!0),e.converter)})}function md(e){e=df(e,kf);var t=df(e.firestore,Af);return Xl(Rf(t),e._key,{source:"server"}).then(function(n){return Cd(t,e,n)})}function gd(e){e=df(e,gf);var t=df(e.firestore,Af),n=Rf(t),r=new pd(t);return Ch(e._query),Zl(n,e._query).then(function(n){return new fd(t,r,e,n)})}function kd(e){e=df(e,gf);var t=df(e.firestore,Af),n=Rf(t),r=new pd(t);return Jl(n,e._query).then(function(n){return new fd(t,r,e,n)})}function wd(e){e=df(e,gf);var t=df(e.firestore,Af),n=Rf(t),r=new pd(t);return Zl(n,e._query,{source:"server"}).then(function(n){return new fd(t,r,e,n)})}function xd(e,t,n){e=df(e,kf);var r=df(e.firestore,Af),i=td(e.converter,t,n);return Sd(r,[uh(ah(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Zr.none())])}function bd(e,t,n){e=df(e,kf);for(var r=df(e.firestore,Af),i=ah(r),u=arguments.length,o=new Array(u>3?u-3:0),s=3;s<u;s++)o[s-3]=arguments[s];return Sd(r,[("string"==typeof(t=(0,a.getModularInstance)(t))||t instanceof Yf?vh(i,"updateDoc",e._key,t,n,o):dh(i,"updateDoc",e._key,t)).toMutation(e._key,Zr.exists(!0))])}function Id(e){return Sd(df(e.firestore,Af),[new di(e._key,Zr.none())])}function _d(e,t){var n=df(e.firestore,Af),r=If(e),i=td(e.converter,t);return Sd(n,[uh(ah(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Zr.exists(!1))]).then(function(){return r})}function Ed(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,u,o;e=(0,a.getModularInstance)(e);var s={includeMetadataChanges:!1},c=0;"object"!=R(n[c])||Sf(n[c])||(s=n[c],c++);var l,f,h,d={includeMetadataChanges:s.includeMetadataChanges};if(Sf(n[c])){var v=n[c];n[c]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[c+1]=null===(u=v.error)||void 0===u?void 0:u.bind(v),n[c+2]=null===(o=v.complete)||void 0===o?void 0:o.bind(v)}if(e instanceof kf)f=df(e.firestore,Af),h=rr(e._key.path),l={next:function(t){n[c]&&n[c](Cd(f,e,t))},error:n[c+1],complete:n[c+2]};else{var p=df(e,gf);f=df(p.firestore,Af),h=p._query;var y=new pd(f);l={next:function(e){n[c]&&n[c](new fd(f,y,p,e))},error:n[c+1],complete:n[c+2]},Ch(e._query)}return function(e,t,n,r){var i=new Tl(r),a=new dc(t,i,n);return e.asyncQueue.enqueueAndForget(k(m().mark(function t(){return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=uc,t.next=3,jl(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)}))),function(){i.La(),e.asyncQueue.enqueueAndForget(k(m().mark(function t(){return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=sc,t.next=3,jl(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)})))}}(Rf(f),h,d,l)}function Td(e,t){return $l(Rf(e=df(e,Af)),Sf(t)?t:{next:t})}function Sd(e,t){return function(e,t){var n=new te;return e.asyncQueue.enqueueAndForget(k(m().mark(function r(){return m().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Ac,r.next=3,Gl(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(Rf(e),t)}function Cd(e,t,n){var r=n.docs.get(t._key),i=new pd(e);return new cd(e,i,t._key,r,new sd(n.hasPendingWrites,n.fromCache),t.converter)}function Dd(e){return Ad(e,{count:ad()})}function Ad(e,t){var n=df(e.firestore,Af),r=Rf(n),i=function(e,t){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.push(t(e[r],r,e));return n}(t,function(e,t){return new gi(t,e._aggregateType,e._internalFieldPath)});return function(e,t,n){var r=new te;return e.asyncQueue.enqueueAndForget(k(m().mark(function i(){var a;return m().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Kl(e);case 3:a=i.sent,r.resolve(ss(a,t,n)),i.next=10;break;case 7:i.prev=7,i.t0=i.catch(0),r.reject(i.t0);case 10:case"end":return i.stop()}},i,null,[[0,7]])}))),r.promise}(r,e._query,i).then(function(t){return function(e,t,n){var r=new pd(e);return new Wf(t,r,n)}(n,e,t)})}var Nd=function(){function e(t){P(this,e),this.kind="memory",this._onlineComponentProvider=new _l,(null==t?void 0:t.garbageCollector)?this._offlineComponentProvider=t.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=new wl}return O(e,[{key:"toJSON",value:function(){return{kind:this.kind}}}]),e}(),Fd=function(){function e(t){var n;P(this,e),this.kind="persistent",(null==t?void 0:t.tabManager)?(t.tabManager._initialize(t),n=t.tabManager):(n=Bd(void 0))._initialize(t),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}return O(e,[{key:"toJSON",value:function(){return{kind:this.kind}}}]),e}(),Rd=function(){function e(){P(this,e),this.kind="memoryEager",this._offlineComponentProvider=new wl}return O(e,[{key:"toJSON",value:function(){return{kind:this.kind}}}]),e}(),Pd=function(){function e(t){P(this,e),this.kind="memoryLru",this._offlineComponentProvider=new xl(t)}return O(e,[{key:"toJSON",value:function(){return{kind:this.kind}}}]),e}();function Ld(){return new Rd}function Od(e){return new Pd(null==e?void 0:e.cacheSizeBytes)}function Md(e){return new Nd(e)}function Vd(e){return new Fd(e)}var qd=function(){function e(t){P(this,e),this.forceOwnership=t,this.kind="persistentSingleTab"}return O(e,[{key:"toJSON",value:function(){return{kind:this.kind}}},{key:"_initialize",value:function(e){this._onlineComponentProvider=new _l,this._offlineComponentProvider=new bl(this._onlineComponentProvider,null==e?void 0:e.cacheSizeBytes,this.forceOwnership)}}]),e}(),Ud=function(){function e(){P(this,e),this.kind="PersistentMultipleTab"}return O(e,[{key:"toJSON",value:function(){return{kind:this.kind}}},{key:"_initialize",value:function(e){this._onlineComponentProvider=new _l,this._offlineComponentProvider=new Il(this._onlineComponentProvider,null==e?void 0:e.cacheSizeBytes)}}]),e}();function Bd(e){return new qd(null==e?void 0:e.forceOwnership)}function zd(){return new Ud}var Gd={maxAttempts:5},Kd=exports.WriteBatch=function(){function e(t,n){P(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ah(t)}return O(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=jd(e,this._firestore),i=td(r.converter,t,n),a=uh(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Zr.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=jd(e,this._firestore),u=arguments.length,o=new Array(u>3?u-3:0),s=3;s<u;s++)o[s-3]=arguments[s];return r="string"==typeof(t=(0,a.getModularInstance)(t))||t instanceof Yf?vh(this._dataReader,"WriteBatch.update",i._key,t,n,o):dh(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Zr.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=jd(e,this._firestore);return this._mutations=this._mutations.concat(new di(t._key,Zr.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new ee($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function jd(e,t){if((e=(0,a.getModularInstance)(e)).firestore!==t)throw new ee($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Qd=exports.Transaction=function(e){w(n,e);var t=b(n);function n(e,r){var i;return P(this,n),(i=t.call(this,e,r))._firestore=e,i}return O(n,[{key:"get",value:function(e){var t=this,r=jd(e,this._firestore),i=new pd(this._firestore);return o(T(n.prototype),"get",this).call(this,e).then(function(e){return new cd(t._firestore,i,r._key,e._document,new sd(!1,!1),r.converter)})}}]),n}(function(){function e(t,n){P(this,e),this._firestore=t,this._transaction=n,this._dataReader=ah(t)}return O(e,[{key:"get",value:function(e){var t=this,n=jd(e,this._firestore),r=new nd(this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return Y();var i=e[0];if(i.isFoundDocument())return new Eh(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Eh(t._firestore,r,n._key,null,n.converter);throw Y()})}},{key:"set",value:function(e,t,n){var r=jd(e,this._firestore),i=td(r.converter,t,n),a=uh(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=jd(e,this._firestore),u=arguments.length,o=new Array(u>3?u-3:0),s=3;s<u;s++)o[s-3]=arguments[s];return r="string"==typeof(t=(0,a.getModularInstance)(t))||t instanceof Yf?vh(this._dataReader,"Transaction.update",i._key,t,n,o):dh(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=jd(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Wd(e,t,n){e=df(e,Af);var r=Object.assign(Object.assign({},Gd),n);return function(e){if(e.maxAttempts<1)throw new ee($.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new te;return e.asyncQueue.enqueueAndForget(k(m().mark(function i(){var a;return m().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Kl(e);case 2:a=i.sent,new Dl(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}},i)}))),r.promise}(Rf(e),function(n){return t(new Qd(e,n))},r)}function Hd(){return new oh("deleteField")}function Yd(){return new ch("serverTimestamp")}function Xd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new lh("arrayUnion",t)}function Jd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new fh("arrayRemove",t)}function Zd(e){return new hh("increment",e)}function $d(e){return Rf(e=df(e,Af)),new Kd(e,function(t){return Sd(e,t)})}function ev(e,t){var n,r=Rf(e=df(e,Af));return r._uninitializedComponentsProvider&&"memory"!==(null===(n=r._uninitializedComponentsProvider)||void 0===n?void 0:n._offlineKind)?nf(r,function(e){var t="string"==typeof e?function(e){try{return JSON.parse(e)}catch(e){throw new ee($.INVALID_ARGUMENT,"Failed to parse JSON: "+(null==e?void 0:e.message))}}(e):e,n=[];if(Array.isArray(t.indexes)){var r,i=y(t.indexes);try{for(i.s();!(r=i.n()).done;){var a=r.value,u=tv(a,"collectionGroup"),o=[];if(Array.isArray(a.fields)){var s,c=y(a.fields);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=bh("setIndexConfiguration",tv(l,"fieldPath"));"CONTAINS"===l.arrayConfig?o.push(new Se(f,2)):"ASCENDING"===l.order?o.push(new Se(f,0)):"DESCENDING"===l.order&&o.push(new Se(f,1))}}catch(h){c.e(h)}finally{c.f()}}n.push(new Ie(Ie.UNKNOWN_ID,u,o,De.empty()))}}catch(h){i.e(h)}finally{i.f()}}return n}(t)):(W("Cannot enable indexes when persistence is disabled"),Promise.resolve())}function tv(e,t){if("string"!=typeof e[t])throw new ee($.INVALID_ARGUMENT,"Missing string value for: "+t);return e[t]}var nv=exports.PersistentCacheIndexManager=O(function e(t){P(this,e),this._client=t,this.type="PersistentCacheIndexManager"});function rv(e){var t;e=df(e,Af);var n=sv.get(e);if(n)return n;var r=Rf(e);if("persistent"!==(null===(t=r._uninitializedComponentsProvider)||void 0===t?void 0:t._offlineKind))return null;var i=new nv(r);return sv.set(e,i),i}function iv(e){ov(e,!0)}function av(e){ov(e,!1)}function uv(e){e._client.verifyNotTerminated(),af(e._client).then(function(e){return j("deleting all persistent cache indexes succeeded")}).catch(function(e){return W("deleting all persistent cache indexes failed",e)})}function ov(e,t){e._client.verifyNotTerminated(),rf(e._client,t).then(function(e){return j("setting persistent cache index auto creation isEnabled=".concat(t," succeeded"))}).catch(function(e){return W("setting persistent cache index auto creation isEnabled=".concat(t," failed"),e)})}var sv=new WeakMap,cv=exports._TestingHooks=function(){function e(){throw P(this,e),new Error("instances of this class should not be created")}return O(e,null,[{key:"onExistenceFilterMismatch",value:function(e){return lv.instance.onExistenceFilterMismatch(e)}}]),e}(),lv=function(){function e(){P(this,e),this.Du=new Map}return O(e,[{key:"it",value:function(e){this.Du.forEach(function(t){return t(e)})}},{key:"onExistenceFilterMismatch",value:function(e){var t=Symbol(),n=this.Du;return n.set(t,e),function(){return n.delete(t)}}}],[{key:"instance",get:function(){return fv||function(e){if(bi)throw new Error("a TestingHooksSpi instance is already set");bi=e}(fv=new e),fv}}]),e}(),fv=null;!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){B=e}(n.SDK_VERSION),(0,n._registerComponent)(new r.Component("firestore",function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),u=new Af(new ae(e.getProvider("auth-internal")),new ce(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ee($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xt(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,n.registerVersion)(q,"4.2.0",e),(0,n.registerVersion)(q,"4.2.0","esm2017")}();
},{"@firebase/app":"h2Mb","@firebase/component":"vhY9","@firebase/logger":"JJem","@firebase/util":"chA2","@firebase/webchannel-wrapper":"fIlu","process":"pBGv"}],"rrht":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/firestore");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});
},{"@firebase/firestore":"lBbe"}],"QtzL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/app");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r="firebase",t="10.4.0";(0,e.registerVersion)(r,t,"app");
},{"@firebase/app":"h2Mb"}],"vCxL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.__addDisposableResource=k,exports.__assign=void 0,exports.__asyncDelegator=g,exports.__asyncGenerator=x,exports.__asyncValues=O,exports.__await=m,exports.__awaiter=l,exports.__classPrivateFieldGet=T,exports.__classPrivateFieldIn=I,exports.__classPrivateFieldSet=D,exports.__createBinding=void 0,exports.__decorate=o,exports.__disposeResources=A,exports.__esDecorate=i,exports.__exportStar=_,exports.__extends=t,exports.__generator=p,exports.__importDefault=E,exports.__importStar=S,exports.__makeTemplateObject=j,exports.__metadata=f,exports.__param=a,exports.__propKey=s,exports.__read=h,exports.__rest=n,exports.__runInitializers=c,exports.__setFunctionName=u,exports.__spread=v,exports.__spreadArray=w,exports.__spreadArrays=b,exports.__values=d,exports.default=void 0;var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};function t(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var r=function(){return exports.__assign=r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};function n(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function o(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function a(e,t){return function(r,n){t(r,n,e)}}function i(e,t,r,n,o,a){function i(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var c,s=n.kind,u="getter"===s?"get":"setter"===s?"set":"value",f=!t&&e?n.static?e:e.prototype:null,l=t||(f?Object.getOwnPropertyDescriptor(f,n.name):{}),p=!1,y=r.length-1;y>=0;y--){var _={};for(var d in n)_[d]="access"===d?{}:n[d];for(var d in n.access)_.access[d]=n.access[d];_.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");a.push(i(e||null))};var h=(0,r[y])("accessor"===s?{get:l.get,set:l.set}:l[u],_);if("accessor"===s){if(void 0===h)continue;if(null===h||"object"!=typeof h)throw new TypeError("Object expected");(c=i(h.get))&&(l.get=c),(c=i(h.set))&&(l.set=c),(c=i(h.init))&&o.unshift(c)}else(c=i(h))&&("field"===s?o.unshift(c):l[u]=c)}f&&Object.defineProperty(f,n.name,l),p=!0}function c(e,t,r){for(var n=arguments.length>2,o=0;o<t.length;o++)r=n?t[o].call(e,r):t[o].call(e);return n?r:void 0}function s(e){return"symbol"==typeof e?e:"".concat(e)}function u(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function f(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,c)}s((n=n.apply(e,t||[])).next())})}function p(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(s){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(s){c=[6,s],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}exports.__assign=r;var y=exports.__createBinding=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function _(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||y(t,e,r)}function d(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(c){o={error:c}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function b(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var a=arguments[t],i=0,c=a.length;i<c;i++,o++)n[o]=a[i];return n}function w(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function x(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),a=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(e){o[e]&&(n[e]=function(t){return new Promise(function(r,n){a.push([e,t,r,n])>1||c(e,t)})})}function c(e,t){try{(r=o[e](t)).value instanceof m?Promise.resolve(r.value.v).then(s,u):f(a[0][2],r)}catch(n){f(a[0][3],n)}var r}function s(e){c("next",e)}function u(e){c("throw",e)}function f(e,t){e(t),a.shift(),a.length&&c(a[0][0],a[0][1])}}function g(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:m(e[n](t)),done:!1}:o?o(t):t}:o}}function O(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof d?d(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,o){(function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)})(n,o,(t=e[r](t)).done,t.value)})}}}function j(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var P=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&y(t,e,r);return P(t,e),t}function E(e){return e&&e.__esModule?e:{default:e}}function T(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function D(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r}function I(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function k(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if("function"!=typeof n)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var R="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function A(e){function t(t){e.error=e.hasError?new R(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function r(){for(;e.stack.length;){var n=e.stack.pop();try{var o=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(o).then(r,function(e){return t(e),r()})}catch(a){t(a)}}if(e.hasError)throw e.error}()}var F=exports.default={__extends:t,__assign:r,__rest:n,__decorate:o,__param:a,__metadata:f,__awaiter:l,__generator:p,__createBinding:y,__exportStar:_,__values:d,__read:h,__spread:v,__spreadArrays:b,__spreadArray:w,__await:m,__asyncGenerator:x,__asyncDelegator:g,__asyncValues:O,__makeTemplateObject:j,__importStar:S,__importDefault:E,__classPrivateFieldGet:T,__classPrivateFieldSet:D,__classPrivateFieldIn:I,__addDisposableResource:k,__disposeResources:A};
},{}],"KXae":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.$=Bt,exports.A=void 0,exports.B=Bn,exports.C=$n,exports.D=Jn,exports.H=exports.G=exports.F=exports.E=void 0,exports.I=Ze,exports.J=tt,exports.a=exports._=exports.Z=exports.Y=exports.X=exports.W=exports.V=exports.U=exports.T=exports.S=exports.R=exports.Q=exports.P=exports.O=exports.N=exports.M=exports.L=exports.K=void 0,exports.a0=nn,exports.a1=rn,exports.a2=sn,exports.a3=an,exports.a4=pn,exports.a5=mn,exports.a6=fn,exports.a7=gn,exports.a8=vn,exports.a9=In,exports.aA=E,exports.aB=R,exports.aC=void 0,exports.aD=ve,exports.aE=Te,exports.aF=Hr,exports.aG=br,exports.aH=Pr,exports.aI=je,exports.aK=exports.aJ=void 0,exports.aL=xe,exports.aM=Ii,exports.aP=exports.aO=exports.aN=void 0,exports.aa=_n,exports.ab=Tn,exports.ac=yn,exports.ad=wn,exports.ae=An,exports.af=kn,exports.ag=Sn,exports.ah=void 0,exports.ai=Ot,exports.aj=Nn,exports.ak=Pn,exports.al=bn,exports.am=Z,exports.an=ee,exports.ao=Xt,exports.ap=Fn,exports.aq=ue,exports.ar=Qn,exports.as=oi,exports.at=P,exports.au=be,exports.av=Re,exports.aw=w,exports.ax=ys,exports.ay=Br,exports.az=Oe,exports.b=void 0,exports.c=Tr,exports.d=wr,exports.e=yr,exports.f=Dr,exports.g=Ur,exports.h=Mr,exports.i=void 0,exports.j=Fr,exports.k=void 0,exports.l=cr,exports.n=exports.m=void 0,exports.o=js,exports.p=void 0,exports.q=Hn,exports.r=ur,exports.s=ar,exports.t=qn,exports.u=lr,exports.v=jn,exports.w=zn,exports.x=Gn,exports.y=Wn,exports.z=Kn;var e=require("@firebase/util"),t=require("@firebase/app"),n=require("@firebase/logger"),i=require("tslib"),r=require("@firebase/component");const s=exports.F={PHONE:"phone",TOTP:"totp"},o=exports.p={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},a=exports.S={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},c=exports.O={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},u=exports.A={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function d(e){return void 0!==e&&void 0!==e.getResponse}function l(e){return void 0!==e&&void 0!==e.enterprise}class h{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}function p(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function m(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const f=exports.E=p,g=exports.G=m,v=new e.ErrorFactory("auth","Firebase",m()),I=exports.H={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type"},_=new n.Logger("@firebase/auth");function T(e,...i){_.logLevel<=n.LogLevel.WARN&&_.warn(`Auth (${t.SDK_VERSION}): ${e}`,...i)}function y(e,...i){_.logLevel<=n.LogLevel.ERROR&&_.error(`Auth (${t.SDK_VERSION}): ${e}`,...i)}function w(e,...t){throw S(e,...t)}function E(e,...t){return S(e,...t)}function A(t,n,i){const r=Object.assign(Object.assign({},g()),{[n]:i});return new e.ErrorFactory("auth","Firebase",r).create(n,{appName:t.name})}function k(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&w(e,"argument-error"),A(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.`+"Did you pass a reference from a different Auth SDK?")}function S(e,...t){if("string"!=typeof e){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return v.create(e,...t)}function R(e,t,...n){if(!e)throw S(t,...n)}function N(e){const t="INTERNAL ASSERTION FAILED: "+e;throw y(t),new Error(t)}function P(e,t){e||N(t)}function b(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function O(){return"http:"===C()||"https:"===C()}function C(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function D(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(O()||(0,e.isBrowserExtension)()||"connection"in navigator))||navigator.onLine}function L(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}class M{constructor(t,n){this.shortDelay=t,this.longDelay=n,P(n>t,"Short delay should be less than long delay!"),this.isMobile=(0,e.isMobileCordova)()||(0,e.isReactNative)()}get(){return D()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function x(e,t){P(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class U{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void N("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void N("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void N("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}exports.aO=U;const V={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},F=new M(3e4,6e4);function H(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function q(t,n,i,r,s={}){return j(t,s,async()=>{let s={},o={};r&&("GET"===n?o=r:s={body:JSON.stringify(r)});const a=(0,e.querystring)(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),U.fetch()(G(t,t.config.apiHost,i,a),Object.assign({method:n,headers:c,referrerPolicy:"no-referrer"},s))})}async function j(t,n,i){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},V),n);try{const n=new W(t),o=await Promise.race([i(),n.promise]);n.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw K(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const e=o.ok?a.errorMessage:a.error.message,[n,i]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw K(t,"credential-already-in-use",a);if("EMAIL_EXISTS"===n)throw K(t,"email-already-in-use",a);if("USER_DISABLED"===n)throw K(t,"user-disabled",a);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(i)throw A(t,s,i);w(t,s)}}catch(s){if(s instanceof e.FirebaseError)throw s;w(t,"network-request-failed",{message:String(s)})}}async function z(e,t,n,i,r={}){const s=await q(e,t,n,i,r);return"mfaPendingCredential"in s&&w(e,"multi-factor-auth-required",{_serverResponse:s}),s}function G(e,t,n,i){const r=`${t}${n}?${i}`;return e.config.emulator?x(e.config,r):`${e.config.apiScheme}://${r}`}class W{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(E(this.auth,"network-request-failed")),F.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function K(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=E(e,t,i);return r.customData._tokenResponse=n,r}async function B(e){return(await q(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function $(e,t){return q(e,"GET","/v2/recaptchaConfig",H(e,t))}async function J(e,t){return q(e,"POST","/v1/accounts:delete",t)}async function Y(e,t){return q(e,"POST","/v1/accounts:update",t)}async function X(e,t){return q(e,"POST","/v1/accounts:lookup",t)}function Q(e){if(e)try{const n=new Date(Number(e));if(!isNaN(n.getTime()))return n.toUTCString()}catch(t){}}function Z(t,n=!1){return(0,e.getModularInstance)(t).getIdToken(n)}async function ee(t,n=!1){const i=(0,e.getModularInstance)(t),r=await i.getIdToken(n),s=ne(r);R(s&&s.exp&&s.auth_time&&s.iat,i.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Q(te(s.auth_time)),issuedAtTime:Q(te(s.iat)),expirationTime:Q(te(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}function te(e){return 1e3*Number(e)}function ne(t){const[n,i,r]=t.split(".");if(void 0===n||void 0===i||void 0===r)return y("JWT malformed, contained fewer than 3 sections"),null;try{const t=(0,e.base64Decode)(i);return t?JSON.parse(t):(y("Failed to decode base64 JWT payload"),null)}catch(s){return y("Caught error parsing JWT payload as JSON",null==s?void 0:s.toString()),null}}function ie(e){const t=ne(e);return R(t,"internal-error"),R(void 0!==t.exp,"internal-error"),R(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function re(t,n,i=!1){if(i)return n;try{return await n}catch(r){throw r instanceof e.FirebaseError&&se(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function se({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}class oe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class ae{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Q(this.lastLoginAt),this.creationTime=Q(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ce(e){var t;const n=e.auth,i=await e.getIdToken(),r=await re(e,X(n,{idToken:i}));R(null==r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?le(s.providerUserInfo):[],a=de(e.providerData,o),c=e.isAnonymous,u=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!c&&u,l={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ae(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,l)}async function ue(t){const n=(0,e.getModularInstance)(t);await ce(n),await n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)}function de(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function le(e){return e.map(e=>{var{providerId:t}=e,n=(0,i.__rest)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}async function he(t,n){const i=await j(t,{},async()=>{const i=(0,e.querystring)({grant_type:"refresh_token",refresh_token:n}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=G(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",U.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}class pe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){R(e.idToken,"internal-error"),R(void 0!==e.idToken,"internal-error"),R(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):ie(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return R(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await he(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new pe;return n&&(R("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(R("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(R("number"==typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pe,this.toJSON())}_performRefresh(){return N("not implemented")}}function me(e,t){R("string"==typeof e||void 0===e,"internal-error",{appName:t})}class fe{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=(0,i.__rest)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ae(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await re(this,this.stsTokenManager.getToken(this.auth,e));return R(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ee(this,e)}reload(){return ue(this)}_assign(e){this!==e&&(R(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fe(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){R(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ce(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await re(this,J(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,c,u;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,l=null!==(i=t.email)&&void 0!==i?i:void 0,h=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,m=null!==(o=t.tenantId)&&void 0!==o?o:void 0,f=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:I,emailVerified:_,isAnonymous:T,providerData:y,stsTokenManager:w}=t;R(I&&w,e,"internal-error");const E=pe.fromJSON(this.name,w);R("string"==typeof I,e,"internal-error"),me(d,e.name),me(l,e.name),R("boolean"==typeof _,e,"internal-error"),R("boolean"==typeof T,e,"internal-error"),me(h,e.name),me(p,e.name),me(m,e.name),me(f,e.name),me(g,e.name),me(v,e.name);const A=new fe({uid:I,auth:e,email:l,emailVerified:_,displayName:d,isAnonymous:T,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:E,createdAt:g,lastLoginAt:v});return y&&Array.isArray(y)&&(A.providerData=y.map(e=>Object.assign({},e))),f&&(A._redirectEventId=f),A}static async _fromIdTokenResponse(e,t,n=!1){const i=new pe;i.updateFromServerResponse(t);const r=new fe({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await ce(r),r}}exports.aJ=fe;const ge=new Map;function ve(e){P(e instanceof Function,"Expected a class definition");let t=ge.get(e);return t?(P(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ge.set(e,t),t)}class Ie{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ie.type="NONE";const _e=exports.Q=Ie;function Te(e,t,n){return`firebase:${e}:${t}:${n}`}class ye{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=Te(this.userKey,i.apiKey,r),this.fullPersistenceKey=Te("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?fe._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new ye(ve(_e),e,n);const i=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let r=i[0]||ve(_e);const s=Te(n,e.config.apiKey,e.name);let o=null;for(const u of t)try{const t=await u._get(s);if(t){const n=fe._fromJSON(e,t);u!==r&&(o=n),r=u;break}}catch(c){}const a=i.filter(e=>e._shouldAllowMigration);return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==r)try{await e._remove(s)}catch(c){}})),new ye(r,e,n)):new ye(r,e,n)}}function we(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Se(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ee(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ne(t))return"Blackberry";if(Pe(t))return"Webos";if(Ae(t))return"Safari";if((t.includes("chrome/")||ke(t))&&!t.includes("edge/"))return"Chrome";if(Re(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Ee(t=(0,e.getUA)()){return/firefox\//i.test(t)}function Ae(t=(0,e.getUA)()){const n=t.toLowerCase();return n.includes("safari/")&&!n.includes("chrome/")&&!n.includes("crios/")&&!n.includes("android")}function ke(t=(0,e.getUA)()){return/crios\//i.test(t)}function Se(t=(0,e.getUA)()){return/iemobile/i.test(t)}function Re(t=(0,e.getUA)()){return/android/i.test(t)}function Ne(t=(0,e.getUA)()){return/blackberry/i.test(t)}function Pe(t=(0,e.getUA)()){return/webos/i.test(t)}function be(t=(0,e.getUA)()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Oe(t=(0,e.getUA)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function Ce(t=(0,e.getUA)()){var n;return be(t)&&!!(null===(n=window.navigator)||void 0===n?void 0:n.standalone)}function De(){return(0,e.isIE)()&&10===document.documentMode}function Le(t=(0,e.getUA)()){return be(t)||Re(t)||Pe(t)||Ne(t)||/windows phone/i.test(t)||Se(t)}function Me(){try{return!(!window||window===window.top)}catch(e){return!1}}function xe(n,i=[]){let r;switch(n){case"Browser":r=we((0,e.getUA)());break;case"Worker":r=`${we((0,e.getUA)())}-${n}`;break;default:r=n}const s=i.length?i.join(","):"FirebaseCore-web";return`${r}/JsCore/${t.SDK_VERSION}/${s}`}class Ue{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,i)=>{try{n(e(t))}catch(r){i(r)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=(()=>Promise.resolve())}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(i){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==n?void 0:n.message})}}}async function Ve(e,t={}){return q(e,"GET","/v2/passwordPolicy",H(e,t))}const Fe=6;class He{constructor(e){var t,n,i,r;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:Fe,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=e.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,r,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}class qe{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ze(this),this.idTokenSubscription=new ze(this),this.beforeStateQueue=new Ue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=v,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ve(t)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await ye.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(r){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||null==o||!o.user||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return R(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ce(e)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=L()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const n=t?(0,e.getModularInstance)(t):null;return n&&R(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&R(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ve(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ve(this),t=new He(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new e.ErrorFactory("auth","Firebase",t())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ve(e)||this._popupRedirectResolver;R(t,this,"argument-error"),this.redirectPersistenceManager=await ye.create(this,[ve(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"==typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(R(o,this,"internal-error"),o.then(()=>{s||r(this.currentUser)}),"function"==typeof t){const r=e.addObserver(t,n,i);return()=>{s=!0,r()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return R(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&T(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function je(t){return(0,e.getModularInstance)(t)}exports.aK=qe;class ze{constructor(t){this.auth=t,this.observer=null,this.addObserver=(0,e.createSubscribe)(e=>this.observer=e)}get next(){return R(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ge(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}function We(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=(e=>{const t=E("internal-error");t.customData=e,n(t)}),i.type="text/javascript",i.charset="UTF-8",Ge().appendChild(i)})}function Ke(e){return`__${e}${Math.floor(1e6*Math.random())}`}const Be="https://www.google.com/recaptcha/enterprise.js?render=",$e="recaptcha-enterprise",Je="NO_RECAPTCHA";class Ye{constructor(e){this.type=$e,this.auth=je(e)}async verify(e="verify",t=!1){function n(t,n,i){const r=window.grecaptcha;l(r)?r.enterprise.ready(()=>{r.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Je)})}):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,i)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{$(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(i=>{if(void 0!==i.recaptchaKey){const n=new h(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(r=>{if(!t&&l(window.grecaptcha))n(r,e,i);else{if("undefined"==typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));We(Be+r).then(()=>{n(r,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}}async function Xe(e,t,n,i=!1){const r=new Ye(e);let s;try{s=await r.verify(n)}catch(a){s=await r.verify(n,!0)}const o=Object.assign({},t);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Qe(e){const t=je(e),n=await $(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new h(n);if(null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,i.emailPasswordEnabled){new Ye(t).verify()}}function Ze(n,i){const r=(0,t._getProvider)(n,"auth");if(r.isInitialized()){const t=r.getImmediate(),n=r.getOptions();if((0,e.deepEqual)(n,null!=i?i:{}))return t;w(t,"already-initialized")}return r.initialize({options:i})}function et(e,t){const n=(null==t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ve);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}function tt(e,t,n){const i=je(e);R(i._canInitEmulator,i,"emulator-config-failed"),R(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null==n?void 0:n.disableWarnings),s=nt(t),{host:o,port:a}=it(t),c=null===a?"":`:${a}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||st()}function nt(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function it(e){const t=nt(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:rt(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:rt(t)}}}function rt(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function st(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}class ot{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return N("not implemented")}_getIdTokenResponse(e){return N("not implemented")}_linkToIdToken(e,t){return N("not implemented")}_getReauthenticationResolver(e){return N("not implemented")}}async function at(e,t){return q(e,"POST","/v1/accounts:resetPassword",H(e,t))}async function ct(e,t){return q(e,"POST","/v1/accounts:update",t)}async function ut(e,t){return q(e,"POST","/v1/accounts:update",H(e,t))}async function dt(e,t){return z(e,"POST","/v1/accounts:signInWithPassword",H(e,t))}async function lt(e,t){return q(e,"POST","/v1/accounts:sendOobCode",H(e,t))}async function ht(e,t){return lt(e,t)}async function pt(e,t){return lt(e,t)}async function mt(e,t){return lt(e,t)}async function ft(e,t){return lt(e,t)}async function gt(e,t){return z(e,"POST","/v1/accounts:signInWithEmailLink",H(e,t))}async function vt(e,t){return z(e,"POST","/v1/accounts:signInWithEmailLink",H(e,t))}exports.K=ot;class It extends ot{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new It(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new It(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await Xe(e,n,"signInWithPassword");return dt(e,t)}return dt(e,n).catch(async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await Xe(e,n,"signInWithPassword");return dt(e,t)}return Promise.reject(t)});case"emailLink":return gt(e,{email:this._email,oobCode:this._password});default:w(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ct(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return vt(e,{idToken:t,email:this._email,oobCode:this._password});default:w(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function _t(e,t){return z(e,"POST","/v1/accounts:signInWithIdp",H(e,t))}exports.L=It;const Tt="http://localhost";class yt extends ot{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new yt(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):w("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=(0,i.__rest)(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new yt(n,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){return _t(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,_t(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_t(e,t)}buildRequest(){const t={requestUri:Tt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=(0,e.querystring)(n)}return t}}async function wt(e,t){return q(e,"POST","/v1/accounts:sendVerificationCode",H(e,t))}async function Et(e,t){return z(e,"POST","/v1/accounts:signInWithPhoneNumber",H(e,t))}async function At(e,t){const n=await z(e,"POST","/v1/accounts:signInWithPhoneNumber",H(e,t));if(n.temporaryProof)throw K(e,"account-exists-with-different-credential",n);return n}exports.M=yt;const kt={USER_NOT_FOUND:"user-not-found"};async function St(e,t){return z(e,"POST","/v1/accounts:signInWithPhoneNumber",H(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),kt)}class Rt extends ot{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Rt({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Rt({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return Et(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return At(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return St(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new Rt({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}function Nt(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Pt(t){const n=(0,e.querystringDecode)((0,e.extractQuerystring)(t)).link,i=n?(0,e.querystringDecode)((0,e.extractQuerystring)(n)).deep_link_id:null,r=(0,e.querystringDecode)((0,e.extractQuerystring)(t)).deep_link_id;return(r?(0,e.querystringDecode)((0,e.extractQuerystring)(r)).link:null)||r||i||n||t}exports.N=Rt;class bt{constructor(t){var n,i,r,s,o,a;const c=(0,e.querystringDecode)((0,e.extractQuerystring)(t)),u=null!==(n=c.apiKey)&&void 0!==n?n:null,d=null!==(i=c.oobCode)&&void 0!==i?i:null,l=Nt(null!==(r=c.mode)&&void 0!==r?r:null);R(u&&d&&l,"argument-error"),this.apiKey=u,this.operation=l,this.code=d,this.continueUrl=null!==(s=c.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=Pt(e);try{return new bt(t)}catch(n){return null}}}function Ot(e){return bt.parseLink(e)}exports.ah=bt;class Ct{constructor(){this.providerId=Ct.PROVIDER_ID}static credential(e,t){return It._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=bt.parseLink(t);return R(n,"argument-error"),It._fromEmailAndCode(e,n.code,n.tenantId)}}exports.U=Ct,Ct.PROVIDER_ID="password",Ct.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ct.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Dt{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Lt extends Dt{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Mt extends Lt{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return R("providerId"in t&&"signInMethod"in t,"argument-error"),yt._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return R(e.idToken||e.accessToken,"argument-error"),yt._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Mt.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Mt.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:r,nonce:s,providerId:o}=e;if(!(n||i||t||r))return null;if(!o)return null;try{return new Mt(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:r})}catch(a){return null}}}exports.Y=Mt;class xt extends Lt{constructor(){super("facebook.com")}static credential(e){return yt._fromParams({providerId:xt.PROVIDER_ID,signInMethod:xt.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xt.credentialFromTaggedObject(e)}static credentialFromError(e){return xt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!(e&&"oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return xt.credential(e.oauthAccessToken)}catch(t){return null}}}exports.V=xt,xt.FACEBOOK_SIGN_IN_METHOD="facebook.com",xt.PROVIDER_ID="facebook.com";class Ut extends Lt{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return yt._fromParams({providerId:Ut.PROVIDER_ID,signInMethod:Ut.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ut.credentialFromTaggedObject(e)}static credentialFromError(e){return Ut.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Ut.credential(t,n)}catch(i){return null}}}exports.W=Ut,Ut.GOOGLE_SIGN_IN_METHOD="google.com",Ut.PROVIDER_ID="google.com";class Vt extends Lt{constructor(){super("github.com")}static credential(e){return yt._fromParams({providerId:Vt.PROVIDER_ID,signInMethod:Vt.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vt.credentialFromTaggedObject(e)}static credentialFromError(e){return Vt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!(e&&"oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Vt.credential(e.oauthAccessToken)}catch(t){return null}}}exports.X=Vt,Vt.GITHUB_SIGN_IN_METHOD="github.com",Vt.PROVIDER_ID="github.com";const Ft="http://localhost";class Ht extends ot{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return _t(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,_t(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_t(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i,pendingToken:r}=t;return n&&i&&r&&n===i?new Ht(n,r):null}static _create(e,t){return new Ht(e,t)}buildRequest(){return{requestUri:Ft,returnSecureToken:!0,pendingToken:this.pendingToken}}}exports.aP=Ht;const qt="saml.";class jt extends Dt{constructor(e){R(e.startsWith(qt),"argument-error"),super(e)}static credentialFromResult(e){return jt.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return jt.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Ht.fromJSON(e);return R(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return Ht._create(n,t)}catch(i){return null}}}exports.Z=jt;class zt extends Lt{constructor(){super("twitter.com")}static credential(e,t){return yt._fromParams({providerId:zt.PROVIDER_ID,signInMethod:zt.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return zt.credentialFromTaggedObject(e)}static credentialFromError(e){return zt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return zt.credential(t,n)}catch(i){return null}}}async function Gt(e,t){return z(e,"POST","/v1/accounts:signUp",H(e,t))}exports._=zt,zt.TWITTER_SIGN_IN_METHOD="twitter.com",zt.PROVIDER_ID="twitter.com";class Wt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const r=await fe._fromIdTokenResponse(e,n,i),s=Kt(n);return new Wt({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Kt(n);return new Wt({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Kt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}async function Bt(e){var t;const n=je(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Wt({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await Gt(n,{returnSecureToken:!0}),r=await Wt._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}class $t extends e.FirebaseError{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,$t.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new $t(e,t,n,i)}}function Jt(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw $t._fromErrorAndOperation(e,n,t,i);throw n})}function Yt(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}async function Xt(t,n){const i=(0,e.getModularInstance)(t);await Zt(!0,i,n);const{providerUserInfo:r}=await Y(i.auth,{idToken:await i.getIdToken(),deleteProvider:[n]}),s=Yt(r||[]);return i.providerData=i.providerData.filter(e=>s.has(e.providerId)),s.has("phone")||(i.phoneNumber=null),await i.auth._persistUserIfCurrent(i),i}async function Qt(e,t,n=!1){const i=await re(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Wt._forOperation(e,"link",i)}async function Zt(e,t,n){await ce(t);const i=!1===e?"provider-already-linked":"no-such-provider";R(Yt(t.providerData).has(n)===e,t.auth,i)}async function en(e,t,n=!1){const{auth:i}=e;try{const s=await re(e,Jt(i,"reauthenticate",t,e),n);R(s.idToken,i,"internal-error");const o=ne(s.idToken);R(o,i,"internal-error");const{sub:a}=o;return R(e.uid===a,i,"user-mismatch"),Wt._forOperation(e,"reauthenticate",s)}catch(r){throw"auth/user-not-found"===(null==r?void 0:r.code)&&w(i,"user-mismatch"),r}}async function tn(e,t,n=!1){const i=await Jt(e,"signIn",t),r=await Wt._fromIdTokenResponse(e,"signIn",i);return n||await e._updateCurrentUser(r.user),r}async function nn(e,t){return tn(je(e),t)}async function rn(t,n){const i=(0,e.getModularInstance)(t);return await Zt(!1,i,n.providerId),Qt(i,n)}async function sn(t,n){return en((0,e.getModularInstance)(t),n)}async function on(e,t){return z(e,"POST","/v1/accounts:signInWithCustomToken",H(e,t))}async function an(e,t){const n=je(e),i=await on(n,{token:t,returnSecureToken:!0}),r=await Wt._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}class cn{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?un._fromServerResponse(e,t):"totpInfo"in t?dn._fromServerResponse(e,t):w(e,"internal-error")}}class un extends cn{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new un(t)}}class dn extends cn{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new dn(t)}}function ln(e,t,n){var i;R((null===(i=n.url)||void 0===i?void 0:i.length)>0,e,"invalid-continue-uri"),R(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(R(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(R(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function hn(e){const t=je(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function pn(e,t,n){var i;const r=je(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(null===(i=r._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const e=await Xe(r,s,"getOobCode",!0);n&&ln(r,e,n),await pt(r,e)}else n&&ln(r,s,n),await pt(r,s).catch(async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const e=await Xe(r,s,"getOobCode",!0);n&&ln(r,e,n),await pt(r,e)}})}async function mn(t,n,i){await at((0,e.getModularInstance)(t),{oobCode:n,newPassword:i}).catch(async e=>{throw"auth/password-does-not-meet-requirements"===e.code&&hn(t),e})}async function fn(t,n){await ut((0,e.getModularInstance)(t),{oobCode:n})}async function gn(t,n){const i=(0,e.getModularInstance)(t),r=await at(i,{oobCode:n}),s=r.requestType;switch(R(s,i,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":R(r.newEmail,i,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":R(r.mfaInfo,i,"internal-error");default:R(r.email,i,"internal-error")}let o=null;return r.mfaInfo&&(o=cn._fromServerResponse(je(i),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:s}}async function vn(t,n){const{data:i}=await gn((0,e.getModularInstance)(t),n);return i.email}async function In(e,t,n){var i;const r=je(e),s={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null===(i=r._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const e=await Xe(r,s,"signUpPassword");o=Gt(r,e)}else o=Gt(r,s).catch(async e=>{if("auth/missing-recaptcha-token"===e.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await Xe(r,s,"signUpPassword");return Gt(r,e)}throw e});const a=await o.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&hn(e),t}),c=await Wt._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function _n(t,n,i){return nn((0,e.getModularInstance)(t),Ct.credential(n,i)).catch(async e=>{throw"auth/password-does-not-meet-requirements"===e.code&&hn(t),e})}async function Tn(e,t,n){var i;const r=je(e),s={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function o(e,t){R(t.handleCodeInApp,r,"argument-error"),t&&ln(r,e,t)}if(null===(i=r._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const e=await Xe(r,s,"getOobCode",!0);o(e,n),await mt(r,e)}else o(s,n),await mt(r,s).catch(async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const e=await Xe(r,s,"getOobCode",!0);o(e,n),await mt(r,e)}})}function yn(e,t){const n=bt.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}async function wn(t,n,i){const r=(0,e.getModularInstance)(t),s=Ct.credentialWithLink(n,i||b());return R(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),nn(r,s)}async function En(e,t){return q(e,"POST","/v1/accounts:createAuthUri",H(e,t))}async function An(t,n){const i={identifier:n,continueUri:O()?b():"http://localhost"},{signinMethods:r}=await En((0,e.getModularInstance)(t),i);return r||[]}async function kn(t,n){const i=(0,e.getModularInstance)(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};n&&ln(i.auth,r,n);const{email:s}=await ht(i.auth,r);s!==t.email&&await t.reload()}async function Sn(t,n,i){const r=(0,e.getModularInstance)(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:n};i&&ln(r.auth,s,i);const{email:o}=await ft(r.auth,s);o!==t.email&&await t.reload()}async function Rn(e,t){return q(e,"POST","/v1/accounts:update",t)}async function Nn(t,{displayName:n,photoURL:i}){if(void 0===n&&void 0===i)return;const r=(0,e.getModularInstance)(t),s={idToken:await r.getIdToken(),displayName:n,photoUrl:i,returnSecureToken:!0},o=await re(r,Rn(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Pn(t,n){return On((0,e.getModularInstance)(t),n,null)}function bn(t,n){return On((0,e.getModularInstance)(t),null,n)}async function On(e,t,n){const{auth:i}=e,r={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(r.email=t),n&&(r.password=n);const s=await re(e,ct(i,r));await e._updateTokensIfNecessary(s,!0)}function Cn(e){var t,n;if(!e)return null;const{providerId:i}=e,r=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!i&&(null==e?void 0:e.idToken)){const i=null===(n=null===(t=ne(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(i){return new Dn(s,"anonymous"!==i&&"custom"!==i?i:null)}}if(!i)return null;switch(i){case"facebook.com":return new Mn(s,r);case"github.com":return new xn(s,r);case"google.com":return new Un(s,r);case"twitter.com":return new Vn(s,r,e.screenName||null);case"custom":case"anonymous":return new Dn(s,null);default:return new Dn(s,i,r)}}class Dn{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class Ln extends Dn{constructor(e,t,n,i){super(e,t,n),this.username=i}}class Mn extends Dn{constructor(e,t){super(e,"facebook.com",t)}}class xn extends Ln{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class Un extends Dn{constructor(e,t){super(e,"google.com",t)}}class Vn extends Ln{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Fn(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:Cn(n)}function Hn(t,n){return(0,e.getModularInstance)(t).setPersistence(n)}function qn(e){return Qe(e)}async function jn(e,t){return je(e).validatePassword(t)}function zn(t,n,i,r){return(0,e.getModularInstance)(t).onIdTokenChanged(n,i,r)}function Gn(t,n,i){return(0,e.getModularInstance)(t).beforeAuthStateChanged(n,i)}function Wn(t,n,i,r){return(0,e.getModularInstance)(t).onAuthStateChanged(n,i,r)}function Kn(t){(0,e.getModularInstance)(t).useDeviceLanguage()}function Bn(t,n){return(0,e.getModularInstance)(t).updateCurrentUser(n)}function $n(t){return(0,e.getModularInstance)(t).signOut()}async function Jn(t){return(0,e.getModularInstance)(t).delete()}class Yn{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Yn("enroll",e,t)}static _fromMfaPendingCredential(e){return new Yn("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Yn._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Yn._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Xn{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=je(e),i=t.customData._serverResponse,r=(i.mfaInfo||[]).map(e=>cn._fromServerResponse(n,e));R(i.mfaPendingCredential,n,"internal-error");const s=Yn._fromMfaPendingCredential(i.mfaPendingCredential);return new Xn(s,r,async e=>{const r=await e._process(n,s);delete i.mfaInfo,delete i.mfaPendingCredential;const o=Object.assign(Object.assign({},i),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":const e=await Wt._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return R(t.user,n,"internal-error"),Wt._forOperation(t.user,t.operationType,o);default:w(n,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function Qn(t,n){var i;const r=(0,e.getModularInstance)(t),s=n;return R(n.customData.operationType,r,"argument-error"),R(null===(i=s.customData._serverResponse)||void 0===i?void 0:i.mfaPendingCredential,r,"argument-error"),Xn._fromError(r,s)}function Zn(e,t){return q(e,"POST","/v2/accounts/mfaEnrollment:start",H(e,t))}function ei(e,t){return q(e,"POST","/v2/accounts/mfaEnrollment:finalize",H(e,t))}function ti(e,t){return q(e,"POST","/v2/accounts/mfaEnrollment:start",H(e,t))}function ni(e,t){return q(e,"POST","/v2/accounts/mfaEnrollment:finalize",H(e,t))}function ii(e,t){return q(e,"POST","/v2/accounts/mfaEnrollment:withdraw",H(e,t))}class ri{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>cn._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new ri(e)}async getSession(){return Yn._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,i=await this.getSession(),r=await re(this.user,n._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(r),this.user.reload()}async unenroll(e){const t="string"==typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await re(this.user,ii(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:e})=>e!==t),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(i){throw i}}}const si=new WeakMap;function oi(t){const n=(0,e.getModularInstance)(t);return si.has(n)||si.set(n,ri._fromUser(n)),si.get(n)}const ai="__sak";class ci{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ai,"1"),this.storage.removeItem(ai),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}function ui(){const t=(0,e.getUA)();return Ae(t)||be(t)}const di=1e3,li=10;class hi extends ci{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=((e,t)=>this.onStorageEvent(e,t)),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=ui()&&Me(),this.fallbackToPolling=Le(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);De()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,li):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},di)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}hi.type="LOCAL";const pi=exports.b=hi;class mi extends ci{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mi.type="SESSION";const fi=exports.a=mi;function gi(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class vi{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new vi(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map(async e=>e(t.origin,r)),a=await gi(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ii(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}vi.receivers=[];class _i{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise((o,a)=>{const c=Ii("",20);i.port1.start();const u=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),o(t.data.response);break;default:clearTimeout(u),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Ti(){return window}function yi(e){Ti().location.href=e}function wi(){return void 0!==Ti().WorkerGlobalScope&&"function"==typeof Ti().importScripts}async function Ei(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}function Ai(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}function ki(){return wi()?self:null}const Si="firebaseLocalStorageDb",Ri=1,Ni="firebaseLocalStorage",Pi="fbase_key";class bi{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Oi(e,t){return e.transaction([Ni],t?"readwrite":"readonly").objectStore(Ni)}function Ci(){const e=indexedDB.deleteDatabase(Si);return new bi(e).toPromise()}function Di(){const e=indexedDB.open(Si,Ri);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Ni,{keyPath:Pi})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Ni)?t(n):(n.close(),await Ci(),t(await Di()))})})}async function Li(e,t,n){const i=Oi(e,!0).put({[Pi]:t,value:n});return new bi(i).toPromise()}async function Mi(e,t){const n=Oi(e,!1).get(t),i=await new bi(n).toPromise();return void 0===i?null:i.value}function xi(e,t){const n=Oi(e,!0).delete(t);return new bi(n).toPromise()}const Ui=800,Vi=3;class Fi{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Di(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(n){if(t++>Vi)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wi()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vi._getInstance(ki()),this.receiver._subscribe("keyChanged",async(e,t)=>{return{keyProcessed:(await this._poll()).includes(t.key)}}),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Ei(),!this.activeServiceWorker)return;this.sender=new _i(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&Ai()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Di();return await Li(t,ai,"1"),await xi(t,ai),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Li(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>Mi(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>xi(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Oi(e,!1).getAll();return new bi(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ui)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Fi.type="LOCAL";const Hi=exports.i=Fi;function qi(e,t){return q(e,"POST","/v2/accounts/mfaSignIn:start",H(e,t))}function ji(e,t){return q(e,"POST","/v2/accounts/mfaSignIn:finalize",H(e,t))}function zi(e,t){return q(e,"POST","/v2/accounts/mfaSignIn:finalize",H(e,t))}const Gi=500,Wi=6e4,Ki=1e12;class Bi{constructor(e){this.auth=e,this.counter=Ki,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new $i(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Ki;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Ki;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Ki;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class $i{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=(()=>{this.execute()});const i="string"==typeof e?document.getElementById(e):e;R(i,"argument-error",{appName:t}),this.container=i,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=Ji(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},Wi)},Gi))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Ji(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<e;i++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}const Yi=Ke("rcb"),Xi=new M(3e4,6e4),Qi="https://www.google.com/recaptcha/api.js?";class Zi{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Ti().grecaptcha)||void 0===e?void 0:e.render)}load(t,n=""){return R(er(n),t,"argument-error"),this.shouldResolveImmediately(n)&&d(Ti().grecaptcha)?Promise.resolve(Ti().grecaptcha):new Promise((i,r)=>{const s=Ti().setTimeout(()=>{r(E(t,"network-request-failed"))},Xi.get());Ti()[Yi]=(()=>{Ti().clearTimeout(s),delete Ti()[Yi];const e=Ti().grecaptcha;if(!e||!d(e))return void r(E(t,"internal-error"));const o=e.render;e.render=((e,t)=>{const n=o(e,t);return this.counter++,n}),this.hostLanguage=n,i(e)}),We(`${Qi}?${(0,e.querystring)({onload:Yi,render:"explicit",hl:n})}`).catch(()=>{clearTimeout(s),r(E(t,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Ti().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function er(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}class tr{async load(e){return new Bi(e)}clearedOneInstance(){}}const nr="recaptcha",ir={theme:"light",type:"image"};class rr{constructor(e,t,n=Object.assign({},ir)){this.parameters=n,this.type=nr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=je(e),this.isInvisible="invisible"===this.parameters.size,R("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const i="string"==typeof t?document.getElementById(t):t;R(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new tr:new Zi,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(n=>{const i=e=>{e&&(this.tokenChangeListeners.delete(i),n(e))};this.tokenChangeListeners.add(i),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){R(!this.parameters.sitekey,this.auth,"argument-error"),R(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),R("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=Ti()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){R(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){R(O()&&!wi(),this.auth,"internal-error"),await sr(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await B(this.auth);R(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return R(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function sr(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=(()=>t()),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}exports.R=rr;class or{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Rt._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function ar(t,n,i){const r=je(t),s=await dr(r,n,(0,e.getModularInstance)(i));return new or(s,e=>nn(r,e))}async function cr(t,n,i){const r=(0,e.getModularInstance)(t);await Zt(!1,r,"phone");const s=await dr(r.auth,n,(0,e.getModularInstance)(i));return new or(s,e=>rn(r,e))}async function ur(t,n,i){const r=(0,e.getModularInstance)(t),s=await dr(r.auth,n,(0,e.getModularInstance)(i));return new or(s,e=>sn(r,e))}async function dr(e,t,n){var i;const r=await n.verify();try{let s;if(R("string"==typeof r,e,"argument-error"),R(n.type===nr,e,"argument-error"),"session"in(s="string"==typeof t?{phoneNumber:t}:t)){const t=s.session;if("phoneNumber"in s){return R("enroll"===t.type,e,"internal-error"),(await Zn(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo}{R("signin"===t.type,e,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;return R(n,e,"missing-multi-factor-info"),(await qi(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await wt(e,{phoneNumber:s.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}async function lr(t,n){await Qt((0,e.getModularInstance)(t),n)}class hr{constructor(e){this.providerId=hr.PROVIDER_ID,this.auth=je(e)}verifyPhoneNumber(t,n){return dr(this.auth,t,(0,e.getModularInstance)(n))}static credential(e,t){return Rt._fromVerification(e,t)}static credentialFromResult(e){const t=e;return hr.credentialFromTaggedObject(t)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Rt._fromTokenResponse(t,n):null}}function pr(e,t){return t?ve(t):(R(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}exports.P=hr,hr.PROVIDER_ID="phone",hr.PHONE_SIGN_IN_METHOD="phone";class mr extends ot{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _t(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _t(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _t(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function fr(e){return tn(e.auth,new mr(e),e.bypassAuthState)}function gr(e){const{auth:t,user:n}=e;return R(n,t,"internal-error"),en(n,new mr(e),e.bypassAuthState)}async function vr(e){const{auth:t,user:n}=e;return R(n,t,"internal-error"),Qt(n,new mr(e),e.bypassAuthState)}class Ir{constructor(e,t,n,i,r=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fr;case"linkViaPopup":case"linkViaRedirect":return vr;case"reauthViaPopup":case"reauthViaRedirect":return gr;default:w(this.auth,"internal-error")}}resolve(e){P(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){P(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _r=new M(2e3,1e4);async function Tr(e,t,n){const i=je(e);k(e,t,Dt);const r=pr(i,n);return new Er(i,"signInViaPopup",t,r).executeNotNull()}async function yr(t,n,i){const r=(0,e.getModularInstance)(t);k(r.auth,n,Dt);const s=pr(r.auth,i);return new Er(r.auth,"reauthViaPopup",n,s,r).executeNotNull()}async function wr(t,n,i){const r=(0,e.getModularInstance)(t);k(r.auth,n,Dt);const s=pr(r.auth,i);return new Er(r.auth,"linkViaPopup",n,s,r).executeNotNull()}class Er extends Ir{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,Er.currentPopupAction&&Er.currentPopupAction.cancel(),Er.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return R(e,this.auth,"internal-error"),e}async onExecution(){P(1===this.filter.length,"Popup operations only handle one event");const e=Ii();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(E(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(E(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Er.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;null!==(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)&&void 0!==n&&n.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(E(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,_r.get())};e()}}Er.currentPopupAction=null;const Ar="pendingRedirect",kr=new Map;class Sr extends Ir{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=kr.get(this.auth._key());if(!e){try{const n=await Rr(this.resolver,this.auth)?await super.execute():null;e=(()=>Promise.resolve(n))}catch(t){e=(()=>Promise.reject(t))}kr.set(this.auth._key(),e)}return this.bypassAuthState||kr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Rr(e,t){const n=Cr(t),i=Or(e);if(!(await i._isAvailable()))return!1;const r="true"===await i._get(n);return await i._remove(n),r}async function Nr(e,t){return Or(e)._set(Cr(t),"true")}function Pr(){kr.clear()}function br(e,t){kr.set(e._key(),t)}function Or(e){return ve(e._redirectPersistence)}function Cr(e){return Te(Ar,e.config.apiKey,e.name)}function Dr(e,t,n){return Lr(e,t,n)}async function Lr(e,t,n){const i=je(e);k(e,t,Dt),await i._initializationPromise;const r=pr(i,n);return await Nr(r,i),r._openRedirect(i,t,"signInViaRedirect")}function Mr(e,t,n){return xr(e,t,n)}async function xr(t,n,i){const r=(0,e.getModularInstance)(t);k(r.auth,n,Dt),await r.auth._initializationPromise;const s=pr(r.auth,i);await Nr(s,r.auth);const o=await qr(r);return s._openRedirect(r.auth,n,"reauthViaRedirect",o)}function Ur(e,t,n){return Vr(e,t,n)}async function Vr(t,n,i){const r=(0,e.getModularInstance)(t);k(r.auth,n,Dt),await r.auth._initializationPromise;const s=pr(r.auth,i);await Zt(!1,r,n.providerId),await Nr(s,r.auth);const o=await qr(r);return s._openRedirect(r.auth,n,"linkViaRedirect",o)}async function Fr(e,t){return await je(e)._initializationPromise,Hr(e,t,!1)}async function Hr(e,t,n=!1){const i=je(e),r=pr(i,t),s=new Sr(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}async function qr(e){const t=Ii(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}const jr=6e5;class zr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Kr(e)?t:(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0),t)}sendToConsumer(e,t){var n;if(e.error&&!Wr(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(E(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jr&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gr(e))}saveEventToCache(e){this.cachedEventUids.add(Gr(e)),this.lastProcessedEventTime=Date.now()}}function Gr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Wr({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}function Kr(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wr(e);default:return!1}}async function Br(e,t={}){return q(e,"GET","/v1/projects",t)}exports.aC=zr;const $r=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jr=/^https?/;async function Yr(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Br(e);for(const i of t)try{if(Xr(i))return}catch(n){}w(e,"unauthorized-domain")}function Xr(e){const t=b(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Jr.test(n))return!1;if($r.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Qr=new M(3e4,6e4);function Zr(){const e=Ti().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function es(e){return new Promise((t,n)=>{var i,r,s;function o(){Zr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Zr(),n(E(e,"network-request-failed"))},timeout:Qr.get()})}if(null===(r=null===(i=Ti().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(null===(s=Ti().gapi)||void 0===s||!s.load){const t=Ke("iframefcb");return Ti()[t]=(()=>{gapi.load?o():n(E(e,"network-request-failed"))}),We(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>n(e))}o()}}).catch(e=>{throw ts=null,e})}let ts=null;function ns(e){return ts=ts||es(e)}const is=new M(5e3,15e3),rs="__/auth/iframe",ss="emulator/auth/iframe",os={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},as=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cs(n){const i=n.config;R(i.authDomain,n,"auth-domain-config-required");const r=i.emulator?x(i,ss):`https://${n.config.authDomain}/${rs}`,s={apiKey:i.apiKey,appName:n.name,v:t.SDK_VERSION},o=as.get(n.config.apiHost);o&&(s.eid=o);const a=n._getFrameworks();return a.length&&(s.fw=a.join(",")),`${r}?${(0,e.querystring)(s).slice(1)}`}async function us(e){const t=await ns(e),n=Ti().gapi;return R(n,e,"internal-error"),t.open({where:document.body,url:cs(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:os,dontclear:!0},t=>new Promise(async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=E(e,"network-request-failed"),s=Ti().setTimeout(()=>{i(r)},is.get());function o(){Ti().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{i(r)})}))}const ds={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ls=500,hs=600,ps="_blank",ms="http://localhost";class fs{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function gs(t,n,i,r=ls,s=hs){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},ds),{width:r.toString(),height:s.toString(),top:o,left:a}),d=(0,e.getUA)().toLowerCase();i&&(c=ke(d)?ps:i),Ee(d)&&(n=n||ms,u.scrollbars="yes");const l=Object.entries(u).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(Ce(d)&&"_self"!==c)return vs(n||"",c),new fs(null);const h=window.open(n||"",c,l);R(h,t,"popup-blocked");try{h.focus()}catch(p){}return new fs(h)}function vs(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}exports.aN=fs;const Is="__/auth/handler",_s="emulator/auth/handler",Ts=encodeURIComponent("fac");async function ys(n,i,r,s,o,a){R(n.config.authDomain,n,"auth-domain-config-required"),R(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:r,redirectUrl:s,v:t.SDK_VERSION,eventId:o};if(i instanceof Dt){i.setDefaultLanguage(n.languageCode),c.providerId=i.providerId||"",(0,e.isEmpty)(i.getCustomParameters())||(c.customParameters=JSON.stringify(i.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))c[e]=t}if(i instanceof Lt){const e=i.getScopes().filter(e=>""!==e);e.length>0&&(c.scopes=e.join(","))}n.tenantId&&(c.tid=n.tenantId);const u=c;for(const e of Object.keys(u))void 0===u[e]&&delete u[e];const d=await n._getAppCheckToken(),l=d?`#${Ts}=${encodeURIComponent(d)}`:"";return`${ws(n)}?${(0,e.querystring)(u).slice(1)}${l}`}function ws({config:e}){return e.emulator?x(e,_s):`https://${e.authDomain}/${Is}`}const Es="webStorageSupport";class As{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fi,this._completeRedirectFn=Hr,this._overrideRedirectResult=br}async _openPopup(e,t,n,i){var r;return P(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()"),gs(e,await ys(e,t,n,b(),i),Ii())}async _openRedirect(e,t,n,i){return await this._originValidation(e),yi(await ys(e,t,n,b(),i)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(P(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await us(e),n=new zr(e);return t.register("authEvent",t=>{return R(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Es,{type:Es},n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i[Es];void 0!==r&&t(!!r),w(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Yr(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Le()||Ae()||be()}}const ks=exports.k=As;class Ss{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return N("unexpected MultiFactorSessionType")}}}class Rs extends Ss{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Rs(e)}_finalizeEnroll(e,t,n){return ei(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return ji(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Ns{constructor(){}static assertion(e){return Rs._fromCredential(e)}}exports.m=Ns,Ns.FACTOR_ID="phone";class Ps{static assertionForEnrollment(e,t){return bs._fromSecret(e,t)}static assertionForSignIn(e,t){return bs._fromEnrollmentId(e,t)}static async generateSecret(e){var t;const n=e;R(void 0!==(null===(t=n.user)||void 0===t?void 0:t.auth),"internal-error");const i=await ti(n.user.auth,{idToken:n.credential,totpEnrollmentInfo:{}});return Os._fromStartTotpMfaEnrollmentResponse(i,n.user.auth)}}exports.T=Ps,Ps.FACTOR_ID="totp";class bs extends Ss{constructor(e,t,n){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(e,t){return new bs(t,void 0,e)}static _fromEnrollmentId(e,t){return new bs(t,e)}async _finalizeEnroll(e,t,n){return R(void 0!==this.secret,e,"argument-error"),ni(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){R(void 0!==this.enrollmentId&&void 0!==this.otp,e,"argument-error");const n={verificationCode:this.otp};return zi(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}}class Os{constructor(e,t,n,i,r,s,o){this.sessionInfo=s,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=r}static _fromStartTotpMfaEnrollmentResponse(e,t){return new Os(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var n;let i=!1;return(Cs(e)||Cs(t))&&(i=!0),i&&(Cs(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Cs(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function Cs(e){return void 0===e||0===(null==e?void 0:e.length)}exports.n=Os;var Ds="@firebase/auth",Ls="1.3.0";class Ms{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){R(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function xs(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Us(e){(0,t._registerComponent)(new r.Component("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;R(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xe(e)},u=new qe(i,r,s,c);return et(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,t._registerComponent)(new r.Component("auth-internal",e=>{return(e=>new Ms(e))(je(e.getProvider("auth").getImmediate()))},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,t.registerVersion)(Ds,Ls,xs(e)),(0,t.registerVersion)(Ds,Ls,"esm2017")}const Vs=300,Fs=(0,e.getExperimentalSetting)("authIdTokenMaxAge")||300;let Hs=null;const qs=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Fs)return;const r=null==n?void 0:n.token;Hs!==r&&(Hs=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function js(n=(0,t.getApp)()){const i=(0,t._getProvider)(n,"auth");if(i.isInitialized())return i.getImmediate();const r=Ze(n,{popupRedirectResolver:ks,persistence:[Hi,pi,fi]}),s=(0,e.getExperimentalSetting)("authTokenSyncURL");if(s){const e=qs(s);Gn(r,e,()=>e(r.currentUser)),zn(r,t=>e(t))}const o=(0,e.getDefaultEmulatorHost)("auth");return o&&tt(r,`http://${o}`),r}Us("Browser");
},{"@firebase/util":"chA2","@firebase/app":"h2Mb","@firebase/logger":"JJem","tslib":"vCxL","@firebase/component":"vhY9"}],"QWyA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"ActionCodeOperation",{enumerable:!0,get:function(){return e.A}}),Object.defineProperty(exports,"ActionCodeURL",{enumerable:!0,get:function(){return e.ah}}),Object.defineProperty(exports,"AuthCredential",{enumerable:!0,get:function(){return e.K}}),Object.defineProperty(exports,"AuthErrorCodes",{enumerable:!0,get:function(){return e.H}}),Object.defineProperty(exports,"EmailAuthCredential",{enumerable:!0,get:function(){return e.L}}),Object.defineProperty(exports,"EmailAuthProvider",{enumerable:!0,get:function(){return e.U}}),Object.defineProperty(exports,"FacebookAuthProvider",{enumerable:!0,get:function(){return e.V}}),Object.defineProperty(exports,"FactorId",{enumerable:!0,get:function(){return e.F}}),Object.defineProperty(exports,"GithubAuthProvider",{enumerable:!0,get:function(){return e.X}}),Object.defineProperty(exports,"GoogleAuthProvider",{enumerable:!0,get:function(){return e.W}}),Object.defineProperty(exports,"OAuthCredential",{enumerable:!0,get:function(){return e.M}}),Object.defineProperty(exports,"OAuthProvider",{enumerable:!0,get:function(){return e.Y}}),Object.defineProperty(exports,"OperationType",{enumerable:!0,get:function(){return e.O}}),Object.defineProperty(exports,"PhoneAuthCredential",{enumerable:!0,get:function(){return e.N}}),Object.defineProperty(exports,"PhoneAuthProvider",{enumerable:!0,get:function(){return e.P}}),Object.defineProperty(exports,"PhoneMultiFactorGenerator",{enumerable:!0,get:function(){return e.m}}),Object.defineProperty(exports,"ProviderId",{enumerable:!0,get:function(){return e.p}}),Object.defineProperty(exports,"RecaptchaVerifier",{enumerable:!0,get:function(){return e.R}}),Object.defineProperty(exports,"SAMLAuthProvider",{enumerable:!0,get:function(){return e.Z}}),Object.defineProperty(exports,"SignInMethod",{enumerable:!0,get:function(){return e.S}}),Object.defineProperty(exports,"TotpMultiFactorGenerator",{enumerable:!0,get:function(){return e.T}}),Object.defineProperty(exports,"TotpSecret",{enumerable:!0,get:function(){return e.n}}),Object.defineProperty(exports,"TwitterAuthProvider",{enumerable:!0,get:function(){return e._}}),Object.defineProperty(exports,"applyActionCode",{enumerable:!0,get:function(){return e.a6}}),Object.defineProperty(exports,"beforeAuthStateChanged",{enumerable:!0,get:function(){return e.x}}),Object.defineProperty(exports,"browserLocalPersistence",{enumerable:!0,get:function(){return e.b}}),Object.defineProperty(exports,"browserPopupRedirectResolver",{enumerable:!0,get:function(){return e.k}}),Object.defineProperty(exports,"browserSessionPersistence",{enumerable:!0,get:function(){return e.a}}),Object.defineProperty(exports,"checkActionCode",{enumerable:!0,get:function(){return e.a7}}),Object.defineProperty(exports,"confirmPasswordReset",{enumerable:!0,get:function(){return e.a5}}),Object.defineProperty(exports,"connectAuthEmulator",{enumerable:!0,get:function(){return e.J}}),Object.defineProperty(exports,"createUserWithEmailAndPassword",{enumerable:!0,get:function(){return e.a9}}),Object.defineProperty(exports,"debugErrorMap",{enumerable:!0,get:function(){return e.E}}),Object.defineProperty(exports,"deleteUser",{enumerable:!0,get:function(){return e.D}}),Object.defineProperty(exports,"fetchSignInMethodsForEmail",{enumerable:!0,get:function(){return e.ae}}),Object.defineProperty(exports,"getAdditionalUserInfo",{enumerable:!0,get:function(){return e.ap}}),Object.defineProperty(exports,"getAuth",{enumerable:!0,get:function(){return e.o}}),Object.defineProperty(exports,"getIdToken",{enumerable:!0,get:function(){return e.am}}),Object.defineProperty(exports,"getIdTokenResult",{enumerable:!0,get:function(){return e.an}}),Object.defineProperty(exports,"getMultiFactorResolver",{enumerable:!0,get:function(){return e.ar}}),Object.defineProperty(exports,"getRedirectResult",{enumerable:!0,get:function(){return e.j}}),Object.defineProperty(exports,"inMemoryPersistence",{enumerable:!0,get:function(){return e.Q}}),Object.defineProperty(exports,"indexedDBLocalPersistence",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(exports,"initializeAuth",{enumerable:!0,get:function(){return e.I}}),Object.defineProperty(exports,"initializeRecaptchaConfig",{enumerable:!0,get:function(){return e.t}}),Object.defineProperty(exports,"isSignInWithEmailLink",{enumerable:!0,get:function(){return e.ac}}),Object.defineProperty(exports,"linkWithCredential",{enumerable:!0,get:function(){return e.a1}}),Object.defineProperty(exports,"linkWithPhoneNumber",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(exports,"linkWithPopup",{enumerable:!0,get:function(){return e.d}}),Object.defineProperty(exports,"linkWithRedirect",{enumerable:!0,get:function(){return e.g}}),Object.defineProperty(exports,"multiFactor",{enumerable:!0,get:function(){return e.as}}),Object.defineProperty(exports,"onAuthStateChanged",{enumerable:!0,get:function(){return e.y}}),Object.defineProperty(exports,"onIdTokenChanged",{enumerable:!0,get:function(){return e.w}}),Object.defineProperty(exports,"parseActionCodeURL",{enumerable:!0,get:function(){return e.ai}}),Object.defineProperty(exports,"prodErrorMap",{enumerable:!0,get:function(){return e.G}}),Object.defineProperty(exports,"reauthenticateWithCredential",{enumerable:!0,get:function(){return e.a2}}),Object.defineProperty(exports,"reauthenticateWithPhoneNumber",{enumerable:!0,get:function(){return e.r}}),Object.defineProperty(exports,"reauthenticateWithPopup",{enumerable:!0,get:function(){return e.e}}),Object.defineProperty(exports,"reauthenticateWithRedirect",{enumerable:!0,get:function(){return e.h}}),Object.defineProperty(exports,"reload",{enumerable:!0,get:function(){return e.aq}}),Object.defineProperty(exports,"sendEmailVerification",{enumerable:!0,get:function(){return e.af}}),Object.defineProperty(exports,"sendPasswordResetEmail",{enumerable:!0,get:function(){return e.a4}}),Object.defineProperty(exports,"sendSignInLinkToEmail",{enumerable:!0,get:function(){return e.ab}}),Object.defineProperty(exports,"setPersistence",{enumerable:!0,get:function(){return e.q}}),Object.defineProperty(exports,"signInAnonymously",{enumerable:!0,get:function(){return e.$}}),Object.defineProperty(exports,"signInWithCredential",{enumerable:!0,get:function(){return e.a0}}),Object.defineProperty(exports,"signInWithCustomToken",{enumerable:!0,get:function(){return e.a3}}),Object.defineProperty(exports,"signInWithEmailAndPassword",{enumerable:!0,get:function(){return e.aa}}),Object.defineProperty(exports,"signInWithEmailLink",{enumerable:!0,get:function(){return e.ad}}),Object.defineProperty(exports,"signInWithPhoneNumber",{enumerable:!0,get:function(){return e.s}}),Object.defineProperty(exports,"signInWithPopup",{enumerable:!0,get:function(){return e.c}}),Object.defineProperty(exports,"signInWithRedirect",{enumerable:!0,get:function(){return e.f}}),Object.defineProperty(exports,"signOut",{enumerable:!0,get:function(){return e.C}}),Object.defineProperty(exports,"unlink",{enumerable:!0,get:function(){return e.ao}}),Object.defineProperty(exports,"updateCurrentUser",{enumerable:!0,get:function(){return e.B}}),Object.defineProperty(exports,"updateEmail",{enumerable:!0,get:function(){return e.ak}}),Object.defineProperty(exports,"updatePassword",{enumerable:!0,get:function(){return e.al}}),Object.defineProperty(exports,"updatePhoneNumber",{enumerable:!0,get:function(){return e.u}}),Object.defineProperty(exports,"updateProfile",{enumerable:!0,get:function(){return e.aj}}),Object.defineProperty(exports,"useDeviceLanguage",{enumerable:!0,get:function(){return e.z}}),Object.defineProperty(exports,"validatePassword",{enumerable:!0,get:function(){return e.v}}),Object.defineProperty(exports,"verifyBeforeUpdateEmail",{enumerable:!0,get:function(){return e.ag}}),Object.defineProperty(exports,"verifyPasswordResetCode",{enumerable:!0,get:function(){return e.a8}});var e=require("./index-9a76d29a.js");require("@firebase/util"),require("@firebase/app"),require("@firebase/logger"),require("tslib"),require("@firebase/component");
},{"./index-9a76d29a.js":"KXae","@firebase/util":"chA2","@firebase/app":"h2Mb","@firebase/logger":"JJem","tslib":"vCxL","@firebase/component":"vhY9"}],"lHTY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@firebase/auth");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});
},{"@firebase/auth":"QWyA"}],"S9eB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.db=exports.auth=void 0;var e=require("firebase/app"),p=require("firebase/auth"),r=require("firebase/firestore"),a={apiKey:"AIzaSyBkjchzhWGghiCPbpmyBz3J3taGHQ7kTsA",authDomain:"ife-hng-apps.firebaseapp.com",projectId:"ife-hng-apps",storageBucket:"ife-hng-apps.appspot.com",messagingSenderId:"551803605210",appId:"1:551803605210:web:a4b90e0704c85b6bc995e3"},t=(0,e.initializeApp)(a),i=exports.auth=(0,p.getAuth)(t),s=exports.db=(0,r.getFirestore)(t);
},{"firebase/app":"QtzL","firebase/auth":"lHTY","firebase/firestore":"rrht"}],"M3E0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNavigationList=void 0;var t=require("firebase/firestore"),r=require("../config/firebase-config");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(){n=function(){return r};var t,r={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,r,e){t[r]=e.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",f=c.asyncIterator||"@@asyncIterator",s=c.toStringTag||"@@toStringTag";function l(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{l({},"")}catch(t){l=function(t,r,e){return t[r]=e}}function h(t,r,e,n){var o=r&&r.prototype instanceof w?r:w,i=Object.create(o.prototype),c=new T(n||[]);return a(i,"_invoke",{value:N(t,e,c)}),i}function p(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=h;var y="suspendedStart",v="suspendedYield",d="executing",g="completed",m={};function w(){}function b(){}function x(){}var L={};l(L,u,function(){return this});var E=Object.getPrototypeOf,_=E&&E(E(F([])));_&&_!==o&&i.call(_,u)&&(L=_);var O=x.prototype=w.prototype=Object.create(L);function j(t){["next","throw","return"].forEach(function(r){l(t,r,function(t){return this._invoke(r,t)})})}function k(t,r){function n(o,a,c,u){var f=p(t[o],t,a);if("throw"!==f.type){var s=f.arg,l=s.value;return l&&"object"==e(l)&&i.call(l,"__await")?r.resolve(l.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):r.resolve(l).then(function(t){s.value=t,c(s)},function(t){return n("throw",t,c,u)})}u(f.arg)}var o;a(this,"_invoke",{value:function(t,e){function i(){return new r(function(r,o){n(t,e,r,o)})}return o=o?o.then(i,i):i()}})}function N(r,e,n){var o=y;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=S(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var f=p(r,e,n);if("normal"===f.type){if(o=n.done?g:v,f.arg===m)continue;return{value:f.arg,done:n.done}}"throw"===f.type&&(o=g,n.method="throw",n.arg=f.arg)}}}function S(r,e){var n=e.method,o=r.iterator[n];if(o===t)return e.delegate=null,"throw"===n&&r.iterator.return&&(e.method="return",e.arg=t,S(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(o,r.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,m;var a=i.arg;return a?a.done?(e[r.resultName]=a.value,e.next=r.nextLoc,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,m):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function P(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function G(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function F(r){if(r||""===r){var n=r[u];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(i.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(e(r)+" is not iterable")}return b.prototype=x,a(O,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=l(x,s,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===b||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,l(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},r.awrap=function(t){return{__await:t}},j(k.prototype),l(k.prototype,f,function(){return this}),r.AsyncIterator=k,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new k(h(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},j(O),l(O,s,"Generator"),l(O,u,function(){return this}),l(O,"toString",function(){return"[object Generator]"}),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=F,T.prototype={constructor:T,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(G),!r)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(n,o){return c.type="throw",c.arg=r,e.next=n,o&&(e.method="next",e.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),f=i.call(a,"finallyLoc");if(u&&f){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=r,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),m},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),G(e),m}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;G(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={iterator:F(r),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=t),m}},r}function o(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(f){return void e(f)}c.done?r(u):Promise.resolve(u).then(n,o)}function i(t){return function(){var r=this,e=arguments;return new Promise(function(n,i){var a=t.apply(r,e);function c(t){o(a,n,i,c,u,"next",t)}function u(t){o(a,n,i,c,u,"throw",t)}c(void 0)})}}var a=exports.getNavigationList=function(){var e=i(n().mark(function e(o){var i,a;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=(0,t.doc)(r.db,"users",o),e.next=4,(0,t.getDoc)(i);case 4:if(!(a=e.sent).exists()){e.next=9;break}return e.abrupt("return",a.data().featureId);case 9:return console.log("No feature list found for the user."),e.abrupt("return",null);case 11:e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(0),console.error("Error getting navigation list: ",e.t0),e.t0;case 17:case"end":return e.stop()}},e,null,[[0,13]])}));return function(t){return e.apply(this,arguments)}}();
},{"firebase/firestore":"rrht","../config/firebase-config":"S9eB"}],"mAB6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("react")),t=require("@mantine/hooks"),r=require("../navigate/NavigationList");function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var a=i?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(o,u,a):o[u]=e[u]}return o.default=e,r&&r.set(e,o),o}function i(e,t){return f(e)||l(e,t)||a(e,t)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}function f(e){if(Array.isArray(e))return e}function s(n){var o=n.userId,u=(0,t.useMouse)(),a=u.x,c=u.y,l=i((0,e.useState)({x:0,y:0}),2),f=l[0],s=l[1],d=i((0,e.useState)([]),2),p=d[0],y=d[1];return(0,e.useEffect)(function(){(0,r.getNavigationList)(o).then(function(e){e&&y(e)}).catch(function(e){console.error("Error fetching user data:",e)})},[]),(0,e.useEffect)(function(){var e=function(e){var t=e.target.id,r=p.some(function(e){return e.id===t});r&&(console.log(r),s({x:a-10,y:c}))};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}},[p,a,c]),e.default.createElement("div",null,e.default.createElement("div",{id:"target",style:{position:"absolute",width:"40px",height:"40px",left:"".concat(f.x,"px"),top:"".concat(f.y,"px"),backgroundColor:"red",transition:"left 1.5s cubic-bezier(0.42, -0.3, 0.78, 1.25), top 1.5s cubic-bezier(0.42, -0.3, 0.78, 1.25)"}},"Target"))}var d=exports.default=s;
},{"react":"n8MK","@mantine/hooks":"JaOZ","../navigate/NavigationList":"M3E0"}],"lY9v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./Assistant/Assistant"));function t(e){return e&&e.__esModule?e:{default:e}}var r=function(t){var r=t.userId;return React.createElement(e.default,{userId:r})},s=exports.default=r;
},{"./Assistant/Assistant":"mAB6"}],"Focm":[function(require,module,exports) {
"use strict";var e=u(require("react")),t=u(require("react-dom/client")),r=u(require("./App"));function u(e){return e&&e.__esModule?e:{default:e}}var a=document.getElementById("assistant-widget");a.forEach(function(u){t.default.render(e.default.createElement(e.default.StrictMode,null,e.default.createElement(r.default,{userId:u.dataset.userId})),u)});
},{"react":"n8MK","react-dom/client":"NdAl","./App":"lY9v"}]},{},["Focm"], null)